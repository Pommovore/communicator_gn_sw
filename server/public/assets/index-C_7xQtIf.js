function j0(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in e)){const f=Object.getOwnPropertyDescriptor(o,u);f&&Object.defineProperty(e,u,f.get?f:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function r(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(u){if(u.ep)return;u.ep=!0;const f=r(u);fetch(u.href,f)}})();var ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V0={exports:{}},Va={},H0={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=Symbol.for("react.element"),Tp=Symbol.for("react.portal"),Np=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),Op=Symbol.for("react.provider"),Mp=Symbol.for("react.context"),bp=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Lp=Symbol.for("react.memo"),kp=Symbol.for("react.lazy"),Jf=Symbol.iterator;function Bp(e){return e===null||typeof e!="object"?null:(e=Jf&&e[Jf]||e["@@iterator"],typeof e=="function"?e:null)}var W0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G0=Object.assign,Y0={};function ns(e,t,r){this.props=e,this.context=t,this.refs=Y0,this.updater=r||W0}ns.prototype.isReactComponent={};ns.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ns.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function X0(){}X0.prototype=ns.prototype;function Ac(e,t,r){this.props=e,this.context=t,this.refs=Y0,this.updater=r||W0}var Sc=Ac.prototype=new X0;Sc.constructor=Ac;G0(Sc,ns.prototype);Sc.isPureReactComponent=!0;var $f=Array.isArray,Q0=Object.prototype.hasOwnProperty,Ic={current:null},Z0={key:!0,ref:!0,__self:!0,__source:!0};function K0(e,t,r){var o,u={},f=null,g=null;if(t!=null)for(o in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(f=""+t.key),t)Q0.call(t,o)&&!Z0.hasOwnProperty(o)&&(u[o]=t[o]);var x=arguments.length-2;if(x===1)u.children=r;else if(1<x){for(var w=Array(x),m=0;m<x;m++)w[m]=arguments[m+2];u.children=w}if(e&&e.defaultProps)for(o in x=e.defaultProps,x)u[o]===void 0&&(u[o]=x[o]);return{$$typeof:uo,type:e,key:f,ref:g,props:u,_owner:Ic.current}}function Pp(e,t){return{$$typeof:uo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vc(e){return typeof e=="object"&&e!==null&&e.$$typeof===uo}function Fp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var e1=/\/+/g;function Dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fp(""+e.key):t.toString(36)}function Jo(e,t,r,o,u){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case uo:case Tp:g=!0}}if(g)return g=e,u=u(g),e=o===""?"."+Dl(g,0):o,$f(u)?(r="",e!=null&&(r=e.replace(e1,"$&/")+"/"),Jo(u,t,r,"",function(m){return m})):u!=null&&(vc(u)&&(u=Pp(u,r+(!u.key||g&&g.key===u.key?"":(""+u.key).replace(e1,"$&/")+"/")+e)),t.push(u)),1;if(g=0,o=o===""?".":o+":",$f(e))for(var x=0;x<e.length;x++){f=e[x];var w=o+Dl(f,x);g+=Jo(f,t,r,w,u)}else if(w=Bp(e),typeof w=="function")for(e=w.call(e),x=0;!(f=e.next()).done;)f=f.value,w=o+Dl(f,x++),g+=Jo(f,t,r,w,u);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function Mo(e,t,r){if(e==null)return e;var o=[],u=0;return Jo(e,o,"","",function(f){return t.call(r,f,u++)}),o}function Up(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vt={current:null},$o={transition:null},jp={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:$o,ReactCurrentOwner:Ic};function q0(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Mo,forEach:function(e,t,r){Mo(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Mo(e,function(){t++}),t},toArray:function(e){return Mo(e,function(t){return t})||[]},only:function(e){if(!vc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=ns;Se.Fragment=Np;Se.Profiler=Rp;Se.PureComponent=Ac;Se.StrictMode=_p;Se.Suspense=Dp;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jp;Se.act=q0;Se.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=G0({},e.props),u=e.key,f=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,g=Ic.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var x=e.type.defaultProps;for(w in t)Q0.call(t,w)&&!Z0.hasOwnProperty(w)&&(o[w]=t[w]===void 0&&x!==void 0?x[w]:t[w])}var w=arguments.length-2;if(w===1)o.children=r;else if(1<w){x=Array(w);for(var m=0;m<w;m++)x[m]=arguments[m+2];o.children=x}return{$$typeof:uo,type:e.type,key:u,ref:f,props:o,_owner:g}};Se.createContext=function(e){return e={$$typeof:Mp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Op,_context:e},e.Consumer=e};Se.createElement=K0;Se.createFactory=function(e){var t=K0.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:bp,render:e}};Se.isValidElement=vc;Se.lazy=function(e){return{$$typeof:kp,_payload:{_status:-1,_result:e},_init:Up}};Se.memo=function(e,t){return{$$typeof:Lp,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=$o.transition;$o.transition={};try{e()}finally{$o.transition=t}};Se.unstable_act=q0;Se.useCallback=function(e,t){return Vt.current.useCallback(e,t)};Se.useContext=function(e){return Vt.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return Vt.current.useDeferredValue(e)};Se.useEffect=function(e,t){return Vt.current.useEffect(e,t)};Se.useId=function(){return Vt.current.useId()};Se.useImperativeHandle=function(e,t,r){return Vt.current.useImperativeHandle(e,t,r)};Se.useInsertionEffect=function(e,t){return Vt.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return Vt.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return Vt.current.useMemo(e,t)};Se.useReducer=function(e,t,r){return Vt.current.useReducer(e,t,r)};Se.useRef=function(e){return Vt.current.useRef(e)};Se.useState=function(e){return Vt.current.useState(e)};Se.useSyncExternalStore=function(e,t,r){return Vt.current.useSyncExternalStore(e,t,r)};Se.useTransition=function(){return Vt.current.useTransition()};Se.version="18.3.1";H0.exports=Se;var K=H0.exports;const Ha=z0(K),zp=j0({__proto__:null,default:Ha},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp=K,Hp=Symbol.for("react.element"),Wp=Symbol.for("react.fragment"),Gp=Object.prototype.hasOwnProperty,Yp=Vp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xp={key:!0,ref:!0,__self:!0,__source:!0};function J0(e,t,r){var o,u={},f=null,g=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(g=t.ref);for(o in t)Gp.call(t,o)&&!Xp.hasOwnProperty(o)&&(u[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)u[o]===void 0&&(u[o]=t[o]);return{$$typeof:Hp,type:e,key:f,ref:g,props:u,_owner:Yp.current}}Va.Fragment=Wp;Va.jsx=J0;Va.jsxs=J0;V0.exports=Va;var j=V0.exports,gu={},$0={exports:{}},cn={},eh={exports:{}},th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,ge){var pe=re.length;re.push(ge);e:for(;0<pe;){var te=pe-1>>>1,fe=re[te];if(0<u(fe,ge))re[te]=ge,re[pe]=fe,pe=te;else break e}}function r(re){return re.length===0?null:re[0]}function o(re){if(re.length===0)return null;var ge=re[0],pe=re.pop();if(pe!==ge){re[0]=pe;e:for(var te=0,fe=re.length,Be=fe>>>1;te<Be;){var Me=2*(te+1)-1,In=re[Me],ae=Me+1,Pn=re[ae];if(0>u(In,pe))ae<fe&&0>u(Pn,In)?(re[te]=Pn,re[ae]=pe,te=ae):(re[te]=In,re[Me]=pe,te=Me);else if(ae<fe&&0>u(Pn,pe))re[te]=Pn,re[ae]=pe,te=ae;else break e}}return ge}function u(re,ge){var pe=re.sortIndex-ge.sortIndex;return pe!==0?pe:re.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,x=g.now();e.unstable_now=function(){return g.now()-x}}var w=[],m=[],A=1,I=null,O=3,L=!1,F=!1,B=!1,Y=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(re){for(var ge=r(m);ge!==null;){if(ge.callback===null)o(m);else if(ge.startTime<=re)o(m),ge.sortIndex=ge.expirationTime,t(w,ge);else break;ge=r(m)}}function k(re){if(B=!1,_(re),!F)if(r(w)!==null)F=!0,Ke(Q);else{var ge=r(m);ge!==null&&ye(k,ge.startTime-re)}}function Q(re,ge){F=!1,B&&(B=!1,R(W),W=-1),L=!0;var pe=O;try{for(_(ge),I=r(w);I!==null&&(!(I.expirationTime>ge)||re&&!Ne());){var te=I.callback;if(typeof te=="function"){I.callback=null,O=I.priorityLevel;var fe=te(I.expirationTime<=ge);ge=e.unstable_now(),typeof fe=="function"?I.callback=fe:I===r(w)&&o(w),_(ge)}else o(w);I=r(w)}if(I!==null)var Be=!0;else{var Me=r(m);Me!==null&&ye(k,Me.startTime-ge),Be=!1}return Be}finally{I=null,O=pe,L=!1}}var X=!1,b=null,W=-1,H=5,ue=-1;function Ne(){return!(e.unstable_now()-ue<H)}function ce(){if(b!==null){var re=e.unstable_now();ue=re;var ge=!0;try{ge=b(!0,re)}finally{ge?we():(X=!1,b=null)}}else X=!1}var we;if(typeof T=="function")we=function(){T(ce)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,G=$e.port2;$e.port1.onmessage=ce,we=function(){G.postMessage(null)}}else we=function(){Y(ce,0)};function Ke(re){b=re,X||(X=!0,we())}function ye(re,ge){W=Y(function(){re(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){F||L||(F=!0,Ke(Q))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return r(w)},e.unstable_next=function(re){switch(O){case 1:case 2:case 3:var ge=3;break;default:ge=O}var pe=O;O=ge;try{return re()}finally{O=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,ge){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var pe=O;O=re;try{return ge()}finally{O=pe}},e.unstable_scheduleCallback=function(re,ge,pe){var te=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?te+pe:te):pe=te,re){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=pe+fe,re={id:A++,callback:ge,priorityLevel:re,startTime:pe,expirationTime:fe,sortIndex:-1},pe>te?(re.sortIndex=pe,t(m,re),r(w)===null&&re===r(m)&&(B?(R(W),W=-1):B=!0,ye(k,pe-te))):(re.sortIndex=fe,t(w,re),F||L||(F=!0,Ke(Q))),re},e.unstable_shouldYield=Ne,e.unstable_wrapCallback=function(re){var ge=O;return function(){var pe=O;O=ge;try{return re.apply(this,arguments)}finally{O=pe}}}})(th);eh.exports=th;var Qp=eh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=K,un=Qp;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nh=new Set,Hs={};function hi(e,t){Gi(e,t),Gi(e+"Capture",t)}function Gi(e,t){for(Hs[e]=t,e=0;e<t.length;e++)nh.add(t[e])}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pu=Object.prototype.hasOwnProperty,Kp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t1={},n1={};function qp(e){return pu.call(n1,e)?!0:pu.call(t1,e)?!1:Kp.test(e)?n1[e]=!0:(t1[e]=!0,!1)}function Jp(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $p(e,t,r,o){if(t===null||typeof t>"u"||Jp(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ht(e,t,r,o,u,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mt[e]=new Ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mt[t]=new Ht(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mt[e]=new Ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mt[e]=new Ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mt[e]=new Ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mt[e]=new Ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mt[e]=new Ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mt[e]=new Ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mt[e]=new Ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var Tc=/[\-:]([a-z])/g;function Nc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tc,Nc);Mt[t]=new Ht(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tc,Nc);Mt[t]=new Ht(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tc,Nc);Mt[t]=new Ht(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mt[e]=new Ht(e,1,!1,e.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mt[e]=new Ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function _c(e,t,r,o){var u=Mt.hasOwnProperty(t)?Mt[t]:null;(u!==null?u.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($p(t,r,u,o)&&(r=null),o||u===null?qp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,o=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var fr=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bo=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),Rc=Symbol.for("react.strict_mode"),mu=Symbol.for("react.profiler"),rh=Symbol.for("react.provider"),ih=Symbol.for("react.context"),Oc=Symbol.for("react.forward_ref"),xu=Symbol.for("react.suspense"),wu=Symbol.for("react.suspense_list"),Mc=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),sh=Symbol.for("react.offscreen"),r1=Symbol.iterator;function ys(e){return e===null||typeof e!="object"?null:(e=r1&&e[r1]||e["@@iterator"],typeof e=="function"?e:null)}var rt=Object.assign,Ll;function _s(e){if(Ll===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ll=t&&t[1]||""}return`
`+Ll+e}var kl=!1;function Bl(e,t){if(!e||kl)return"";kl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var o=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){o=m}e.call(t.prototype)}else{try{throw Error()}catch(m){o=m}e()}}catch(m){if(m&&o&&typeof m.stack=="string"){for(var u=m.stack.split(`
`),f=o.stack.split(`
`),g=u.length-1,x=f.length-1;1<=g&&0<=x&&u[g]!==f[x];)x--;for(;1<=g&&0<=x;g--,x--)if(u[g]!==f[x]){if(g!==1||x!==1)do if(g--,x--,0>x||u[g]!==f[x]){var w=`
`+u[g].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=g&&0<=x);break}}}finally{kl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_s(e):""}function e2(e){switch(e.tag){case 5:return _s(e.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return e=Bl(e.type,!1),e;case 11:return e=Bl(e.type.render,!1),e;case 1:return e=Bl(e.type,!0),e;default:return""}}function yu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ni:return"Fragment";case Ti:return"Portal";case mu:return"Profiler";case Rc:return"StrictMode";case xu:return"Suspense";case wu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ih:return(e.displayName||"Context")+".Consumer";case rh:return(e._context.displayName||"Context")+".Provider";case Oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mc:return t=e.displayName||null,t!==null?t:yu(e.type)||"Memo";case Cr:t=e._payload,e=e._init;try{return yu(e(t))}catch{}}return null}function t2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yu(t);case 8:return t===Rc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function n2(e){var t=oh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){o=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Do(e){e._valueTracker||(e._valueTracker=n2(e))}function ah(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=oh(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function ga(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Eu(e,t){var r=t.checked;return rt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function i1(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=Fr(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lh(e,t){t=t.checked,t!=null&&_c(e,"checked",t,!1)}function Cu(e,t){lh(e,t);var r=Fr(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Au(e,t.type,r):t.hasOwnProperty("defaultValue")&&Au(e,t.type,Fr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function s1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Au(e,t,r){(t!=="number"||ga(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Rs=Array.isArray;function Ui(e,t,r,o){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Fr(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Su(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return rt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function o1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(J(92));if(Rs(r)){if(1<r.length)throw Error(J(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fr(r)}}function uh(e,t){var r=Fr(t.value),o=Fr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function a1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ch(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Iu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ch(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Lo,fh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Lo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ws(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r2=["Webkit","ms","Moz","O"];Object.keys(Ds).forEach(function(e){r2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ds[t]=Ds[e]})});function hh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ds.hasOwnProperty(e)&&Ds[e]?(""+t).trim():t+"px"}function dh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,u=hh(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,u):e[r]=u}}var i2=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vu(e,t){if(t){if(i2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Tu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nu=null;function bc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _u=null,ji=null,zi=null;function l1(e){if(e=ho(e)){if(typeof _u!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Qa(t),_u(e.stateNode,e.type,t))}}function gh(e){ji?zi?zi.push(e):zi=[e]:ji=e}function ph(){if(ji){var e=ji,t=zi;if(zi=ji=null,l1(e),t)for(e=0;e<t.length;e++)l1(t[e])}}function mh(e,t){return e(t)}function xh(){}var Pl=!1;function wh(e,t,r){if(Pl)return e(t,r);Pl=!0;try{return mh(e,t,r)}finally{Pl=!1,(ji!==null||zi!==null)&&(xh(),ph())}}function Gs(e,t){var r=e.stateNode;if(r===null)return null;var o=Qa(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(J(231,t,typeof r));return r}var Ru=!1;if(ar)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){Ru=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{Ru=!1}function s2(e,t,r,o,u,f,g,x,w){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(A){this.onError(A)}}var Ls=!1,pa=null,ma=!1,Ou=null,o2={onError:function(e){Ls=!0,pa=e}};function a2(e,t,r,o,u,f,g,x,w){Ls=!1,pa=null,s2.apply(o2,arguments)}function l2(e,t,r,o,u,f,g,x,w){if(a2.apply(this,arguments),Ls){if(Ls){var m=pa;Ls=!1,pa=null}else throw Error(J(198));ma||(ma=!0,Ou=m)}}function di(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function yh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function u1(e){if(di(e)!==e)throw Error(J(188))}function u2(e){var t=e.alternate;if(!t){if(t=di(e),t===null)throw Error(J(188));return t!==e?null:e}for(var r=e,o=t;;){var u=r.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===r)return u1(u),e;if(f===o)return u1(u),t;f=f.sibling}throw Error(J(188))}if(r.return!==o.return)r=u,o=f;else{for(var g=!1,x=u.child;x;){if(x===r){g=!0,r=u,o=f;break}if(x===o){g=!0,o=u,r=f;break}x=x.sibling}if(!g){for(x=f.child;x;){if(x===r){g=!0,r=f,o=u;break}if(x===o){g=!0,o=f,r=u;break}x=x.sibling}if(!g)throw Error(J(189))}}if(r.alternate!==o)throw Error(J(190))}if(r.tag!==3)throw Error(J(188));return r.stateNode.current===r?e:t}function Eh(e){return e=u2(e),e!==null?Ch(e):null}function Ch(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ch(e);if(t!==null)return t;e=e.sibling}return null}var Ah=un.unstable_scheduleCallback,c1=un.unstable_cancelCallback,c2=un.unstable_shouldYield,f2=un.unstable_requestPaint,ct=un.unstable_now,h2=un.unstable_getCurrentPriorityLevel,Dc=un.unstable_ImmediatePriority,Sh=un.unstable_UserBlockingPriority,xa=un.unstable_NormalPriority,d2=un.unstable_LowPriority,Ih=un.unstable_IdlePriority,Wa=null,Zn=null;function g2(e){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Wa,e,void 0,(e.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:x2,p2=Math.log,m2=Math.LN2;function x2(e){return e>>>=0,e===0?32:31-(p2(e)/m2|0)|0}var ko=64,Bo=4194304;function Os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wa(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,u=e.suspendedLanes,f=e.pingedLanes,g=r&268435455;if(g!==0){var x=g&~u;x!==0?o=Os(x):(f&=g,f!==0&&(o=Os(f)))}else g=r&~u,g!==0?o=Os(g):f!==0&&(o=Os(f));if(o===0)return 0;if(t!==0&&t!==o&&!(t&u)&&(u=o&-o,f=t&-t,u>=f||u===16&&(f&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Ln(t),u=1<<r,o|=e[r],t&=~u;return o}function w2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y2(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Ln(f),x=1<<g,w=u[g];w===-1?(!(x&r)||x&o)&&(u[g]=w2(x,t)):w<=t&&(e.expiredLanes|=x),f&=~x}}function Mu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vh(){var e=ko;return ko<<=1,!(ko&4194240)&&(ko=64),e}function Fl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function co(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ln(t),e[t]=r}function E2(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var u=31-Ln(r),f=1<<u;t[u]=0,o[u]=-1,e[u]=-1,r&=~f}}function Lc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Ln(r),u=1<<o;u&t|e[o]&t&&(e[o]|=t),r&=~u}}var Fe=0;function Th(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nh,kc,_h,Rh,Oh,bu=!1,Po=[],Rr=null,Or=null,Mr=null,Ys=new Map,Xs=new Map,Sr=[],C2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function f1(e,t){switch(e){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(t.pointerId)}}function Cs(e,t,r,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},t!==null&&(t=ho(t),t!==null&&kc(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function A2(e,t,r,o,u){switch(t){case"focusin":return Rr=Cs(Rr,e,t,r,o,u),!0;case"dragenter":return Or=Cs(Or,e,t,r,o,u),!0;case"mouseover":return Mr=Cs(Mr,e,t,r,o,u),!0;case"pointerover":var f=u.pointerId;return Ys.set(f,Cs(Ys.get(f)||null,e,t,r,o,u)),!0;case"gotpointercapture":return f=u.pointerId,Xs.set(f,Cs(Xs.get(f)||null,e,t,r,o,u)),!0}return!1}function Mh(e){var t=ei(e.target);if(t!==null){var r=di(t);if(r!==null){if(t=r.tag,t===13){if(t=yh(r),t!==null){e.blockedOn=t,Oh(e.priority,function(){_h(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ea(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Du(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);Nu=o,r.target.dispatchEvent(o),Nu=null}else return t=ho(r),t!==null&&kc(t),e.blockedOn=r,!1;t.shift()}return!0}function h1(e,t,r){ea(e)&&r.delete(t)}function S2(){bu=!1,Rr!==null&&ea(Rr)&&(Rr=null),Or!==null&&ea(Or)&&(Or=null),Mr!==null&&ea(Mr)&&(Mr=null),Ys.forEach(h1),Xs.forEach(h1)}function As(e,t){e.blockedOn===t&&(e.blockedOn=null,bu||(bu=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,S2)))}function Qs(e){function t(u){return As(u,e)}if(0<Po.length){As(Po[0],e);for(var r=1;r<Po.length;r++){var o=Po[r];o.blockedOn===e&&(o.blockedOn=null)}}for(Rr!==null&&As(Rr,e),Or!==null&&As(Or,e),Mr!==null&&As(Mr,e),Ys.forEach(t),Xs.forEach(t),r=0;r<Sr.length;r++)o=Sr[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<Sr.length&&(r=Sr[0],r.blockedOn===null);)Mh(r),r.blockedOn===null&&Sr.shift()}var Vi=fr.ReactCurrentBatchConfig,ya=!0;function I2(e,t,r,o){var u=Fe,f=Vi.transition;Vi.transition=null;try{Fe=1,Bc(e,t,r,o)}finally{Fe=u,Vi.transition=f}}function v2(e,t,r,o){var u=Fe,f=Vi.transition;Vi.transition=null;try{Fe=4,Bc(e,t,r,o)}finally{Fe=u,Vi.transition=f}}function Bc(e,t,r,o){if(ya){var u=Du(e,t,r,o);if(u===null)Ql(e,t,o,Ea,r),f1(e,o);else if(A2(u,e,t,r,o))o.stopPropagation();else if(f1(e,o),t&4&&-1<C2.indexOf(e)){for(;u!==null;){var f=ho(u);if(f!==null&&Nh(f),f=Du(e,t,r,o),f===null&&Ql(e,t,o,Ea,r),f===u)break;u=f}u!==null&&o.stopPropagation()}else Ql(e,t,o,null,r)}}var Ea=null;function Du(e,t,r,o){if(Ea=null,e=bc(o),e=ei(e),e!==null)if(t=di(e),t===null)e=null;else if(r=t.tag,r===13){if(e=yh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ea=e,null}function bh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h2()){case Dc:return 1;case Sh:return 4;case xa:case d2:return 16;case Ih:return 536870912;default:return 16}default:return 16}}var vr=null,Pc=null,ta=null;function Dh(){if(ta)return ta;var e,t=Pc,r=t.length,o,u="value"in vr?vr.value:vr.textContent,f=u.length;for(e=0;e<r&&t[e]===u[e];e++);var g=r-e;for(o=1;o<=g&&t[r-o]===u[f-o];o++);return ta=u.slice(e,1<o?1-o:void 0)}function na(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fo(){return!0}function d1(){return!1}function fn(e){function t(r,o,u,f,g){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Fo:d1,this.isPropagationStopped=d1,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),t}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fc=fn(rs),fo=rt({},rs,{view:0,detail:0}),T2=fn(fo),Ul,jl,Ss,Ga=rt({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(Ul=e.screenX-Ss.screenX,jl=e.screenY-Ss.screenY):jl=Ul=0,Ss=e),Ul)},movementY:function(e){return"movementY"in e?e.movementY:jl}}),g1=fn(Ga),N2=rt({},Ga,{dataTransfer:0}),_2=fn(N2),R2=rt({},fo,{relatedTarget:0}),zl=fn(R2),O2=rt({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),M2=fn(O2),b2=rt({},rs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),D2=fn(b2),L2=rt({},rs,{data:0}),p1=fn(L2),k2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=P2[e])?!!t[e]:!1}function Uc(){return F2}var U2=rt({},fo,{key:function(e){if(e.key){var t=k2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=na(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?B2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uc,charCode:function(e){return e.type==="keypress"?na(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?na(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),j2=fn(U2),z2=rt({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m1=fn(z2),V2=rt({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uc}),H2=fn(V2),W2=rt({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),G2=fn(W2),Y2=rt({},Ga,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X2=fn(Y2),Q2=[9,13,27,32],jc=ar&&"CompositionEvent"in window,ks=null;ar&&"documentMode"in document&&(ks=document.documentMode);var Z2=ar&&"TextEvent"in window&&!ks,Lh=ar&&(!jc||ks&&8<ks&&11>=ks),x1=" ",w1=!1;function kh(e,t){switch(e){case"keyup":return Q2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _i=!1;function K2(e,t){switch(e){case"compositionend":return Bh(t);case"keypress":return t.which!==32?null:(w1=!0,x1);case"textInput":return e=t.data,e===x1&&w1?null:e;default:return null}}function q2(e,t){if(_i)return e==="compositionend"||!jc&&kh(e,t)?(e=Dh(),ta=Pc=vr=null,_i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lh&&t.locale!=="ko"?null:t.data;default:return null}}var J2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J2[e.type]:t==="textarea"}function Ph(e,t,r,o){gh(o),t=Ca(t,"onChange"),0<t.length&&(r=new Fc("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Bs=null,Zs=null;function $2(e){Qh(e,0)}function Ya(e){var t=Mi(e);if(ah(t))return e}function em(e,t){if(e==="change")return t}var Fh=!1;if(ar){var Vl;if(ar){var Hl="oninput"in document;if(!Hl){var E1=document.createElement("div");E1.setAttribute("oninput","return;"),Hl=typeof E1.oninput=="function"}Vl=Hl}else Vl=!1;Fh=Vl&&(!document.documentMode||9<document.documentMode)}function C1(){Bs&&(Bs.detachEvent("onpropertychange",Uh),Zs=Bs=null)}function Uh(e){if(e.propertyName==="value"&&Ya(Zs)){var t=[];Ph(t,Zs,e,bc(e)),wh($2,t)}}function tm(e,t,r){e==="focusin"?(C1(),Bs=t,Zs=r,Bs.attachEvent("onpropertychange",Uh)):e==="focusout"&&C1()}function nm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ya(Zs)}function rm(e,t){if(e==="click")return Ya(t)}function im(e,t){if(e==="input"||e==="change")return Ya(t)}function sm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bn=typeof Object.is=="function"?Object.is:sm;function Ks(e,t){if(Bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!pu.call(t,u)||!Bn(e[u],t[u]))return!1}return!0}function A1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function S1(e,t){var r=A1(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=A1(r)}}function jh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zh(){for(var e=window,t=ga();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ga(e.document)}return t}function zc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function om(e){var t=zh(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&jh(r.ownerDocument.documentElement,r)){if(o!==null&&zc(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=r.textContent.length,f=Math.min(o.start,u);o=o.end===void 0?f:Math.min(o.end,u),!e.extend&&f>o&&(u=o,o=f,f=u),u=S1(r,f);var g=S1(r,o);u&&g&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),f>o?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var am=ar&&"documentMode"in document&&11>=document.documentMode,Ri=null,Lu=null,Ps=null,ku=!1;function I1(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ku||Ri==null||Ri!==ga(o)||(o=Ri,"selectionStart"in o&&zc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ps&&Ks(Ps,o)||(Ps=o,o=Ca(Lu,"onSelect"),0<o.length&&(t=new Fc("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Ri)))}function Uo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Oi={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionend:Uo("Transition","TransitionEnd")},Wl={},Vh={};ar&&(Vh=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function Xa(e){if(Wl[e])return Wl[e];if(!Oi[e])return e;var t=Oi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Vh)return Wl[e]=t[r];return e}var Hh=Xa("animationend"),Wh=Xa("animationiteration"),Gh=Xa("animationstart"),Yh=Xa("transitionend"),Xh=new Map,v1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(e,t){Xh.set(e,t),hi(t,[e])}for(var Gl=0;Gl<v1.length;Gl++){var Yl=v1[Gl],lm=Yl.toLowerCase(),um=Yl[0].toUpperCase()+Yl.slice(1);zr(lm,"on"+um)}zr(Hh,"onAnimationEnd");zr(Wh,"onAnimationIteration");zr(Gh,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(Yh,"onTransitionEnd");Gi("onMouseEnter",["mouseout","mouseover"]);Gi("onMouseLeave",["mouseout","mouseover"]);Gi("onPointerEnter",["pointerout","pointerover"]);Gi("onPointerLeave",["pointerout","pointerover"]);hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ms));function T1(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,l2(o,t,void 0,e),e.currentTarget=null}function Qh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],u=o.event;o=o.listeners;e:{var f=void 0;if(t)for(var g=o.length-1;0<=g;g--){var x=o[g],w=x.instance,m=x.currentTarget;if(x=x.listener,w!==f&&u.isPropagationStopped())break e;T1(u,x,m),f=w}else for(g=0;g<o.length;g++){if(x=o[g],w=x.instance,m=x.currentTarget,x=x.listener,w!==f&&u.isPropagationStopped())break e;T1(u,x,m),f=w}}}if(ma)throw e=Ou,ma=!1,Ou=null,e}function Xe(e,t){var r=t[ju];r===void 0&&(r=t[ju]=new Set);var o=e+"__bubble";r.has(o)||(Zh(t,e,2,!1),r.add(o))}function Xl(e,t,r){var o=0;t&&(o|=4),Zh(r,e,o,t)}var jo="_reactListening"+Math.random().toString(36).slice(2);function qs(e){if(!e[jo]){e[jo]=!0,nh.forEach(function(r){r!=="selectionchange"&&(cm.has(r)||Xl(r,!1,e),Xl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jo]||(t[jo]=!0,Xl("selectionchange",!1,t))}}function Zh(e,t,r,o){switch(bh(t)){case 1:var u=I2;break;case 4:u=v2;break;default:u=Bc}r=u.bind(null,t,r,e),u=void 0,!Ru||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function Ql(e,t,r,o,u){var f=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var x=o.stateNode.containerInfo;if(x===u||x.nodeType===8&&x.parentNode===u)break;if(g===4)for(g=o.return;g!==null;){var w=g.tag;if((w===3||w===4)&&(w=g.stateNode.containerInfo,w===u||w.nodeType===8&&w.parentNode===u))return;g=g.return}for(;x!==null;){if(g=ei(x),g===null)return;if(w=g.tag,w===5||w===6){o=f=g;continue e}x=x.parentNode}}o=o.return}wh(function(){var m=f,A=bc(r),I=[];e:{var O=Xh.get(e);if(O!==void 0){var L=Fc,F=e;switch(e){case"keypress":if(na(r)===0)break e;case"keydown":case"keyup":L=j2;break;case"focusin":F="focus",L=zl;break;case"focusout":F="blur",L=zl;break;case"beforeblur":case"afterblur":L=zl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=g1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=_2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=H2;break;case Hh:case Wh:case Gh:L=M2;break;case Yh:L=G2;break;case"scroll":L=T2;break;case"wheel":L=X2;break;case"copy":case"cut":case"paste":L=D2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=m1}var B=(t&4)!==0,Y=!B&&e==="scroll",R=B?O!==null?O+"Capture":null:O;B=[];for(var T=m,_;T!==null;){_=T;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,R!==null&&(k=Gs(T,R),k!=null&&B.push(Js(T,k,_)))),Y)break;T=T.return}0<B.length&&(O=new L(O,F,null,r,A),I.push({event:O,listeners:B}))}}if(!(t&7)){e:{if(O=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",O&&r!==Nu&&(F=r.relatedTarget||r.fromElement)&&(ei(F)||F[lr]))break e;if((L||O)&&(O=A.window===A?A:(O=A.ownerDocument)?O.defaultView||O.parentWindow:window,L?(F=r.relatedTarget||r.toElement,L=m,F=F?ei(F):null,F!==null&&(Y=di(F),F!==Y||F.tag!==5&&F.tag!==6)&&(F=null)):(L=null,F=m),L!==F)){if(B=g1,k="onMouseLeave",R="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(B=m1,k="onPointerLeave",R="onPointerEnter",T="pointer"),Y=L==null?O:Mi(L),_=F==null?O:Mi(F),O=new B(k,T+"leave",L,r,A),O.target=Y,O.relatedTarget=_,k=null,ei(A)===m&&(B=new B(R,T+"enter",F,r,A),B.target=_,B.relatedTarget=Y,k=B),Y=k,L&&F)t:{for(B=L,R=F,T=0,_=B;_;_=vi(_))T++;for(_=0,k=R;k;k=vi(k))_++;for(;0<T-_;)B=vi(B),T--;for(;0<_-T;)R=vi(R),_--;for(;T--;){if(B===R||R!==null&&B===R.alternate)break t;B=vi(B),R=vi(R)}B=null}else B=null;L!==null&&N1(I,O,L,B,!1),F!==null&&Y!==null&&N1(I,Y,F,B,!0)}}e:{if(O=m?Mi(m):window,L=O.nodeName&&O.nodeName.toLowerCase(),L==="select"||L==="input"&&O.type==="file")var Q=em;else if(y1(O))if(Fh)Q=im;else{Q=nm;var X=tm}else(L=O.nodeName)&&L.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(Q=rm);if(Q&&(Q=Q(e,m))){Ph(I,Q,r,A);break e}X&&X(e,O,m),e==="focusout"&&(X=O._wrapperState)&&X.controlled&&O.type==="number"&&Au(O,"number",O.value)}switch(X=m?Mi(m):window,e){case"focusin":(y1(X)||X.contentEditable==="true")&&(Ri=X,Lu=m,Ps=null);break;case"focusout":Ps=Lu=Ri=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,I1(I,r,A);break;case"selectionchange":if(am)break;case"keydown":case"keyup":I1(I,r,A)}var b;if(jc)e:{switch(e){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else _i?kh(e,r)&&(W="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(W="onCompositionStart");W&&(Lh&&r.locale!=="ko"&&(_i||W!=="onCompositionStart"?W==="onCompositionEnd"&&_i&&(b=Dh()):(vr=A,Pc="value"in vr?vr.value:vr.textContent,_i=!0)),X=Ca(m,W),0<X.length&&(W=new p1(W,e,null,r,A),I.push({event:W,listeners:X}),b?W.data=b:(b=Bh(r),b!==null&&(W.data=b)))),(b=Z2?K2(e,r):q2(e,r))&&(m=Ca(m,"onBeforeInput"),0<m.length&&(A=new p1("onBeforeInput","beforeinput",null,r,A),I.push({event:A,listeners:m}),A.data=b))}Qh(I,t)})}function Js(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ca(e,t){for(var r=t+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=Gs(e,r),f!=null&&o.unshift(Js(e,f,u)),f=Gs(e,t),f!=null&&o.push(Js(e,f,u))),e=e.return}return o}function vi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function N1(e,t,r,o,u){for(var f=t._reactName,g=[];r!==null&&r!==o;){var x=r,w=x.alternate,m=x.stateNode;if(w!==null&&w===o)break;x.tag===5&&m!==null&&(x=m,u?(w=Gs(r,f),w!=null&&g.unshift(Js(r,w,x))):u||(w=Gs(r,f),w!=null&&g.push(Js(r,w,x)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var fm=/\r\n?/g,hm=/\u0000|\uFFFD/g;function _1(e){return(typeof e=="string"?e:""+e).replace(fm,`
`).replace(hm,"")}function zo(e,t,r){if(t=_1(t),_1(e)!==t&&r)throw Error(J(425))}function Aa(){}var Bu=null,Pu=null;function Fu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uu=typeof setTimeout=="function"?setTimeout:void 0,dm=typeof clearTimeout=="function"?clearTimeout:void 0,R1=typeof Promise=="function"?Promise:void 0,gm=typeof queueMicrotask=="function"?queueMicrotask:typeof R1<"u"?function(e){return R1.resolve(null).then(e).catch(pm)}:Uu;function pm(e){setTimeout(function(){throw e})}function Zl(e,t){var r=t,o=0;do{var u=r.nextSibling;if(e.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(o===0){e.removeChild(u),Qs(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=u}while(r);Qs(t)}function br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function O1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var is=Math.random().toString(36).slice(2),Qn="__reactFiber$"+is,$s="__reactProps$"+is,lr="__reactContainer$"+is,ju="__reactEvents$"+is,mm="__reactListeners$"+is,xm="__reactHandles$"+is;function ei(e){var t=e[Qn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[lr]||r[Qn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=O1(e);e!==null;){if(r=e[Qn])return r;e=O1(e)}return t}e=r,r=e.parentNode}return null}function ho(e){return e=e[Qn]||e[lr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Qa(e){return e[$s]||null}var zu=[],bi=-1;function Vr(e){return{current:e}}function Ze(e){0>bi||(e.current=zu[bi],zu[bi]=null,bi--)}function Ge(e,t){bi++,zu[bi]=e.current,e.current=t}var Ur={},Pt=Vr(Ur),Jt=Vr(!1),ai=Ur;function Yi(e,t){var r=e.type.contextTypes;if(!r)return Ur;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in r)u[f]=t[f];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function $t(e){return e=e.childContextTypes,e!=null}function Sa(){Ze(Jt),Ze(Pt)}function M1(e,t,r){if(Pt.current!==Ur)throw Error(J(168));Ge(Pt,t),Ge(Jt,r)}function Kh(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var u in o)if(!(u in t))throw Error(J(108,t2(e)||"Unknown",u));return rt({},r,o)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ur,ai=Pt.current,Ge(Pt,e),Ge(Jt,Jt.current),!0}function b1(e,t,r){var o=e.stateNode;if(!o)throw Error(J(169));r?(e=Kh(e,t,ai),o.__reactInternalMemoizedMergedChildContext=e,Ze(Jt),Ze(Pt),Ge(Pt,e)):Ze(Jt),Ge(Jt,r)}var nr=null,Za=!1,Kl=!1;function qh(e){nr===null?nr=[e]:nr.push(e)}function wm(e){Za=!0,qh(e)}function Hr(){if(!Kl&&nr!==null){Kl=!0;var e=0,t=Fe;try{var r=nr;for(Fe=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}nr=null,Za=!1}catch(u){throw nr!==null&&(nr=nr.slice(e+1)),Ah(Dc,Hr),u}finally{Fe=t,Kl=!1}}return null}var Di=[],Li=0,va=null,Ta=0,xn=[],wn=0,li=null,rr=1,ir="";function Jr(e,t){Di[Li++]=Ta,Di[Li++]=va,va=e,Ta=t}function Jh(e,t,r){xn[wn++]=rr,xn[wn++]=ir,xn[wn++]=li,li=e;var o=rr;e=ir;var u=32-Ln(o)-1;o&=~(1<<u),r+=1;var f=32-Ln(t)+u;if(30<f){var g=u-u%5;f=(o&(1<<g)-1).toString(32),o>>=g,u-=g,rr=1<<32-Ln(t)+u|r<<u|o,ir=f+e}else rr=1<<f|r<<u|o,ir=e}function Vc(e){e.return!==null&&(Jr(e,1),Jh(e,1,0))}function Hc(e){for(;e===va;)va=Di[--Li],Di[Li]=null,Ta=Di[--Li],Di[Li]=null;for(;e===li;)li=xn[--wn],xn[wn]=null,ir=xn[--wn],xn[wn]=null,rr=xn[--wn],xn[wn]=null}var ln=null,an=null,Je=!1,Dn=null;function $h(e,t){var r=En(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function D1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ln=e,an=br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ln=e,an=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=li!==null?{id:rr,overflow:ir}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=En(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ln=e,an=null,!0):!1;default:return!1}}function Vu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hu(e){if(Je){var t=an;if(t){var r=t;if(!D1(e,t)){if(Vu(e))throw Error(J(418));t=br(r.nextSibling);var o=ln;t&&D1(e,t)?$h(o,r):(e.flags=e.flags&-4097|2,Je=!1,ln=e)}}else{if(Vu(e))throw Error(J(418));e.flags=e.flags&-4097|2,Je=!1,ln=e}}}function L1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ln=e}function Vo(e){if(e!==ln)return!1;if(!Je)return L1(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fu(e.type,e.memoizedProps)),t&&(t=an)){if(Vu(e))throw ed(),Error(J(418));for(;t;)$h(e,t),t=br(t.nextSibling)}if(L1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){an=br(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}an=null}}else an=ln?br(e.stateNode.nextSibling):null;return!0}function ed(){for(var e=an;e;)e=br(e.nextSibling)}function Xi(){an=ln=null,Je=!1}function Wc(e){Dn===null?Dn=[e]:Dn.push(e)}var ym=fr.ReactCurrentBatchConfig;function Is(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(J(309));var o=r.stateNode}if(!o)throw Error(J(147,e));var u=o,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var x=u.refs;g===null?delete x[f]:x[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(J(284));if(!r._owner)throw Error(J(290,e))}return e}function Ho(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function k1(e){var t=e._init;return t(e._payload)}function td(e){function t(R,T){if(e){var _=R.deletions;_===null?(R.deletions=[T],R.flags|=16):_.push(T)}}function r(R,T){if(!e)return null;for(;T!==null;)t(R,T),T=T.sibling;return null}function o(R,T){for(R=new Map;T!==null;)T.key!==null?R.set(T.key,T):R.set(T.index,T),T=T.sibling;return R}function u(R,T){return R=Br(R,T),R.index=0,R.sibling=null,R}function f(R,T,_){return R.index=_,e?(_=R.alternate,_!==null?(_=_.index,_<T?(R.flags|=2,T):_):(R.flags|=2,T)):(R.flags|=1048576,T)}function g(R){return e&&R.alternate===null&&(R.flags|=2),R}function x(R,T,_,k){return T===null||T.tag!==6?(T=ru(_,R.mode,k),T.return=R,T):(T=u(T,_),T.return=R,T)}function w(R,T,_,k){var Q=_.type;return Q===Ni?A(R,T,_.props.children,k,_.key):T!==null&&(T.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Cr&&k1(Q)===T.type)?(k=u(T,_.props),k.ref=Is(R,T,_),k.return=R,k):(k=ua(_.type,_.key,_.props,null,R.mode,k),k.ref=Is(R,T,_),k.return=R,k)}function m(R,T,_,k){return T===null||T.tag!==4||T.stateNode.containerInfo!==_.containerInfo||T.stateNode.implementation!==_.implementation?(T=iu(_,R.mode,k),T.return=R,T):(T=u(T,_.children||[]),T.return=R,T)}function A(R,T,_,k,Q){return T===null||T.tag!==7?(T=ii(_,R.mode,k,Q),T.return=R,T):(T=u(T,_),T.return=R,T)}function I(R,T,_){if(typeof T=="string"&&T!==""||typeof T=="number")return T=ru(""+T,R.mode,_),T.return=R,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case bo:return _=ua(T.type,T.key,T.props,null,R.mode,_),_.ref=Is(R,null,T),_.return=R,_;case Ti:return T=iu(T,R.mode,_),T.return=R,T;case Cr:var k=T._init;return I(R,k(T._payload),_)}if(Rs(T)||ys(T))return T=ii(T,R.mode,_,null),T.return=R,T;Ho(R,T)}return null}function O(R,T,_,k){var Q=T!==null?T.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return Q!==null?null:x(R,T,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bo:return _.key===Q?w(R,T,_,k):null;case Ti:return _.key===Q?m(R,T,_,k):null;case Cr:return Q=_._init,O(R,T,Q(_._payload),k)}if(Rs(_)||ys(_))return Q!==null?null:A(R,T,_,k,null);Ho(R,_)}return null}function L(R,T,_,k,Q){if(typeof k=="string"&&k!==""||typeof k=="number")return R=R.get(_)||null,x(T,R,""+k,Q);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case bo:return R=R.get(k.key===null?_:k.key)||null,w(T,R,k,Q);case Ti:return R=R.get(k.key===null?_:k.key)||null,m(T,R,k,Q);case Cr:var X=k._init;return L(R,T,_,X(k._payload),Q)}if(Rs(k)||ys(k))return R=R.get(_)||null,A(T,R,k,Q,null);Ho(T,k)}return null}function F(R,T,_,k){for(var Q=null,X=null,b=T,W=T=0,H=null;b!==null&&W<_.length;W++){b.index>W?(H=b,b=null):H=b.sibling;var ue=O(R,b,_[W],k);if(ue===null){b===null&&(b=H);break}e&&b&&ue.alternate===null&&t(R,b),T=f(ue,T,W),X===null?Q=ue:X.sibling=ue,X=ue,b=H}if(W===_.length)return r(R,b),Je&&Jr(R,W),Q;if(b===null){for(;W<_.length;W++)b=I(R,_[W],k),b!==null&&(T=f(b,T,W),X===null?Q=b:X.sibling=b,X=b);return Je&&Jr(R,W),Q}for(b=o(R,b);W<_.length;W++)H=L(b,R,W,_[W],k),H!==null&&(e&&H.alternate!==null&&b.delete(H.key===null?W:H.key),T=f(H,T,W),X===null?Q=H:X.sibling=H,X=H);return e&&b.forEach(function(Ne){return t(R,Ne)}),Je&&Jr(R,W),Q}function B(R,T,_,k){var Q=ys(_);if(typeof Q!="function")throw Error(J(150));if(_=Q.call(_),_==null)throw Error(J(151));for(var X=Q=null,b=T,W=T=0,H=null,ue=_.next();b!==null&&!ue.done;W++,ue=_.next()){b.index>W?(H=b,b=null):H=b.sibling;var Ne=O(R,b,ue.value,k);if(Ne===null){b===null&&(b=H);break}e&&b&&Ne.alternate===null&&t(R,b),T=f(Ne,T,W),X===null?Q=Ne:X.sibling=Ne,X=Ne,b=H}if(ue.done)return r(R,b),Je&&Jr(R,W),Q;if(b===null){for(;!ue.done;W++,ue=_.next())ue=I(R,ue.value,k),ue!==null&&(T=f(ue,T,W),X===null?Q=ue:X.sibling=ue,X=ue);return Je&&Jr(R,W),Q}for(b=o(R,b);!ue.done;W++,ue=_.next())ue=L(b,R,W,ue.value,k),ue!==null&&(e&&ue.alternate!==null&&b.delete(ue.key===null?W:ue.key),T=f(ue,T,W),X===null?Q=ue:X.sibling=ue,X=ue);return e&&b.forEach(function(ce){return t(R,ce)}),Je&&Jr(R,W),Q}function Y(R,T,_,k){if(typeof _=="object"&&_!==null&&_.type===Ni&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case bo:e:{for(var Q=_.key,X=T;X!==null;){if(X.key===Q){if(Q=_.type,Q===Ni){if(X.tag===7){r(R,X.sibling),T=u(X,_.props.children),T.return=R,R=T;break e}}else if(X.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Cr&&k1(Q)===X.type){r(R,X.sibling),T=u(X,_.props),T.ref=Is(R,X,_),T.return=R,R=T;break e}r(R,X);break}else t(R,X);X=X.sibling}_.type===Ni?(T=ii(_.props.children,R.mode,k,_.key),T.return=R,R=T):(k=ua(_.type,_.key,_.props,null,R.mode,k),k.ref=Is(R,T,_),k.return=R,R=k)}return g(R);case Ti:e:{for(X=_.key;T!==null;){if(T.key===X)if(T.tag===4&&T.stateNode.containerInfo===_.containerInfo&&T.stateNode.implementation===_.implementation){r(R,T.sibling),T=u(T,_.children||[]),T.return=R,R=T;break e}else{r(R,T);break}else t(R,T);T=T.sibling}T=iu(_,R.mode,k),T.return=R,R=T}return g(R);case Cr:return X=_._init,Y(R,T,X(_._payload),k)}if(Rs(_))return F(R,T,_,k);if(ys(_))return B(R,T,_,k);Ho(R,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,T!==null&&T.tag===6?(r(R,T.sibling),T=u(T,_),T.return=R,R=T):(r(R,T),T=ru(_,R.mode,k),T.return=R,R=T),g(R)):r(R,T)}return Y}var Qi=td(!0),nd=td(!1),Na=Vr(null),_a=null,ki=null,Gc=null;function Yc(){Gc=ki=_a=null}function Xc(e){var t=Na.current;Ze(Na),e._currentValue=t}function Wu(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Hi(e,t){_a=e,Gc=ki=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qt=!0),e.firstContext=null)}function An(e){var t=e._currentValue;if(Gc!==e)if(e={context:e,memoizedValue:t,next:null},ki===null){if(_a===null)throw Error(J(308));ki=e,_a.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var ti=null;function Qc(e){ti===null?ti=[e]:ti.push(e)}function rd(e,t,r,o){var u=t.interleaved;return u===null?(r.next=r,Qc(t)):(r.next=u.next,u.next=r),t.interleaved=r,ur(e,o)}function ur(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ar=!1;function Zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function id(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Oe&2){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,ur(e,r)}return u=o.interleaved,u===null?(t.next=t,Qc(o)):(t.next=u.next,u.next=t),o.interleaved=t,ur(e,r)}function ra(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Lc(e,r)}}function B1(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?u=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?u=f=t:f=f.next=t}else u=f=t;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ra(e,t,r,o){var u=e.updateQueue;Ar=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,x=u.shared.pending;if(x!==null){u.shared.pending=null;var w=x,m=w.next;w.next=null,g===null?f=m:g.next=m,g=w;var A=e.alternate;A!==null&&(A=A.updateQueue,x=A.lastBaseUpdate,x!==g&&(x===null?A.firstBaseUpdate=m:x.next=m,A.lastBaseUpdate=w))}if(f!==null){var I=u.baseState;g=0,A=m=w=null,x=f;do{var O=x.lane,L=x.eventTime;if((o&O)===O){A!==null&&(A=A.next={eventTime:L,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var F=e,B=x;switch(O=t,L=r,B.tag){case 1:if(F=B.payload,typeof F=="function"){I=F.call(L,I,O);break e}I=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=B.payload,O=typeof F=="function"?F.call(L,I,O):F,O==null)break e;I=rt({},I,O);break e;case 2:Ar=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,O=u.effects,O===null?u.effects=[x]:O.push(x))}else L={eventTime:L,lane:O,tag:x.tag,payload:x.payload,callback:x.callback,next:null},A===null?(m=A=L,w=I):A=A.next=L,g|=O;if(x=x.next,x===null){if(x=u.shared.pending,x===null)break;O=x,x=O.next,O.next=null,u.lastBaseUpdate=O,u.shared.pending=null}}while(!0);if(A===null&&(w=I),u.baseState=w,u.firstBaseUpdate=m,u.lastBaseUpdate=A,t=u.shared.interleaved,t!==null){u=t;do g|=u.lane,u=u.next;while(u!==t)}else f===null&&(u.shared.lanes=0);ci|=g,e.lanes=g,e.memoizedState=I}}function P1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],u=o.callback;if(u!==null){if(o.callback=null,o=r,typeof u!="function")throw Error(J(191,u));u.call(o)}}}var go={},Kn=Vr(go),eo=Vr(go),to=Vr(go);function ni(e){if(e===go)throw Error(J(174));return e}function Kc(e,t){switch(Ge(to,t),Ge(eo,e),Ge(Kn,go),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Iu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Iu(t,e)}Ze(Kn),Ge(Kn,t)}function Zi(){Ze(Kn),Ze(eo),Ze(to)}function sd(e){ni(to.current);var t=ni(Kn.current),r=Iu(t,e.type);t!==r&&(Ge(eo,e),Ge(Kn,r))}function qc(e){eo.current===e&&(Ze(Kn),Ze(eo))}var tt=Vr(0);function Oa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ql=[];function Jc(){for(var e=0;e<ql.length;e++)ql[e]._workInProgressVersionPrimary=null;ql.length=0}var ia=fr.ReactCurrentDispatcher,Jl=fr.ReactCurrentBatchConfig,ui=0,nt=null,yt=null,St=null,Ma=!1,Fs=!1,no=0,Em=0;function Lt(){throw Error(J(321))}function $c(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Bn(e[r],t[r]))return!1;return!0}function ef(e,t,r,o,u,f){if(ui=f,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=e===null||e.memoizedState===null?Im:vm,e=r(o,u),Fs){f=0;do{if(Fs=!1,no=0,25<=f)throw Error(J(301));f+=1,St=yt=null,t.updateQueue=null,ia.current=Tm,e=r(o,u)}while(Fs)}if(ia.current=ba,t=yt!==null&&yt.next!==null,ui=0,St=yt=nt=null,Ma=!1,t)throw Error(J(300));return e}function tf(){var e=no!==0;return no=0,e}function Yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?nt.memoizedState=St=e:St=St.next=e,St}function Sn(){if(yt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=St===null?nt.memoizedState:St.next;if(t!==null)St=t,yt=e;else{if(e===null)throw Error(J(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},St===null?nt.memoizedState=St=e:St=St.next=e}return St}function ro(e,t){return typeof t=="function"?t(e):t}function $l(e){var t=Sn(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var o=yt,u=o.baseQueue,f=r.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}o.baseQueue=u=f,r.pending=null}if(u!==null){f=u.next,o=o.baseState;var x=g=null,w=null,m=f;do{var A=m.lane;if((ui&A)===A)w!==null&&(w=w.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),o=m.hasEagerState?m.eagerState:e(o,m.action);else{var I={lane:A,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};w===null?(x=w=I,g=o):w=w.next=I,nt.lanes|=A,ci|=A}m=m.next}while(m!==null&&m!==f);w===null?g=o:w.next=x,Bn(o,t.memoizedState)||(qt=!0),t.memoizedState=o,t.baseState=g,t.baseQueue=w,r.lastRenderedState=o}if(e=r.interleaved,e!==null){u=e;do f=u.lane,nt.lanes|=f,ci|=f,u=u.next;while(u!==e)}else u===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function eu(e){var t=Sn(),r=t.queue;if(r===null)throw Error(J(311));r.lastRenderedReducer=e;var o=r.dispatch,u=r.pending,f=t.memoizedState;if(u!==null){r.pending=null;var g=u=u.next;do f=e(f,g.action),g=g.next;while(g!==u);Bn(f,t.memoizedState)||(qt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,o]}function od(){}function ad(e,t){var r=nt,o=Sn(),u=t(),f=!Bn(o.memoizedState,u);if(f&&(o.memoizedState=u,qt=!0),o=o.queue,nf(cd.bind(null,r,o,e),[e]),o.getSnapshot!==t||f||St!==null&&St.memoizedState.tag&1){if(r.flags|=2048,io(9,ud.bind(null,r,o,u,t),void 0,null),It===null)throw Error(J(349));ui&30||ld(r,t,u)}return u}function ld(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ud(e,t,r,o){t.value=r,t.getSnapshot=o,fd(t)&&hd(e)}function cd(e,t,r){return r(function(){fd(t)&&hd(e)})}function fd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Bn(e,r)}catch{return!0}}function hd(e){var t=ur(e,1);t!==null&&kn(t,e,1,-1)}function F1(e){var t=Yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:e},t.queue=e,e=e.dispatch=Sm.bind(null,nt,e),[t.memoizedState,e]}function io(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function dd(){return Sn().memoizedState}function sa(e,t,r,o){var u=Yn();nt.flags|=e,u.memoizedState=io(1|t,r,void 0,o===void 0?null:o)}function Ka(e,t,r,o){var u=Sn();o=o===void 0?null:o;var f=void 0;if(yt!==null){var g=yt.memoizedState;if(f=g.destroy,o!==null&&$c(o,g.deps)){u.memoizedState=io(t,r,f,o);return}}nt.flags|=e,u.memoizedState=io(1|t,r,f,o)}function U1(e,t){return sa(8390656,8,e,t)}function nf(e,t){return Ka(2048,8,e,t)}function gd(e,t){return Ka(4,2,e,t)}function pd(e,t){return Ka(4,4,e,t)}function md(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xd(e,t,r){return r=r!=null?r.concat([e]):null,Ka(4,4,md.bind(null,t,e),r)}function rf(){}function wd(e,t){var r=Sn();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&$c(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function yd(e,t){var r=Sn();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&$c(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function Ed(e,t,r){return ui&21?(Bn(r,t)||(r=vh(),nt.lanes|=r,ci|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qt=!0),e.memoizedState=r)}function Cm(e,t){var r=Fe;Fe=r!==0&&4>r?r:4,e(!0);var o=Jl.transition;Jl.transition={};try{e(!1),t()}finally{Fe=r,Jl.transition=o}}function Cd(){return Sn().memoizedState}function Am(e,t,r){var o=kr(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},Ad(e))Sd(t,r);else if(r=rd(e,t,r,o),r!==null){var u=zt();kn(r,e,o,u),Id(r,t,o)}}function Sm(e,t,r){var o=kr(e),u={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ad(e))Sd(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,x=f(g,r);if(u.hasEagerState=!0,u.eagerState=x,Bn(x,g)){var w=t.interleaved;w===null?(u.next=u,Qc(t)):(u.next=w.next,w.next=u),t.interleaved=u;return}}catch{}finally{}r=rd(e,t,u,o),r!==null&&(u=zt(),kn(r,e,o,u),Id(r,t,o))}}function Ad(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function Sd(e,t){Fs=Ma=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Id(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Lc(e,r)}}var ba={readContext:An,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},Im={readContext:An,useCallback:function(e,t){return Yn().memoizedState=[e,t===void 0?null:t],e},useContext:An,useEffect:U1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,sa(4194308,4,md.bind(null,t,e),r)},useLayoutEffect:function(e,t){return sa(4194308,4,e,t)},useInsertionEffect:function(e,t){return sa(4,2,e,t)},useMemo:function(e,t){var r=Yn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=Yn();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Am.bind(null,nt,e),[o.memoizedState,e]},useRef:function(e){var t=Yn();return e={current:e},t.memoizedState=e},useState:F1,useDebugValue:rf,useDeferredValue:function(e){return Yn().memoizedState=e},useTransition:function(){var e=F1(!1),t=e[0];return e=Cm.bind(null,e[1]),Yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=nt,u=Yn();if(Je){if(r===void 0)throw Error(J(407));r=r()}else{if(r=t(),It===null)throw Error(J(349));ui&30||ld(o,t,r)}u.memoizedState=r;var f={value:r,getSnapshot:t};return u.queue=f,U1(cd.bind(null,o,f,e),[e]),o.flags|=2048,io(9,ud.bind(null,o,f,r,t),void 0,null),r},useId:function(){var e=Yn(),t=It.identifierPrefix;if(Je){var r=ir,o=rr;r=(o&~(1<<32-Ln(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=no++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Em++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vm={readContext:An,useCallback:wd,useContext:An,useEffect:nf,useImperativeHandle:xd,useInsertionEffect:gd,useLayoutEffect:pd,useMemo:yd,useReducer:$l,useRef:dd,useState:function(){return $l(ro)},useDebugValue:rf,useDeferredValue:function(e){var t=Sn();return Ed(t,yt.memoizedState,e)},useTransition:function(){var e=$l(ro)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:od,useSyncExternalStore:ad,useId:Cd,unstable_isNewReconciler:!1},Tm={readContext:An,useCallback:wd,useContext:An,useEffect:nf,useImperativeHandle:xd,useInsertionEffect:gd,useLayoutEffect:pd,useMemo:yd,useReducer:eu,useRef:dd,useState:function(){return eu(ro)},useDebugValue:rf,useDeferredValue:function(e){var t=Sn();return yt===null?t.memoizedState=e:Ed(t,yt.memoizedState,e)},useTransition:function(){var e=eu(ro)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:od,useSyncExternalStore:ad,useId:Cd,unstable_isNewReconciler:!1};function Rn(e,t){if(e&&e.defaultProps){t=rt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Gu(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:rt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var qa={isMounted:function(e){return(e=e._reactInternals)?di(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=zt(),u=kr(e),f=or(o,u);f.payload=t,r!=null&&(f.callback=r),t=Dr(e,f,u),t!==null&&(kn(t,e,u,o),ra(t,e,u))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=zt(),u=kr(e),f=or(o,u);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Dr(e,f,u),t!==null&&(kn(t,e,u,o),ra(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=zt(),o=kr(e),u=or(r,o);u.tag=2,t!=null&&(u.callback=t),t=Dr(e,u,o),t!==null&&(kn(t,e,o,r),ra(t,e,o))}};function j1(e,t,r,o,u,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,g):t.prototype&&t.prototype.isPureReactComponent?!Ks(r,o)||!Ks(u,f):!0}function vd(e,t,r){var o=!1,u=Ur,f=t.contextType;return typeof f=="object"&&f!==null?f=An(f):(u=$t(t)?ai:Pt.current,o=t.contextTypes,f=(o=o!=null)?Yi(e,u):Ur),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),t}function z1(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Yu(e,t,r,o){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs={},Zc(e);var f=t.contextType;typeof f=="object"&&f!==null?u.context=An(f):(f=$t(t)?ai:Pt.current,u.context=Yi(e,f)),u.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Gu(e,t,f,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&qa.enqueueReplaceState(u,u.state,null),Ra(e,r,u,o),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Ki(e,t){try{var r="",o=t;do r+=e2(o),o=o.return;while(o);var u=r}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:u,digest:null}}function tu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Xu(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Nm=typeof WeakMap=="function"?WeakMap:Map;function Td(e,t,r){r=or(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){La||(La=!0,rc=o),Xu(e,t)},r}function Nd(e,t,r){r=or(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var u=t.value;r.payload=function(){return o(u)},r.callback=function(){Xu(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){Xu(e,t),typeof o!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function V1(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new Nm;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(r)||(u.add(r),e=zm.bind(null,e,t,r),t.then(e,e))}function H1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function W1(e,t,r,o,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=or(-1,1),t.tag=2,Dr(r,t,1))),r.lanes|=1),e)}var _m=fr.ReactCurrentOwner,qt=!1;function jt(e,t,r,o){t.child=e===null?nd(t,null,r,o):Qi(t,e.child,r,o)}function G1(e,t,r,o,u){r=r.render;var f=t.ref;return Hi(t,u),o=ef(e,t,r,o,f,u),r=tf(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,cr(e,t,u)):(Je&&r&&Vc(t),t.flags|=1,jt(e,t,o,u),t.child)}function Y1(e,t,r,o,u){if(e===null){var f=r.type;return typeof f=="function"&&!hf(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,_d(e,t,f,o,u)):(e=ua(r.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&u)){var g=f.memoizedProps;if(r=r.compare,r=r!==null?r:Ks,r(g,o)&&e.ref===t.ref)return cr(e,t,u)}return t.flags|=1,e=Br(f,o),e.ref=t.ref,e.return=t,t.child=e}function _d(e,t,r,o,u){if(e!==null){var f=e.memoizedProps;if(Ks(f,o)&&e.ref===t.ref)if(qt=!1,t.pendingProps=o=f,(e.lanes&u)!==0)e.flags&131072&&(qt=!0);else return t.lanes=e.lanes,cr(e,t,u)}return Qu(e,t,r,o,u)}function Rd(e,t,r){var o=t.pendingProps,u=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Pi,sn),sn|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(Pi,sn),sn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=f!==null?f.baseLanes:r,Ge(Pi,sn),sn|=o}else f!==null?(o=f.baseLanes|r,t.memoizedState=null):o=r,Ge(Pi,sn),sn|=o;return jt(e,t,u,r),t.child}function Od(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Qu(e,t,r,o,u){var f=$t(r)?ai:Pt.current;return f=Yi(t,f),Hi(t,u),r=ef(e,t,r,o,f,u),o=tf(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,cr(e,t,u)):(Je&&o&&Vc(t),t.flags|=1,jt(e,t,r,u),t.child)}function X1(e,t,r,o,u){if($t(r)){var f=!0;Ia(t)}else f=!1;if(Hi(t,u),t.stateNode===null)oa(e,t),vd(t,r,o),Yu(t,r,o,u),o=!0;else if(e===null){var g=t.stateNode,x=t.memoizedProps;g.props=x;var w=g.context,m=r.contextType;typeof m=="object"&&m!==null?m=An(m):(m=$t(r)?ai:Pt.current,m=Yi(t,m));var A=r.getDerivedStateFromProps,I=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function";I||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==o||w!==m)&&z1(t,g,o,m),Ar=!1;var O=t.memoizedState;g.state=O,Ra(t,o,g,u),w=t.memoizedState,x!==o||O!==w||Jt.current||Ar?(typeof A=="function"&&(Gu(t,r,A,o),w=t.memoizedState),(x=Ar||j1(t,r,x,o,O,w,m))?(I||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=w),g.props=o,g.state=w,g.context=m,o=x):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,id(e,t),x=t.memoizedProps,m=t.type===t.elementType?x:Rn(t.type,x),g.props=m,I=t.pendingProps,O=g.context,w=r.contextType,typeof w=="object"&&w!==null?w=An(w):(w=$t(r)?ai:Pt.current,w=Yi(t,w));var L=r.getDerivedStateFromProps;(A=typeof L=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==I||O!==w)&&z1(t,g,o,w),Ar=!1,O=t.memoizedState,g.state=O,Ra(t,o,g,u);var F=t.memoizedState;x!==I||O!==F||Jt.current||Ar?(typeof L=="function"&&(Gu(t,r,L,o),F=t.memoizedState),(m=Ar||j1(t,r,m,o,O,F,w)||!1)?(A||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,F,w),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,F,w)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=F),g.props=o,g.state=F,g.context=w,o=m):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),o=!1)}return Zu(e,t,r,o,f,u)}function Zu(e,t,r,o,u,f){Od(e,t);var g=(t.flags&128)!==0;if(!o&&!g)return u&&b1(t,r,!1),cr(e,t,f);o=t.stateNode,_m.current=t;var x=g&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&g?(t.child=Qi(t,e.child,null,f),t.child=Qi(t,null,x,f)):jt(e,t,x,f),t.memoizedState=o.state,u&&b1(t,r,!0),t.child}function Md(e){var t=e.stateNode;t.pendingContext?M1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&M1(e,t.context,!1),Kc(e,t.containerInfo)}function Q1(e,t,r,o,u){return Xi(),Wc(u),t.flags|=256,jt(e,t,r,o),t.child}var Ku={dehydrated:null,treeContext:null,retryLane:0};function qu(e){return{baseLanes:e,cachePool:null,transitions:null}}function bd(e,t,r){var o=t.pendingProps,u=tt.current,f=!1,g=(t.flags&128)!==0,x;if((x=g)||(x=e!==null&&e.memoizedState===null?!1:(u&2)!==0),x?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Ge(tt,u&1),e===null)return Hu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=o.children,e=o.fallback,f?(o=t.mode,f=t.child,g={mode:"hidden",children:g},!(o&1)&&f!==null?(f.childLanes=0,f.pendingProps=g):f=el(g,o,0,null),e=ii(e,o,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=qu(r),t.memoizedState=Ku,e):sf(t,g));if(u=e.memoizedState,u!==null&&(x=u.dehydrated,x!==null))return Rm(e,t,g,o,x,u,r);if(f){f=o.fallback,g=t.mode,u=e.child,x=u.sibling;var w={mode:"hidden",children:o.children};return!(g&1)&&t.child!==u?(o=t.child,o.childLanes=0,o.pendingProps=w,t.deletions=null):(o=Br(u,w),o.subtreeFlags=u.subtreeFlags&14680064),x!==null?f=Br(x,f):(f=ii(f,g,r,null),f.flags|=2),f.return=t,o.return=t,o.sibling=f,t.child=o,o=f,f=t.child,g=e.child.memoizedState,g=g===null?qu(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~r,t.memoizedState=Ku,o}return f=e.child,e=f.sibling,o=Br(f,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function sf(e,t){return t=el({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wo(e,t,r,o){return o!==null&&Wc(o),Qi(t,e.child,null,r),e=sf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rm(e,t,r,o,u,f,g){if(r)return t.flags&256?(t.flags&=-257,o=tu(Error(J(422))),Wo(e,t,g,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=o.fallback,u=t.mode,o=el({mode:"visible",children:o.children},u,0,null),f=ii(f,u,g,null),f.flags|=2,o.return=t,f.return=t,o.sibling=f,t.child=o,t.mode&1&&Qi(t,e.child,null,g),t.child.memoizedState=qu(g),t.memoizedState=Ku,f);if(!(t.mode&1))return Wo(e,t,g,null);if(u.data==="$!"){if(o=u.nextSibling&&u.nextSibling.dataset,o)var x=o.dgst;return o=x,f=Error(J(419)),o=tu(f,o,void 0),Wo(e,t,g,o)}if(x=(g&e.childLanes)!==0,qt||x){if(o=It,o!==null){switch(g&-g){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(o.suspendedLanes|g)?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,ur(e,u),kn(o,e,u,-1))}return ff(),o=tu(Error(J(421))),Wo(e,t,g,o)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=Vm.bind(null,e),u._reactRetry=t,null):(e=f.treeContext,an=br(u.nextSibling),ln=t,Je=!0,Dn=null,e!==null&&(xn[wn++]=rr,xn[wn++]=ir,xn[wn++]=li,rr=e.id,ir=e.overflow,li=t),t=sf(t,o.children),t.flags|=4096,t)}function Z1(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Wu(e.return,t,r)}function nu(e,t,r,o,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=r,f.tailMode=u)}function Dd(e,t,r){var o=t.pendingProps,u=o.revealOrder,f=o.tail;if(jt(e,t,o.children,r),o=tt.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Z1(e,r,t);else if(e.tag===19)Z1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ge(tt,o),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&Oa(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),nu(t,!1,u,r,f);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Oa(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}nu(t,!0,r,null,f);break;case"together":nu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ci|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,r=Br(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Br(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Om(e,t,r){switch(t.tag){case 3:Md(t),Xi();break;case 5:sd(t);break;case 1:$t(t.type)&&Ia(t);break;case 4:Kc(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,u=t.memoizedProps.value;Ge(Na,o._currentValue),o._currentValue=u;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Ge(tt,tt.current&1),t.flags|=128,null):r&t.child.childLanes?bd(e,t,r):(Ge(tt,tt.current&1),e=cr(e,t,r),e!==null?e.sibling:null);Ge(tt,tt.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return Dd(e,t,r);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ge(tt,tt.current),o)break;return null;case 22:case 23:return t.lanes=0,Rd(e,t,r)}return cr(e,t,r)}var Ld,Ju,kd,Bd;Ld=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ju=function(){};kd=function(e,t,r,o){var u=e.memoizedProps;if(u!==o){e=t.stateNode,ni(Kn.current);var f=null;switch(r){case"input":u=Eu(e,u),o=Eu(e,o),f=[];break;case"select":u=rt({},u,{value:void 0}),o=rt({},o,{value:void 0}),f=[];break;case"textarea":u=Su(e,u),o=Su(e,o),f=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Aa)}vu(r,o);var g;r=null;for(m in u)if(!o.hasOwnProperty(m)&&u.hasOwnProperty(m)&&u[m]!=null)if(m==="style"){var x=u[m];for(g in x)x.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Hs.hasOwnProperty(m)?f||(f=[]):(f=f||[]).push(m,null));for(m in o){var w=o[m];if(x=u!=null?u[m]:void 0,o.hasOwnProperty(m)&&w!==x&&(w!=null||x!=null))if(m==="style")if(x){for(g in x)!x.hasOwnProperty(g)||w&&w.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in w)w.hasOwnProperty(g)&&x[g]!==w[g]&&(r||(r={}),r[g]=w[g])}else r||(f||(f=[]),f.push(m,r)),r=w;else m==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,x=x?x.__html:void 0,w!=null&&x!==w&&(f=f||[]).push(m,w)):m==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(m,""+w):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(m)?(w!=null&&m==="onScroll"&&Xe("scroll",e),f||x===w||(f=[])):(f=f||[]).push(m,w))}r&&(f=f||[]).push("style",r);var m=f;(t.updateQueue=m)&&(t.flags|=4)}};Bd=function(e,t,r,o){r!==o&&(t.flags|=4)};function vs(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var u=e.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&14680064,o|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function Mm(e,t,r){var o=t.pendingProps;switch(Hc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return $t(t.type)&&Sa(),kt(t),null;case 3:return o=t.stateNode,Zi(),Ze(Jt),Ze(Pt),Jc(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Vo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dn!==null&&(oc(Dn),Dn=null))),Ju(e,t),kt(t),null;case 5:qc(t);var u=ni(to.current);if(r=t.type,e!==null&&t.stateNode!=null)kd(e,t,r,o,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(J(166));return kt(t),null}if(e=ni(Kn.current),Vo(t)){o=t.stateNode,r=t.type;var f=t.memoizedProps;switch(o[Qn]=t,o[$s]=f,e=(t.mode&1)!==0,r){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<Ms.length;u++)Xe(Ms[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":i1(o,f),Xe("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!f.multiple},Xe("invalid",o);break;case"textarea":o1(o,f),Xe("invalid",o)}vu(r,f),u=null;for(var g in f)if(f.hasOwnProperty(g)){var x=f[g];g==="children"?typeof x=="string"?o.textContent!==x&&(f.suppressHydrationWarning!==!0&&zo(o.textContent,x,e),u=["children",x]):typeof x=="number"&&o.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&zo(o.textContent,x,e),u=["children",""+x]):Hs.hasOwnProperty(g)&&x!=null&&g==="onScroll"&&Xe("scroll",o)}switch(r){case"input":Do(o),s1(o,f,!0);break;case"textarea":Do(o),a1(o);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(o.onclick=Aa)}o=u,t.updateQueue=o,o!==null&&(t.flags|=4)}else{g=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ch(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(r,{is:o.is}):(e=g.createElement(r),r==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,r),e[Qn]=t,e[$s]=o,Ld(e,t,!1,!1),t.stateNode=e;e:{switch(g=Tu(r,o),r){case"dialog":Xe("cancel",e),Xe("close",e),u=o;break;case"iframe":case"object":case"embed":Xe("load",e),u=o;break;case"video":case"audio":for(u=0;u<Ms.length;u++)Xe(Ms[u],e);u=o;break;case"source":Xe("error",e),u=o;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),u=o;break;case"details":Xe("toggle",e),u=o;break;case"input":i1(e,o),u=Eu(e,o),Xe("invalid",e);break;case"option":u=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},u=rt({},o,{value:void 0}),Xe("invalid",e);break;case"textarea":o1(e,o),u=Su(e,o),Xe("invalid",e);break;default:u=o}vu(r,u),x=u;for(f in x)if(x.hasOwnProperty(f)){var w=x[f];f==="style"?dh(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&fh(e,w)):f==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&Ws(e,w):typeof w=="number"&&Ws(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Hs.hasOwnProperty(f)?w!=null&&f==="onScroll"&&Xe("scroll",e):w!=null&&_c(e,f,w,g))}switch(r){case"input":Do(e),s1(e,o,!1);break;case"textarea":Do(e),a1(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Fr(o.value));break;case"select":e.multiple=!!o.multiple,f=o.value,f!=null?Ui(e,!!o.multiple,f,!1):o.defaultValue!=null&&Ui(e,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Aa)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)Bd(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(J(166));if(r=ni(to.current),ni(Kn.current),Vo(t)){if(o=t.stateNode,r=t.memoizedProps,o[Qn]=t,(f=o.nodeValue!==r)&&(e=ln,e!==null))switch(e.tag){case 3:zo(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zo(o.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Qn]=t,t.stateNode=o}return kt(t),null;case 13:if(Ze(tt),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&an!==null&&t.mode&1&&!(t.flags&128))ed(),Xi(),t.flags|=98560,f=!1;else if(f=Vo(t),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(J(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(J(317));f[Qn]=t}else Xi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),f=!1}else Dn!==null&&(oc(Dn),Dn=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||tt.current&1?Et===0&&(Et=3):ff())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return Zi(),Ju(e,t),e===null&&qs(t.stateNode.containerInfo),kt(t),null;case 10:return Xc(t.type._context),kt(t),null;case 17:return $t(t.type)&&Sa(),kt(t),null;case 19:if(Ze(tt),f=t.memoizedState,f===null)return kt(t),null;if(o=(t.flags&128)!==0,g=f.rendering,g===null)if(o)vs(f,!1);else{if(Et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=Oa(e),g!==null){for(t.flags|=128,vs(f,!1),o=g.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)f=r,e=o,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ge(tt,tt.current&1|2),t.child}e=e.sibling}f.tail!==null&&ct()>qi&&(t.flags|=128,o=!0,vs(f,!1),t.lanes=4194304)}else{if(!o)if(e=Oa(g),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Je)return kt(t),null}else 2*ct()-f.renderingStartTime>qi&&r!==1073741824&&(t.flags|=128,o=!0,vs(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(r=f.last,r!==null?r.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=ct(),t.sibling=null,r=tt.current,Ge(tt,o?r&1|2:r&1),t):(kt(t),null);case 22:case 23:return cf(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?sn&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function bm(e,t){switch(Hc(t),t.tag){case 1:return $t(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zi(),Ze(Jt),Ze(Pt),Jc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qc(t),null;case 13:if(Ze(tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ze(tt),null;case 4:return Zi(),null;case 10:return Xc(t.type._context),null;case 22:case 23:return cf(),null;case 24:return null;default:return null}}var Go=!1,Bt=!1,Dm=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Bi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){lt(e,t,o)}else r.current=null}function $u(e,t,r){try{r()}catch(o){lt(e,t,o)}}var K1=!1;function Lm(e,t){if(Bu=ya,e=zh(),zc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var g=0,x=-1,w=-1,m=0,A=0,I=e,O=null;t:for(;;){for(var L;I!==r||u!==0&&I.nodeType!==3||(x=g+u),I!==f||o!==0&&I.nodeType!==3||(w=g+o),I.nodeType===3&&(g+=I.nodeValue.length),(L=I.firstChild)!==null;)O=I,I=L;for(;;){if(I===e)break t;if(O===r&&++m===u&&(x=g),O===f&&++A===o&&(w=g),(L=I.nextSibling)!==null)break;I=O,O=I.parentNode}I=L}r=x===-1||w===-1?null:{start:x,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(Pu={focusedElem:e,selectionRange:r},ya=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var B=F.memoizedProps,Y=F.memoizedState,R=t.stateNode,T=R.getSnapshotBeforeUpdate(t.elementType===t.type?B:Rn(t.type,B),Y);R.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(k){lt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return F=K1,K1=!1,F}function Us(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&$u(t,r,f)}u=u.next}while(u!==o)}}function Ja(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function ec(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Pd(e){var t=e.alternate;t!==null&&(e.alternate=null,Pd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qn],delete t[$s],delete t[ju],delete t[mm],delete t[xm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fd(e){return e.tag===5||e.tag===3||e.tag===4}function q1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tc(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Aa));else if(o!==4&&(e=e.child,e!==null))for(tc(e,t,r),e=e.sibling;e!==null;)tc(e,t,r),e=e.sibling}function nc(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(nc(e,t,r),e=e.sibling;e!==null;)nc(e,t,r),e=e.sibling}var Rt=null,On=!1;function yr(e,t,r){for(r=r.child;r!==null;)Ud(e,t,r),r=r.sibling}function Ud(e,t,r){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Wa,r)}catch{}switch(r.tag){case 5:Bt||Bi(r,t);case 6:var o=Rt,u=On;Rt=null,yr(e,t,r),Rt=o,On=u,Rt!==null&&(On?(e=Rt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Rt.removeChild(r.stateNode));break;case 18:Rt!==null&&(On?(e=Rt,r=r.stateNode,e.nodeType===8?Zl(e.parentNode,r):e.nodeType===1&&Zl(e,r),Qs(e)):Zl(Rt,r.stateNode));break;case 4:o=Rt,u=On,Rt=r.stateNode.containerInfo,On=!0,yr(e,t,r),Rt=o,On=u;break;case 0:case 11:case 14:case 15:if(!Bt&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){u=o=o.next;do{var f=u,g=f.destroy;f=f.tag,g!==void 0&&(f&2||f&4)&&$u(r,t,g),u=u.next}while(u!==o)}yr(e,t,r);break;case 1:if(!Bt&&(Bi(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(x){lt(r,t,x)}yr(e,t,r);break;case 21:yr(e,t,r);break;case 22:r.mode&1?(Bt=(o=Bt)||r.memoizedState!==null,yr(e,t,r),Bt=o):yr(e,t,r);break;default:yr(e,t,r)}}function J1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Dm),t.forEach(function(o){var u=Hm.bind(null,e,o);r.has(o)||(r.add(o),o.then(u,u))})}}function _n(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];try{var f=e,g=t,x=g;e:for(;x!==null;){switch(x.tag){case 5:Rt=x.stateNode,On=!1;break e;case 3:Rt=x.stateNode.containerInfo,On=!0;break e;case 4:Rt=x.stateNode.containerInfo,On=!0;break e}x=x.return}if(Rt===null)throw Error(J(160));Ud(f,g,u),Rt=null,On=!1;var w=u.alternate;w!==null&&(w.return=null),u.return=null}catch(m){lt(u,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jd(t,e),t=t.sibling}function jd(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_n(t,e),Gn(e),o&4){try{Us(3,e,e.return),Ja(3,e)}catch(B){lt(e,e.return,B)}try{Us(5,e,e.return)}catch(B){lt(e,e.return,B)}}break;case 1:_n(t,e),Gn(e),o&512&&r!==null&&Bi(r,r.return);break;case 5:if(_n(t,e),Gn(e),o&512&&r!==null&&Bi(r,r.return),e.flags&32){var u=e.stateNode;try{Ws(u,"")}catch(B){lt(e,e.return,B)}}if(o&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,g=r!==null?r.memoizedProps:f,x=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&lh(u,f),Tu(x,g);var m=Tu(x,f);for(g=0;g<w.length;g+=2){var A=w[g],I=w[g+1];A==="style"?dh(u,I):A==="dangerouslySetInnerHTML"?fh(u,I):A==="children"?Ws(u,I):_c(u,A,I,m)}switch(x){case"input":Cu(u,f);break;case"textarea":uh(u,f);break;case"select":var O=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var L=f.value;L!=null?Ui(u,!!f.multiple,L,!1):O!==!!f.multiple&&(f.defaultValue!=null?Ui(u,!!f.multiple,f.defaultValue,!0):Ui(u,!!f.multiple,f.multiple?[]:"",!1))}u[$s]=f}catch(B){lt(e,e.return,B)}}break;case 6:if(_n(t,e),Gn(e),o&4){if(e.stateNode===null)throw Error(J(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(B){lt(e,e.return,B)}}break;case 3:if(_n(t,e),Gn(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(B){lt(e,e.return,B)}break;case 4:_n(t,e),Gn(e);break;case 13:_n(t,e),Gn(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(lf=ct())),o&4&&J1(e);break;case 22:if(A=r!==null&&r.memoizedState!==null,e.mode&1?(Bt=(m=Bt)||A,_n(t,e),Bt=m):_n(t,e),Gn(e),o&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!A&&e.mode&1)for(oe=e,A=e.child;A!==null;){for(I=oe=A;oe!==null;){switch(O=oe,L=O.child,O.tag){case 0:case 11:case 14:case 15:Us(4,O,O.return);break;case 1:Bi(O,O.return);var F=O.stateNode;if(typeof F.componentWillUnmount=="function"){o=O,r=O.return;try{t=o,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(B){lt(o,r,B)}}break;case 5:Bi(O,O.return);break;case 22:if(O.memoizedState!==null){e0(I);continue}}L!==null?(L.return=O,oe=L):e0(I)}A=A.sibling}e:for(A=null,I=e;;){if(I.tag===5){if(A===null){A=I;try{u=I.stateNode,m?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=I.stateNode,w=I.memoizedProps.style,g=w!=null&&w.hasOwnProperty("display")?w.display:null,x.style.display=hh("display",g))}catch(B){lt(e,e.return,B)}}}else if(I.tag===6){if(A===null)try{I.stateNode.nodeValue=m?"":I.memoizedProps}catch(B){lt(e,e.return,B)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;A===I&&(A=null),I=I.return}A===I&&(A=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:_n(t,e),Gn(e),o&4&&J1(e);break;case 21:break;default:_n(t,e),Gn(e)}}function Gn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Fd(r)){var o=r;break e}r=r.return}throw Error(J(160))}switch(o.tag){case 5:var u=o.stateNode;o.flags&32&&(Ws(u,""),o.flags&=-33);var f=q1(e);nc(e,f,u);break;case 3:case 4:var g=o.stateNode.containerInfo,x=q1(e);tc(e,x,g);break;default:throw Error(J(161))}}catch(w){lt(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function km(e,t,r){oe=e,zd(e)}function zd(e,t,r){for(var o=(e.mode&1)!==0;oe!==null;){var u=oe,f=u.child;if(u.tag===22&&o){var g=u.memoizedState!==null||Go;if(!g){var x=u.alternate,w=x!==null&&x.memoizedState!==null||Bt;x=Go;var m=Bt;if(Go=g,(Bt=w)&&!m)for(oe=u;oe!==null;)g=oe,w=g.child,g.tag===22&&g.memoizedState!==null?t0(u):w!==null?(w.return=g,oe=w):t0(u);for(;f!==null;)oe=f,zd(f),f=f.sibling;oe=u,Go=x,Bt=m}$1(e)}else u.subtreeFlags&8772&&f!==null?(f.return=u,oe=f):$1(e)}}function $1(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bt||Ja(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Bt)if(r===null)o.componentDidMount();else{var u=t.elementType===t.type?r.memoizedProps:Rn(t.type,r.memoizedProps);o.componentDidUpdate(u,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&P1(t,f,o);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}P1(t,g,r)}break;case 5:var x=t.stateNode;if(r===null&&t.flags&4){r=x;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var A=m.memoizedState;if(A!==null){var I=A.dehydrated;I!==null&&Qs(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Bt||t.flags&512&&ec(t)}catch(O){lt(t,t.return,O)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function e0(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function t0(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ja(4,t)}catch(w){lt(t,r,w)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var u=t.return;try{o.componentDidMount()}catch(w){lt(t,u,w)}}var f=t.return;try{ec(t)}catch(w){lt(t,f,w)}break;case 5:var g=t.return;try{ec(t)}catch(w){lt(t,g,w)}}}catch(w){lt(t,t.return,w)}if(t===e){oe=null;break}var x=t.sibling;if(x!==null){x.return=t.return,oe=x;break}oe=t.return}}var Bm=Math.ceil,Da=fr.ReactCurrentDispatcher,of=fr.ReactCurrentOwner,Cn=fr.ReactCurrentBatchConfig,Oe=0,It=null,dt=null,Ot=0,sn=0,Pi=Vr(0),Et=0,so=null,ci=0,$a=0,af=0,js=null,Kt=null,lf=0,qi=1/0,tr=null,La=!1,rc=null,Lr=null,Yo=!1,Tr=null,ka=0,zs=0,ic=null,aa=-1,la=0;function zt(){return Oe&6?ct():aa!==-1?aa:aa=ct()}function kr(e){return e.mode&1?Oe&2&&Ot!==0?Ot&-Ot:ym.transition!==null?(la===0&&(la=vh()),la):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:bh(e.type)),e):1}function kn(e,t,r,o){if(50<zs)throw zs=0,ic=null,Error(J(185));co(e,r,o),(!(Oe&2)||e!==It)&&(e===It&&(!(Oe&2)&&($a|=r),Et===4&&Ir(e,Ot)),en(e,o),r===1&&Oe===0&&!(t.mode&1)&&(qi=ct()+500,Za&&Hr()))}function en(e,t){var r=e.callbackNode;y2(e,t);var o=wa(e,e===It?Ot:0);if(o===0)r!==null&&c1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&c1(r),t===1)e.tag===0?wm(n0.bind(null,e)):qh(n0.bind(null,e)),gm(function(){!(Oe&6)&&Hr()}),r=null;else{switch(Th(o)){case 1:r=Dc;break;case 4:r=Sh;break;case 16:r=xa;break;case 536870912:r=Ih;break;default:r=xa}r=Zd(r,Vd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Vd(e,t){if(aa=-1,la=0,Oe&6)throw Error(J(327));var r=e.callbackNode;if(Wi()&&e.callbackNode!==r)return null;var o=wa(e,e===It?Ot:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Ba(e,o);else{t=o;var u=Oe;Oe|=2;var f=Wd();(It!==e||Ot!==t)&&(tr=null,qi=ct()+500,ri(e,t));do try{Um();break}catch(x){Hd(e,x)}while(!0);Yc(),Da.current=f,Oe=u,dt!==null?t=0:(It=null,Ot=0,t=Et)}if(t!==0){if(t===2&&(u=Mu(e),u!==0&&(o=u,t=sc(e,u))),t===1)throw r=so,ri(e,0),Ir(e,o),en(e,ct()),r;if(t===6)Ir(e,o);else{if(u=e.current.alternate,!(o&30)&&!Pm(u)&&(t=Ba(e,o),t===2&&(f=Mu(e),f!==0&&(o=f,t=sc(e,f))),t===1))throw r=so,ri(e,0),Ir(e,o),en(e,ct()),r;switch(e.finishedWork=u,e.finishedLanes=o,t){case 0:case 1:throw Error(J(345));case 2:$r(e,Kt,tr);break;case 3:if(Ir(e,o),(o&130023424)===o&&(t=lf+500-ct(),10<t)){if(wa(e,0)!==0)break;if(u=e.suspendedLanes,(u&o)!==o){zt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Uu($r.bind(null,e,Kt,tr),t);break}$r(e,Kt,tr);break;case 4:if(Ir(e,o),(o&4194240)===o)break;for(t=e.eventTimes,u=-1;0<o;){var g=31-Ln(o);f=1<<g,g=t[g],g>u&&(u=g),o&=~f}if(o=u,o=ct()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Bm(o/1960))-o,10<o){e.timeoutHandle=Uu($r.bind(null,e,Kt,tr),o);break}$r(e,Kt,tr);break;case 5:$r(e,Kt,tr);break;default:throw Error(J(329))}}}return en(e,ct()),e.callbackNode===r?Vd.bind(null,e):null}function sc(e,t){var r=js;return e.current.memoizedState.isDehydrated&&(ri(e,t).flags|=256),e=Ba(e,t),e!==2&&(t=Kt,Kt=r,t!==null&&oc(t)),e}function oc(e){Kt===null?Kt=e:Kt.push.apply(Kt,e)}function Pm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var u=r[o],f=u.getSnapshot;u=u.value;try{if(!Bn(f(),u))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ir(e,t){for(t&=~af,t&=~$a,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ln(t),o=1<<r;e[r]=-1,t&=~o}}function n0(e){if(Oe&6)throw Error(J(327));Wi();var t=wa(e,0);if(!(t&1))return en(e,ct()),null;var r=Ba(e,t);if(e.tag!==0&&r===2){var o=Mu(e);o!==0&&(t=o,r=sc(e,o))}if(r===1)throw r=so,ri(e,0),Ir(e,t),en(e,ct()),r;if(r===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,Kt,tr),en(e,ct()),null}function uf(e,t){var r=Oe;Oe|=1;try{return e(t)}finally{Oe=r,Oe===0&&(qi=ct()+500,Za&&Hr())}}function fi(e){Tr!==null&&Tr.tag===0&&!(Oe&6)&&Wi();var t=Oe;Oe|=1;var r=Cn.transition,o=Fe;try{if(Cn.transition=null,Fe=1,e)return e()}finally{Fe=o,Cn.transition=r,Oe=t,!(Oe&6)&&Hr()}}function cf(){sn=Pi.current,Ze(Pi)}function ri(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,dm(r)),dt!==null)for(r=dt.return;r!==null;){var o=r;switch(Hc(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Sa();break;case 3:Zi(),Ze(Jt),Ze(Pt),Jc();break;case 5:qc(o);break;case 4:Zi();break;case 13:Ze(tt);break;case 19:Ze(tt);break;case 10:Xc(o.type._context);break;case 22:case 23:cf()}r=r.return}if(It=e,dt=e=Br(e.current,null),Ot=sn=t,Et=0,so=null,af=$a=ci=0,Kt=js=null,ti!==null){for(t=0;t<ti.length;t++)if(r=ti[t],o=r.interleaved,o!==null){r.interleaved=null;var u=o.next,f=r.pending;if(f!==null){var g=f.next;f.next=u,o.next=g}r.pending=o}ti=null}return e}function Hd(e,t){do{var r=dt;try{if(Yc(),ia.current=ba,Ma){for(var o=nt.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Ma=!1}if(ui=0,St=yt=nt=null,Fs=!1,no=0,of.current=null,r===null||r.return===null){Et=1,so=t,dt=null;break}e:{var f=e,g=r.return,x=r,w=t;if(t=Ot,x.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var m=w,A=x,I=A.tag;if(!(A.mode&1)&&(I===0||I===11||I===15)){var O=A.alternate;O?(A.updateQueue=O.updateQueue,A.memoizedState=O.memoizedState,A.lanes=O.lanes):(A.updateQueue=null,A.memoizedState=null)}var L=H1(g);if(L!==null){L.flags&=-257,W1(L,g,x,f,t),L.mode&1&&V1(f,m,t),t=L,w=m;var F=t.updateQueue;if(F===null){var B=new Set;B.add(w),t.updateQueue=B}else F.add(w);break e}else{if(!(t&1)){V1(f,m,t),ff();break e}w=Error(J(426))}}else if(Je&&x.mode&1){var Y=H1(g);if(Y!==null){!(Y.flags&65536)&&(Y.flags|=256),W1(Y,g,x,f,t),Wc(Ki(w,x));break e}}f=w=Ki(w,x),Et!==4&&(Et=2),js===null?js=[f]:js.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var R=Td(f,w,t);B1(f,R);break e;case 1:x=w;var T=f.type,_=f.stateNode;if(!(f.flags&128)&&(typeof T.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Lr===null||!Lr.has(_)))){f.flags|=65536,t&=-t,f.lanes|=t;var k=Nd(f,x,t);B1(f,k);break e}}f=f.return}while(f!==null)}Yd(r)}catch(Q){t=Q,dt===r&&r!==null&&(dt=r=r.return);continue}break}while(!0)}function Wd(){var e=Da.current;return Da.current=ba,e===null?ba:e}function ff(){(Et===0||Et===3||Et===2)&&(Et=4),It===null||!(ci&268435455)&&!($a&268435455)||Ir(It,Ot)}function Ba(e,t){var r=Oe;Oe|=2;var o=Wd();(It!==e||Ot!==t)&&(tr=null,ri(e,t));do try{Fm();break}catch(u){Hd(e,u)}while(!0);if(Yc(),Oe=r,Da.current=o,dt!==null)throw Error(J(261));return It=null,Ot=0,Et}function Fm(){for(;dt!==null;)Gd(dt)}function Um(){for(;dt!==null&&!c2();)Gd(dt)}function Gd(e){var t=Qd(e.alternate,e,sn);e.memoizedProps=e.pendingProps,t===null?Yd(e):dt=t,of.current=null}function Yd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=bm(r,t),r!==null){r.flags&=32767,dt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Et=6,dt=null;return}}else if(r=Mm(r,t,sn),r!==null){dt=r;return}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);Et===0&&(Et=5)}function $r(e,t,r){var o=Fe,u=Cn.transition;try{Cn.transition=null,Fe=1,jm(e,t,r,o)}finally{Cn.transition=u,Fe=o}return null}function jm(e,t,r,o){do Wi();while(Tr!==null);if(Oe&6)throw Error(J(327));r=e.finishedWork;var u=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(E2(e,f),e===It&&(dt=It=null,Ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yo||(Yo=!0,Zd(xa,function(){return Wi(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=Cn.transition,Cn.transition=null;var g=Fe;Fe=1;var x=Oe;Oe|=4,of.current=null,Lm(e,r),jd(r,e),om(Pu),ya=!!Bu,Pu=Bu=null,e.current=r,km(r),f2(),Oe=x,Fe=g,Cn.transition=f}else e.current=r;if(Yo&&(Yo=!1,Tr=e,ka=u),f=e.pendingLanes,f===0&&(Lr=null),g2(r.stateNode),en(e,ct()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)u=t[r],o(u.value,{componentStack:u.stack,digest:u.digest});if(La)throw La=!1,e=rc,rc=null,e;return ka&1&&e.tag!==0&&Wi(),f=e.pendingLanes,f&1?e===ic?zs++:(zs=0,ic=e):zs=0,Hr(),null}function Wi(){if(Tr!==null){var e=Th(ka),t=Cn.transition,r=Fe;try{if(Cn.transition=null,Fe=16>e?16:e,Tr===null)var o=!1;else{if(e=Tr,Tr=null,ka=0,Oe&6)throw Error(J(331));var u=Oe;for(Oe|=4,oe=e.current;oe!==null;){var f=oe,g=f.child;if(oe.flags&16){var x=f.deletions;if(x!==null){for(var w=0;w<x.length;w++){var m=x[w];for(oe=m;oe!==null;){var A=oe;switch(A.tag){case 0:case 11:case 15:Us(8,A,f)}var I=A.child;if(I!==null)I.return=A,oe=I;else for(;oe!==null;){A=oe;var O=A.sibling,L=A.return;if(Pd(A),A===m){oe=null;break}if(O!==null){O.return=L,oe=O;break}oe=L}}}var F=f.alternate;if(F!==null){var B=F.child;if(B!==null){F.child=null;do{var Y=B.sibling;B.sibling=null,B=Y}while(B!==null)}}oe=f}}if(f.subtreeFlags&2064&&g!==null)g.return=f,oe=g;else e:for(;oe!==null;){if(f=oe,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Us(9,f,f.return)}var R=f.sibling;if(R!==null){R.return=f.return,oe=R;break e}oe=f.return}}var T=e.current;for(oe=T;oe!==null;){g=oe;var _=g.child;if(g.subtreeFlags&2064&&_!==null)_.return=g,oe=_;else e:for(g=T;oe!==null;){if(x=oe,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:Ja(9,x)}}catch(Q){lt(x,x.return,Q)}if(x===g){oe=null;break e}var k=x.sibling;if(k!==null){k.return=x.return,oe=k;break e}oe=x.return}}if(Oe=u,Hr(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Wa,e)}catch{}o=!0}return o}finally{Fe=r,Cn.transition=t}}return!1}function r0(e,t,r){t=Ki(r,t),t=Td(e,t,1),e=Dr(e,t,1),t=zt(),e!==null&&(co(e,1,t),en(e,t))}function lt(e,t,r){if(e.tag===3)r0(e,e,r);else for(;t!==null;){if(t.tag===3){r0(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Lr===null||!Lr.has(o))){e=Ki(r,e),e=Nd(t,e,1),t=Dr(t,e,1),e=zt(),t!==null&&(co(t,1,e),en(t,e));break}}t=t.return}}function zm(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=zt(),e.pingedLanes|=e.suspendedLanes&r,It===e&&(Ot&r)===r&&(Et===4||Et===3&&(Ot&130023424)===Ot&&500>ct()-lf?ri(e,0):af|=r),en(e,t)}function Xd(e,t){t===0&&(e.mode&1?(t=Bo,Bo<<=1,!(Bo&130023424)&&(Bo=4194304)):t=1);var r=zt();e=ur(e,t),e!==null&&(co(e,t,r),en(e,r))}function Vm(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Xd(e,r)}function Hm(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(J(314))}o!==null&&o.delete(t),Xd(e,r)}var Qd;Qd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jt.current)qt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qt=!1,Om(e,t,r);qt=!!(e.flags&131072)}else qt=!1,Je&&t.flags&1048576&&Jh(t,Ta,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;oa(e,t),e=t.pendingProps;var u=Yi(t,Pt.current);Hi(t,r),u=ef(null,t,o,e,u,r);var f=tf();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$t(o)?(f=!0,Ia(t)):f=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Zc(t),u.updater=qa,t.stateNode=u,u._reactInternals=t,Yu(t,o,e,r),t=Zu(null,t,o,!0,f,r)):(t.tag=0,Je&&f&&Vc(t),jt(null,t,u,r),t=t.child),t;case 16:o=t.elementType;e:{switch(oa(e,t),e=t.pendingProps,u=o._init,o=u(o._payload),t.type=o,u=t.tag=Gm(o),e=Rn(o,e),u){case 0:t=Qu(null,t,o,e,r);break e;case 1:t=X1(null,t,o,e,r);break e;case 11:t=G1(null,t,o,e,r);break e;case 14:t=Y1(null,t,o,Rn(o.type,e),r);break e}throw Error(J(306,o,""))}return t;case 0:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Rn(o,u),Qu(e,t,o,u,r);case 1:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Rn(o,u),X1(e,t,o,u,r);case 3:e:{if(Md(t),e===null)throw Error(J(387));o=t.pendingProps,f=t.memoizedState,u=f.element,id(e,t),Ra(t,o,null,r);var g=t.memoizedState;if(o=g.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){u=Ki(Error(J(423)),t),t=Q1(e,t,o,r,u);break e}else if(o!==u){u=Ki(Error(J(424)),t),t=Q1(e,t,o,r,u);break e}else for(an=br(t.stateNode.containerInfo.firstChild),ln=t,Je=!0,Dn=null,r=nd(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xi(),o===u){t=cr(e,t,r);break e}jt(e,t,o,r)}t=t.child}return t;case 5:return sd(t),e===null&&Hu(t),o=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,g=u.children,Fu(o,u)?g=null:f!==null&&Fu(o,f)&&(t.flags|=32),Od(e,t),jt(e,t,g,r),t.child;case 6:return e===null&&Hu(t),null;case 13:return bd(e,t,r);case 4:return Kc(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Qi(t,null,o,r):jt(e,t,o,r),t.child;case 11:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Rn(o,u),G1(e,t,o,u,r);case 7:return jt(e,t,t.pendingProps,r),t.child;case 8:return jt(e,t,t.pendingProps.children,r),t.child;case 12:return jt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,u=t.pendingProps,f=t.memoizedProps,g=u.value,Ge(Na,o._currentValue),o._currentValue=g,f!==null)if(Bn(f.value,g)){if(f.children===u.children&&!Jt.current){t=cr(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var x=f.dependencies;if(x!==null){g=f.child;for(var w=x.firstContext;w!==null;){if(w.context===o){if(f.tag===1){w=or(-1,r&-r),w.tag=2;var m=f.updateQueue;if(m!==null){m=m.shared;var A=m.pending;A===null?w.next=w:(w.next=A.next,A.next=w),m.pending=w}}f.lanes|=r,w=f.alternate,w!==null&&(w.lanes|=r),Wu(f.return,r,t),x.lanes|=r;break}w=w.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(J(341));g.lanes|=r,x=g.alternate,x!==null&&(x.lanes|=r),Wu(g,r,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}jt(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,o=t.pendingProps.children,Hi(t,r),u=An(u),o=o(u),t.flags|=1,jt(e,t,o,r),t.child;case 14:return o=t.type,u=Rn(o,t.pendingProps),u=Rn(o.type,u),Y1(e,t,o,u,r);case 15:return _d(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Rn(o,u),oa(e,t),t.tag=1,$t(o)?(e=!0,Ia(t)):e=!1,Hi(t,r),vd(t,o,u),Yu(t,o,u,r),Zu(null,t,o,!0,e,r);case 19:return Dd(e,t,r);case 22:return Rd(e,t,r)}throw Error(J(156,t.tag))};function Zd(e,t){return Ah(e,t)}function Wm(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(e,t,r,o){return new Wm(e,t,r,o)}function hf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gm(e){if(typeof e=="function")return hf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oc)return 11;if(e===Mc)return 14}return 2}function Br(e,t){var r=e.alternate;return r===null?(r=En(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ua(e,t,r,o,u,f){var g=2;if(o=e,typeof e=="function")hf(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Ni:return ii(r.children,u,f,t);case Rc:g=8,u|=8;break;case mu:return e=En(12,r,t,u|2),e.elementType=mu,e.lanes=f,e;case xu:return e=En(13,r,t,u),e.elementType=xu,e.lanes=f,e;case wu:return e=En(19,r,t,u),e.elementType=wu,e.lanes=f,e;case sh:return el(r,u,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rh:g=10;break e;case ih:g=9;break e;case Oc:g=11;break e;case Mc:g=14;break e;case Cr:g=16,o=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=En(g,r,t,u),t.elementType=e,t.type=o,t.lanes=f,t}function ii(e,t,r,o){return e=En(7,e,o,t),e.lanes=r,e}function el(e,t,r,o){return e=En(22,e,o,t),e.elementType=sh,e.lanes=r,e.stateNode={isHidden:!1},e}function ru(e,t,r){return e=En(6,e,null,t),e.lanes=r,e}function iu(e,t,r){return t=En(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ym(e,t,r,o,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fl(0),this.expirationTimes=Fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function df(e,t,r,o,u,f,g,x,w){return e=new Ym(e,t,r,x,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=En(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(f),e}function Xm(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function Kd(e){if(!e)return Ur;e=e._reactInternals;e:{if(di(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var r=e.type;if($t(r))return Kh(e,r,t)}return t}function qd(e,t,r,o,u,f,g,x,w){return e=df(r,o,!0,e,u,f,g,x,w),e.context=Kd(null),r=e.current,o=zt(),u=kr(r),f=or(o,u),f.callback=t??null,Dr(r,f,u),e.current.lanes=u,co(e,u,o),en(e,o),e}function tl(e,t,r,o){var u=t.current,f=zt(),g=kr(u);return r=Kd(r),t.context===null?t.context=r:t.pendingContext=r,t=or(f,g),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Dr(u,t,g),e!==null&&(kn(e,u,g,f),ra(e,u,g)),g}function Pa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function i0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gf(e,t){i0(e,t),(e=e.alternate)&&i0(e,t)}function Qm(){return null}var Jd=typeof reportError=="function"?reportError:function(e){console.error(e)};function pf(e){this._internalRoot=e}nl.prototype.render=pf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));tl(e,t,null,null)};nl.prototype.unmount=pf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fi(function(){tl(null,e,null,null)}),t[lr]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Sr.length&&t!==0&&t<Sr[r].priority;r++);Sr.splice(r,0,e),r===0&&Mh(e)}};function mf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function s0(){}function Zm(e,t,r,o,u){if(u){if(typeof o=="function"){var f=o;o=function(){var m=Pa(g);f.call(m)}}var g=qd(t,o,e,0,null,!1,!1,"",s0);return e._reactRootContainer=g,e[lr]=g.current,qs(e.nodeType===8?e.parentNode:e),fi(),g}for(;u=e.lastChild;)e.removeChild(u);if(typeof o=="function"){var x=o;o=function(){var m=Pa(w);x.call(m)}}var w=df(e,0,!1,null,null,!1,!1,"",s0);return e._reactRootContainer=w,e[lr]=w.current,qs(e.nodeType===8?e.parentNode:e),fi(function(){tl(t,w,r,o)}),w}function il(e,t,r,o,u){var f=r._reactRootContainer;if(f){var g=f;if(typeof u=="function"){var x=u;u=function(){var w=Pa(g);x.call(w)}}tl(t,g,e,u)}else g=Zm(r,t,e,u,o);return Pa(g)}Nh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Os(t.pendingLanes);r!==0&&(Lc(t,r|1),en(t,ct()),!(Oe&6)&&(qi=ct()+500,Hr()))}break;case 13:fi(function(){var o=ur(e,1);if(o!==null){var u=zt();kn(o,e,1,u)}}),gf(e,1)}};kc=function(e){if(e.tag===13){var t=ur(e,134217728);if(t!==null){var r=zt();kn(t,e,134217728,r)}gf(e,134217728)}};_h=function(e){if(e.tag===13){var t=kr(e),r=ur(e,t);if(r!==null){var o=zt();kn(r,e,t,o)}gf(e,t)}};Rh=function(){return Fe};Oh=function(e,t){var r=Fe;try{return Fe=e,t()}finally{Fe=r}};_u=function(e,t,r){switch(t){case"input":if(Cu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var u=Qa(o);if(!u)throw Error(J(90));ah(o),Cu(o,u)}}}break;case"textarea":uh(e,r);break;case"select":t=r.value,t!=null&&Ui(e,!!r.multiple,t,!1)}};mh=uf;xh=fi;var Km={usingClientEntryPoint:!1,Events:[ho,Mi,Qa,gh,ph,uf]},Ts={findFiberByHostInstance:ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qm={bundleType:Ts.bundleType,version:Ts.version,rendererPackageName:Ts.rendererPackageName,rendererConfig:Ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Eh(e),e===null?null:e.stateNode},findFiberByHostInstance:Ts.findFiberByHostInstance||Qm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{Wa=Xo.inject(qm),Zn=Xo}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Km;cn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(t))throw Error(J(200));return Xm(e,t,null,r)};cn.createRoot=function(e,t){if(!mf(e))throw Error(J(299));var r=!1,o="",u=Jd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=df(e,1,!1,null,null,r,!1,o,u),e[lr]=t.current,qs(e.nodeType===8?e.parentNode:e),new pf(t)};cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Eh(t),e=e===null?null:e.stateNode,e};cn.flushSync=function(e){return fi(e)};cn.hydrate=function(e,t,r){if(!rl(t))throw Error(J(200));return il(null,e,t,!0,r)};cn.hydrateRoot=function(e,t,r){if(!mf(e))throw Error(J(405));var o=r!=null&&r.hydratedSources||null,u=!1,f="",g=Jd;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=qd(t,null,e,1,r??null,u,!1,f,g),e[lr]=t.current,qs(e),o)for(e=0;e<o.length;e++)r=o[e],u=r._getVersion,u=u(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,u]:t.mutableSourceEagerHydrationData.push(r,u);return new nl(t)};cn.render=function(e,t,r){if(!rl(t))throw Error(J(200));return il(null,e,t,!1,r)};cn.unmountComponentAtNode=function(e){if(!rl(e))throw Error(J(40));return e._reactRootContainer?(fi(function(){il(null,null,e,!1,function(){e._reactRootContainer=null,e[lr]=null})}),!0):!1};cn.unstable_batchedUpdates=uf;cn.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!rl(r))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return il(e,t,r,!1,o)};cn.version="18.3.1-next-f1338f8080-20240426";function $d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($d)}catch(e){console.error(e)}}$d(),$0.exports=cn;var Jm=$0.exports,o0=Jm;gu.createRoot=o0.createRoot,gu.hydrateRoot=o0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},oo.apply(this,arguments)}var Nr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nr||(Nr={}));const a0="popstate";function $m(e){e===void 0&&(e={});function t(o,u){let{pathname:f,search:g,hash:x}=o.location;return ac("",{pathname:f,search:g,hash:x},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(o,u){return typeof u=="string"?u:eg(u)}return tx(t,r,null,e)}function pt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ex(){return Math.random().toString(36).substr(2,8)}function l0(e,t){return{usr:e.state,key:e.key,idx:t}}function ac(e,t,r,o){return r===void 0&&(r=null),oo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ss(t):t,{state:r,key:t&&t.key||o||ex()})}function eg(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function ss(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function tx(e,t,r,o){o===void 0&&(o={});let{window:u=document.defaultView,v5Compat:f=!1}=o,g=u.history,x=Nr.Pop,w=null,m=A();m==null&&(m=0,g.replaceState(oo({},g.state,{idx:m}),""));function A(){return(g.state||{idx:null}).idx}function I(){x=Nr.Pop;let Y=A(),R=Y==null?null:Y-m;m=Y,w&&w({action:x,location:B.location,delta:R})}function O(Y,R){x=Nr.Push;let T=ac(B.location,Y,R);m=A()+1;let _=l0(T,m),k=B.createHref(T);try{g.pushState(_,"",k)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;u.location.assign(k)}f&&w&&w({action:x,location:B.location,delta:1})}function L(Y,R){x=Nr.Replace;let T=ac(B.location,Y,R);m=A();let _=l0(T,m),k=B.createHref(T);g.replaceState(_,"",k),f&&w&&w({action:x,location:B.location,delta:0})}function F(Y){let R=u.location.origin!=="null"?u.location.origin:u.location.href,T=typeof Y=="string"?Y:eg(Y);return T=T.replace(/ $/,"%20"),pt(R,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,R)}let B={get action(){return x},get location(){return e(u,g)},listen(Y){if(w)throw new Error("A history only accepts one active listener");return u.addEventListener(a0,I),w=Y,()=>{u.removeEventListener(a0,I),w=null}},createHref(Y){return t(u,Y)},createURL:F,encodeLocation(Y){let R=F(Y);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:O,replace:L,go(Y){return g.go(Y)}};return B}var u0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(u0||(u0={}));function nx(e,t,r){return r===void 0&&(r="/"),rx(e,t,r)}function rx(e,t,r,o){let u=typeof t=="string"?ss(t):t,f=rg(u.pathname||"/",r);if(f==null)return null;let g=tg(e);ix(g);let x=null;for(let w=0;x==null&&w<g.length;++w){let m=mx(f);x=dx(g[w],m)}return x}function tg(e,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let u=(f,g,x)=>{let w={relativePath:x===void 0?f.path||"":x,caseSensitive:f.caseSensitive===!0,childrenIndex:g,route:f};w.relativePath.startsWith("/")&&(pt(w.relativePath.startsWith(o),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(o.length));let m=si([o,w.relativePath]),A=r.concat(w);f.children&&f.children.length>0&&(pt(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),tg(f.children,t,A,m)),!(f.path==null&&!f.index)&&t.push({path:m,score:fx(m,f.index),routesMeta:A})};return e.forEach((f,g)=>{var x;if(f.path===""||!((x=f.path)!=null&&x.includes("?")))u(f,g);else for(let w of ng(f.path))u(f,g,w)}),t}function ng(e){let t=e.split("/");if(t.length===0)return[];let[r,...o]=t,u=r.endsWith("?"),f=r.replace(/\?$/,"");if(o.length===0)return u?[f,""]:[f];let g=ng(o.join("/")),x=[];return x.push(...g.map(w=>w===""?f:[f,w].join("/"))),u&&x.push(...g),x.map(w=>e.startsWith("/")&&w===""?"/":w)}function ix(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hx(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const sx=/^:[\w-]+$/,ox=3,ax=2,lx=1,ux=10,cx=-2,c0=e=>e==="*";function fx(e,t){let r=e.split("/"),o=r.length;return r.some(c0)&&(o+=cx),t&&(o+=ax),r.filter(u=>!c0(u)).reduce((u,f)=>u+(sx.test(f)?ox:f===""?lx:ux),o)}function hx(e,t){return e.length===t.length&&e.slice(0,-1).every((o,u)=>o===t[u])?e[e.length-1]-t[t.length-1]:0}function dx(e,t,r){let{routesMeta:o}=e,u={},f="/",g=[];for(let x=0;x<o.length;++x){let w=o[x],m=x===o.length-1,A=f==="/"?t:t.slice(f.length)||"/",I=gx({path:w.relativePath,caseSensitive:w.caseSensitive,end:m},A),O=w.route;if(!I)return null;Object.assign(u,I.params),g.push({params:u,pathname:si([f,I.pathname]),pathnameBase:Cx(si([f,I.pathnameBase])),route:O}),I.pathnameBase!=="/"&&(f=si([f,I.pathnameBase]))}return g}function gx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=px(e.path,e.caseSensitive,e.end),u=t.match(r);if(!u)return null;let f=u[0],g=f.replace(/(.)\/+$/,"$1"),x=u.slice(1);return{params:o.reduce((m,A,I)=>{let{paramName:O,isOptional:L}=A;if(O==="*"){let B=x[I]||"";g=f.slice(0,f.length-B.length).replace(/(.)\/+$/,"$1")}const F=x[I];return L&&!F?m[O]=void 0:m[O]=(F||"").replace(/%2F/g,"/"),m},{}),pathname:f,pathnameBase:g,pattern:e}}function px(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),xf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,x,w)=>(o.push({paramName:x,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),o]}function mx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xf(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function rg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&o!=="/"?null:e.slice(r)||"/"}const xx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wx=e=>xx.test(e);function yx(e,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:u=""}=typeof e=="string"?ss(e):e,f;if(r)if(wx(r))f=r;else{if(r.includes("//")){let g=r;r=r.replace(/\/\/+/g,"/"),xf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(g+" -> "+r))}r.startsWith("/")?f=f0(r.substring(1),"/"):f=f0(r,t)}else f=t;return{pathname:f,search:Ax(o),hash:Sx(u)}}function f0(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function su(e,t,r,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ex(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ig(e,t){let r=Ex(e);return t?r.map((o,u)=>u===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function sg(e,t,r,o){o===void 0&&(o=!1);let u;typeof e=="string"?u=ss(e):(u=oo({},e),pt(!u.pathname||!u.pathname.includes("?"),su("?","pathname","search",u)),pt(!u.pathname||!u.pathname.includes("#"),su("#","pathname","hash",u)),pt(!u.search||!u.search.includes("#"),su("#","search","hash",u)));let f=e===""||u.pathname==="",g=f?"/":u.pathname,x;if(g==null)x=r;else{let I=t.length-1;if(!o&&g.startsWith("..")){let O=g.split("/");for(;O[0]==="..";)O.shift(),I-=1;u.pathname=O.join("/")}x=I>=0?t[I]:"/"}let w=yx(u,x),m=g&&g!=="/"&&g.endsWith("/"),A=(f||g===".")&&r.endsWith("/");return!w.pathname.endsWith("/")&&(m||A)&&(w.pathname+="/"),w}const si=e=>e.join("/").replace(/\/\/+/g,"/"),Cx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ax=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ix(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const og=["post","put","patch","delete"];new Set(og);const vx=["get",...og];new Set(vx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ao.apply(this,arguments)}const wf=K.createContext(null),Tx=K.createContext(null),po=K.createContext(null),sl=K.createContext(null),gi=K.createContext({outlet:null,matches:[],isDataRoute:!1}),ag=K.createContext(null);function mo(){return K.useContext(sl)!=null}function yf(){return mo()||pt(!1),K.useContext(sl).location}function lg(e){K.useContext(po).static||K.useLayoutEffect(e)}function Nx(){let{isDataRoute:e}=K.useContext(gi);return e?jx():_x()}function _x(){mo()||pt(!1);let e=K.useContext(wf),{basename:t,future:r,navigator:o}=K.useContext(po),{matches:u}=K.useContext(gi),{pathname:f}=yf(),g=JSON.stringify(ig(u,r.v7_relativeSplatPath)),x=K.useRef(!1);return lg(()=>{x.current=!0}),K.useCallback(function(m,A){if(A===void 0&&(A={}),!x.current)return;if(typeof m=="number"){o.go(m);return}let I=sg(m,JSON.parse(g),f,A.relative==="path");e==null&&t!=="/"&&(I.pathname=I.pathname==="/"?t:si([t,I.pathname])),(A.replace?o.replace:o.push)(I,A.state,A)},[t,o,g,f,e])}function Rx(e,t){return Ox(e,t)}function Ox(e,t,r,o){mo()||pt(!1);let{navigator:u}=K.useContext(po),{matches:f}=K.useContext(gi),g=f[f.length-1],x=g?g.params:{};g&&g.pathname;let w=g?g.pathnameBase:"/";g&&g.route;let m=yf(),A;if(t){var I;let Y=typeof t=="string"?ss(t):t;w==="/"||(I=Y.pathname)!=null&&I.startsWith(w)||pt(!1),A=Y}else A=m;let O=A.pathname||"/",L=O;if(w!=="/"){let Y=w.replace(/^\//,"").split("/");L="/"+O.replace(/^\//,"").split("/").slice(Y.length).join("/")}let F=nx(e,{pathname:L}),B=kx(F&&F.map(Y=>Object.assign({},Y,{params:Object.assign({},x,Y.params),pathname:si([w,u.encodeLocation?u.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?w:si([w,u.encodeLocation?u.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),f,r,o);return t&&B?K.createElement(sl.Provider,{value:{location:ao({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:Nr.Pop}},B):B}function Mx(){let e=Ux(),t=Ix(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},t),r?K.createElement("pre",{style:u},r):null,null)}const bx=K.createElement(Mx,null);class Dx extends K.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?K.createElement(gi.Provider,{value:this.props.routeContext},K.createElement(ag.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lx(e){let{routeContext:t,match:r,children:o}=e,u=K.useContext(wf);return u&&u.static&&u.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=r.route.id),K.createElement(gi.Provider,{value:t},o)}function kx(e,t,r,o){var u;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),e==null){var f;if(!r)return null;if(r.errors)e=r.matches;else if((f=o)!=null&&f.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let g=e,x=(u=r)==null?void 0:u.errors;if(x!=null){let A=g.findIndex(I=>I.route.id&&(x==null?void 0:x[I.route.id])!==void 0);A>=0||pt(!1),g=g.slice(0,Math.min(g.length,A+1))}let w=!1,m=-1;if(r&&o&&o.v7_partialHydration)for(let A=0;A<g.length;A++){let I=g[A];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(m=A),I.route.id){let{loaderData:O,errors:L}=r,F=I.route.loader&&O[I.route.id]===void 0&&(!L||L[I.route.id]===void 0);if(I.route.lazy||F){w=!0,m>=0?g=g.slice(0,m+1):g=[g[0]];break}}}return g.reduceRight((A,I,O)=>{let L,F=!1,B=null,Y=null;r&&(L=x&&I.route.id?x[I.route.id]:void 0,B=I.route.errorElement||bx,w&&(m<0&&O===0?(zx("route-fallback"),F=!0,Y=null):m===O&&(F=!0,Y=I.route.hydrateFallbackElement||null)));let R=t.concat(g.slice(0,O+1)),T=()=>{let _;return L?_=B:F?_=Y:I.route.Component?_=K.createElement(I.route.Component,null):I.route.element?_=I.route.element:_=A,K.createElement(Lx,{match:I,routeContext:{outlet:A,matches:R,isDataRoute:r!=null},children:_})};return r&&(I.route.ErrorBoundary||I.route.errorElement||O===0)?K.createElement(Dx,{location:r.location,revalidation:r.revalidation,component:B,error:L,children:T(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):T()},null)}var ug=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ug||{}),cg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cg||{});function Bx(e){let t=K.useContext(wf);return t||pt(!1),t}function Px(e){let t=K.useContext(Tx);return t||pt(!1),t}function Fx(e){let t=K.useContext(gi);return t||pt(!1),t}function fg(e){let t=Fx(),r=t.matches[t.matches.length-1];return r.route.id||pt(!1),r.route.id}function Ux(){var e;let t=K.useContext(ag),r=Px(),o=fg();return t!==void 0?t:(e=r.errors)==null?void 0:e[o]}function jx(){let{router:e}=Bx(ug.UseNavigateStable),t=fg(cg.UseNavigateStable),r=K.useRef(!1);return lg(()=>{r.current=!0}),K.useCallback(function(u,f){f===void 0&&(f={}),r.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,ao({fromRouteId:t},f)))},[e,t])}const h0={};function zx(e,t,r){h0[e]||(h0[e]=!0)}function Vx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function d0(e){let{to:t,replace:r,state:o,relative:u}=e;mo()||pt(!1);let{future:f,static:g}=K.useContext(po),{matches:x}=K.useContext(gi),{pathname:w}=yf(),m=Nx(),A=sg(t,ig(x,f.v7_relativeSplatPath),w,u==="path"),I=JSON.stringify(A);return K.useEffect(()=>m(JSON.parse(I),{replace:r,state:o,relative:u}),[m,I,u,r,o]),null}function lc(e){pt(!1)}function Hx(e){let{basename:t="/",children:r=null,location:o,navigationType:u=Nr.Pop,navigator:f,static:g=!1,future:x}=e;mo()&&pt(!1);let w=t.replace(/^\/*/,"/"),m=K.useMemo(()=>({basename:w,navigator:f,static:g,future:ao({v7_relativeSplatPath:!1},x)}),[w,x,f,g]);typeof o=="string"&&(o=ss(o));let{pathname:A="/",search:I="",hash:O="",state:L=null,key:F="default"}=o,B=K.useMemo(()=>{let Y=rg(A,w);return Y==null?null:{location:{pathname:Y,search:I,hash:O,state:L,key:F},navigationType:u}},[w,A,I,O,L,F,u]);return B==null?null:K.createElement(po.Provider,{value:m},K.createElement(sl.Provider,{children:r,value:B}))}function Wx(e){let{children:t,location:r}=e;return Rx(uc(t),r)}new Promise(()=>{});function uc(e,t){t===void 0&&(t=[]);let r=[];return K.Children.forEach(e,(o,u)=>{if(!K.isValidElement(o))return;let f=[...t,u];if(o.type===K.Fragment){r.push.apply(r,uc(o.props.children,f));return}o.type!==lc&&pt(!1),!o.props.index||!o.props.children||pt(!1);let g={id:o.props.id||f.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(g.children=uc(o.props.children,f)),r.push(g)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Gx="6";try{window.__reactRouterVersion=Gx}catch{}const Yx="startTransition",g0=zp[Yx];function Xx(e){let{basename:t,children:r,future:o,window:u}=e,f=K.useRef();f.current==null&&(f.current=$m({window:u,v5Compat:!0}));let g=f.current,[x,w]=K.useState({action:g.action,location:g.location}),{v7_startTransition:m}=o||{},A=K.useCallback(I=>{m&&g0?g0(()=>w(I)):w(I)},[w,m]);return K.useLayoutEffect(()=>g.listen(A),[g,A]),K.useEffect(()=>Vx(o),[o]),K.createElement(Hx,{basename:t,children:r,location:x.location,navigationType:x.action,navigator:g,future:o})}var p0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(p0||(p0={}));var m0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(m0||(m0={}));const Qx=()=>{const[e,t]=K.useState(""),[r,o]=K.useState(""),[u,f]=K.useState(!1),{login:g}=K.useContext(hl),x=()=>{const m=new(window.AudioContext||window.webkitAudioContext),A=m.createOscillator(),I=m.createGain();A.connect(I),I.connect(m.destination),A.type="sawtooth",A.frequency.setValueAtTime(150,m.currentTime),A.frequency.exponentialRampToValueAtTime(40,m.currentTime+.5),I.gain.setValueAtTime(.5,m.currentTime),I.gain.exponentialRampToValueAtTime(.01,m.currentTime+.5),A.start(),A.stop(m.currentTime+.5)},w=async m=>{m.preventDefault(),f(!1);try{const A=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})});if(A.ok){const I=await A.json();g(I.token,I.user)}else throw new Error("Login failed")}catch{f(!0),x()}};return j.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column"},children:j.jsxs("div",{className:"hologram-box",style:{width:"300px",textAlign:"center"},children:[j.jsx("h2",{className:"hologram-text flicker",children:"Identity Check"}),j.jsxs("form",{onSubmit:w,children:[j.jsx("input",{type:"text",className:"sw-input",placeholder:"Identity Code",value:e,onChange:m=>t(m.target.value)}),j.jsx("input",{type:"password",className:"sw-input",placeholder:"Passcode",value:r,onChange:m=>o(m.target.value)}),j.jsx("button",{type:"submit",className:"sw-btn",style:{width:"100%"},children:"Authenticate"})]}),u&&j.jsx("div",{style:{color:"var(--sw-red)",marginTop:"10px",textTransform:"uppercase"},className:"flicker",children:"Access Denied"})]})})},Zx=({onCapture:e,onCancel:t,mode:r="video"})=>{const o=K.useRef(null),[u,f]=K.useState(null),[g,x]=K.useState(!1),[w,m]=K.useState(0),[A,I]=K.useState(!1),[O,L]=K.useState(null),[F,B]=K.useState(!1),Y=K.useRef(null),R=K.useRef([]);K.useEffect(()=>((async()=>{try{const H={video:r!=="audio",audio:!0},ue=await navigator.mediaDevices.getUserMedia(H);f(ue),o.current&&r!=="audio"&&(o.current.srcObject=ue)}catch(H){console.error("Error accessing media devices:",H),alert("Could not access camera/microphone. Please ensure permissions are granted."),t()}})(),()=>{u&&u.getTracks().forEach(H=>H.stop())}),[r]);const T=()=>{m(3);let W=3;const H=setInterval(()=>{W--,m(W),W===0&&(clearInterval(H),r==="image"?Q():_())},1e3)},_=()=>{R.current=[];const W=new MediaRecorder(u);Y.current=W,W.ondataavailable=H=>{H.data.size>0&&R.current.push(H.data)},W.onstop=()=>{const H=new Blob(R.current,{type:r==="video"?"video/webm":"audio/webm"});L(H),I(!0),x(!1)},W.start(),x(!0),r==="video"&&setTimeout(()=>{W.state==="recording"&&W.stop()},5e3)},k=()=>{Y.current&&Y.current.state==="recording"&&Y.current.stop()},Q=()=>{const W=document.createElement("canvas");W.width=o.current.videoWidth,W.height=o.current.videoHeight,W.getContext("2d").drawImage(o.current,0,0),W.toBlob(H=>{L(H),I(!0)},"image/png")},X=()=>{if(!O)return;const W=r==="image"?"png":"webm",H=r==="image"?"image/png":r==="video"?"video/webm":"audio/webm",ue=new File([O],`capture.${W}`,{type:H});e(ue,r)},b=()=>{L(null),I(!1),m(0),B(!1)};if(A&&O){const W=URL.createObjectURL(O);return j.jsxs("div",{className:"hologram-box",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:100,display:"flex",flexDirection:"column",background:"black"},children:[j.jsx("h3",{className:"hologram-text",style:{textAlign:"center",margin:"10px 0"},children:"REVIEW TRANSMISSION"}),j.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",background:"#000"},children:[r==="image"&&j.jsx("img",{src:W,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}),r==="video"&&j.jsx("video",{src:W,controls:F,autoPlay:F,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}),r==="audio"&&j.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[j.jsx("div",{className:"hologram-text",style:{fontSize:"2rem"},children:"AUDIO RECORDED"}),F&&j.jsx("audio",{src:W,controls:!0,autoPlay:!0})]})]}),j.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"10px"},children:[(r==="video"||r==="audio")&&!F&&j.jsxs("button",{className:"sw-btn",onClick:()=>B(!0),children:["REVOIR ",r==="video"?"LA VIDO":"L'AUDIO"]}),j.jsxs("div",{style:{display:"flex",gap:"10px"},children:[j.jsx("button",{className:"sw-btn danger",style:{flex:1},onClick:b,children:"ANNULER"}),j.jsx("button",{className:"sw-btn",style:{flex:1},onClick:X,children:"ENVOYER"})]})]})]})}return j.jsxs("div",{className:"hologram-box",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:100,display:"flex",flexDirection:"column",background:"black"},children:[w>0&&j.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",zIndex:200,background:"rgba(0,0,0,0.5)"},children:j.jsx("div",{className:"hologram-text",style:{fontSize:"10rem"},children:w})}),r!=="audio"&&j.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,style:{width:"100%",flex:1,objectFit:"cover"}}),r==="audio"&&j.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:j.jsx("div",{className:"flicker",style:{fontSize:"3rem",color:"var(--sw-blue)"},children:g?"RECORDING...":"READY TO RECORD"})}),j.jsxs("div",{style:{padding:"20px",display:"flex",justifyContent:"space-around"},children:[j.jsx("button",{className:"sw-btn danger",onClick:t,disabled:g,children:"Cancel"}),!g&&j.jsx("button",{className:"sw-btn",onClick:T,children:r==="image"?"SNAP":"REC"}),g&&r==="audio"&&j.jsx("button",{className:"sw-btn danger",onClick:k,children:"STOP"})]})]})};var se;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var x0=new Map([[se.QR_CODE,"QR_CODE"],[se.AZTEC,"AZTEC"],[se.CODABAR,"CODABAR"],[se.CODE_39,"CODE_39"],[se.CODE_93,"CODE_93"],[se.CODE_128,"CODE_128"],[se.DATA_MATRIX,"DATA_MATRIX"],[se.MAXICODE,"MAXICODE"],[se.ITF,"ITF"],[se.EAN_13,"EAN_13"],[se.EAN_8,"EAN_8"],[se.PDF_417,"PDF_417"],[se.RSS_14,"RSS_14"],[se.RSS_EXPANDED,"RSS_EXPANDED"],[se.UPC_A,"UPC_A"],[se.UPC_E,"UPC_E"],[se.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),w0;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(w0||(w0={}));function Kx(e){return Object.values(se).includes(e)}var jr;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(jr||(jr={}));var Mn=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[jr.SCAN_TYPE_CAMERA,jr.SCAN_TYPE_FILE],e}(),hg=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!x0.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,x0.get(t))},e}(),y0=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),cc;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(cc||(cc={}));var dg=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:cc.UNKWOWN_ERROR}},e}(),gg=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Xn(e){return typeof e>"u"||e===null}function qx(e,t,r){return e>r?r:e<t?t:e}var Fi=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Pe=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),E0=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),pg=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var o=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(u),g=Object.keys(t),x=0,w=g;x<w.length;x++){var m=w[x];if(f.has(m))return r.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e}(),fc={exports:{}};(function(e,t){(function(r,o){o(t)})(ws,function(r){function o(E){return E==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,n){E.__proto__=n}||function(E,n){for(var i in n)n.hasOwnProperty(i)&&(E[i]=n[i])};function f(E,n){u(E,n);function i(){this.constructor=E}E.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function g(E,n){var i=Object.setPrototypeOf;i?i(E,n):E.__proto__=n}function x(E,n){n===void 0&&(n=E.constructor);var i=Error.captureStackTrace;i&&i(E,n)}var w=function(E){f(n,E);function n(i){var s=this.constructor,a=E.call(this,i)||this;return Object.defineProperty(a,"name",{value:s.name,enumerable:!1}),g(a,s.prototype),x(a),a}return n}(Error);class m extends w{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}m.kind="Exception";class A extends m{}A.kind="ArgumentException";class I extends m{}I.kind="IllegalArgumentException";class O{constructor(n){if(this.binarizer=n,n===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,s,a){const l=this.binarizer.getLuminanceSource().crop(n,i,s,a);return new O(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class L extends m{static getChecksumInstance(){return new L}}L.kind="ChecksumException";class F{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(n,i,s,a,l){for(;l--;)s[a++]=n[i++]}static currentTimeMillis(){return Date.now()}}class Y extends m{}Y.kind="IndexOutOfBoundsException";class R extends Y{constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}R.kind="ArrayIndexOutOfBoundsException";class T{static fill(n,i){for(let s=0,a=n.length;s<a;s++)n[s]=i}static fillWithin(n,i,s,a){T.rangeCheck(n.length,i,s);for(let l=i;l<s;l++)n[l]=a}static rangeCheck(n,i,s){if(i>s)throw new I("fromIndex("+i+") > toIndex("+s+")");if(i<0)throw new R(i);if(s>n)throw new R(s)}static asList(...n){return n}static create(n,i,s){return Array.from({length:n}).map(l=>Array.from({length:i}).fill(s))}static createInt32Array(n,i,s){return Array.from({length:n}).map(l=>Int32Array.from({length:i}).fill(s))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let s=0,a=n.length;s<a;s++)if(n[s]!==i[s])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const s of n)i=31*i+s;return i}static fillUint8Array(n,i){for(let s=0;s!==n.length;s++)n[s]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const s=new Uint8Array(i);return s.set(n),s}return n.slice(0,i)}static copyOfRange(n,i,s){const a=s-i,l=new Int32Array(a);return B.arraycopy(n,i,l,0,a),l}static binarySearch(n,i,s){s===void 0&&(s=T.numberComparator);let a=0,l=n.length-1;for(;a<=l;){const c=l+a>>1,h=s(i,n[c]);if(h>0)a=c+1;else if(h<0)l=c-1;else return c}return-a-1}static numberComparator(n,i){return n-i}}class _{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let s=31;return i=n<<16,i!==0&&(s-=16,n=i),i=n<<8,i!==0&&(s-=8,n=i),i=n<<4,i!==0&&(s-=4,n=i),i=n<<2,i!==0&&(s-=2,n=i),s-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}_.MIN_VALUE_32_BITS=-2147483648,_.MAX_VALUE=Number.MAX_SAFE_INTEGER;class k{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=k.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=k.makeArray(n);B.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const s=this.bits;let a=Math.floor(n/32),l=s[a];l&=~((1<<(n&31))-1);const c=s.length;for(;l===0;){if(++a===c)return i;l=s[a]}const h=a*32+_.numberOfTrailingZeros(l);return h>i?i:h}getNextUnset(n){const i=this.size;if(n>=i)return i;const s=this.bits;let a=Math.floor(n/32),l=~s[a];l&=~((1<<(n&31))-1);const c=s.length;for(;l===0;){if(++a===c)return i;l=~s[a]}const h=a*32+_.numberOfTrailingZeros(l);return h>i?i:h}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new I;if(i===n)return;i--;const s=Math.floor(n/32),a=Math.floor(i/32),l=this.bits;for(let c=s;c<=a;c++){const h=c>s?0:n&31,p=(2<<(c<a?31:i&31))-(1<<h);l[c]|=p}}clear(){const n=this.bits.length,i=this.bits;for(let s=0;s<n;s++)i[s]=0}isRange(n,i,s){if(i<n||n<0||i>this.size)throw new I;if(i===n)return!0;i--;const a=Math.floor(n/32),l=Math.floor(i/32),c=this.bits;for(let h=a;h<=l;h++){const d=h>a?0:n&31,y=(2<<(h<l?31:i&31))-(1<<d)&4294967295;if((c[h]&y)!==(s?y:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let s=i;s>0;s--)this.appendBit((n>>s-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let s=0;s<i;s++)this.appendBit(n.get(s))}xor(n){if(this.size!==n.size)throw new I("Sizes don't match");const i=this.bits;for(let s=0,a=i.length;s<a;s++)i[s]^=n.bits[s]}toBytes(n,i,s,a){for(let l=0;l<a;l++){let c=0;for(let h=0;h<8;h++)this.get(n)&&(c|=1<<7-h),n++;i[s+l]=c}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),s=i+1,a=this.bits;for(let l=0;l<s;l++){let c=a[l];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,n[i-l]=c}if(this.size!==s*32){const l=s*32-this.size;let c=n[0]>>>l;for(let h=1;h<s;h++){const d=n[h];c|=d<<32-l,n[h-1]=c,c=d>>>l}n[s-1]=c}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof k))return!1;const i=n;return this.size===i.size&&T.equals(this.bits,i.bits)}hashCode(){return 31*this.size+T.hashCode(this.bits)}toString(){let n="";for(let i=0,s=this.size;i<s;i++)i&7||(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new k(this.size,this.bits.slice())}}var Q;(function(E){E[E.OTHER=0]="OTHER",E[E.PURE_BARCODE=1]="PURE_BARCODE",E[E.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",E[E.TRY_HARDER=3]="TRY_HARDER",E[E.CHARACTER_SET=4]="CHARACTER_SET",E[E.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",E[E.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",E[E.ASSUME_GS1=7]="ASSUME_GS1",E[E.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",E[E.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",E[E.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Q||(Q={}));var X=Q;class b extends m{static getFormatInstance(){return new b}}b.kind="FormatException";var W;(function(E){E[E.Cp437=0]="Cp437",E[E.ISO8859_1=1]="ISO8859_1",E[E.ISO8859_2=2]="ISO8859_2",E[E.ISO8859_3=3]="ISO8859_3",E[E.ISO8859_4=4]="ISO8859_4",E[E.ISO8859_5=5]="ISO8859_5",E[E.ISO8859_6=6]="ISO8859_6",E[E.ISO8859_7=7]="ISO8859_7",E[E.ISO8859_8=8]="ISO8859_8",E[E.ISO8859_9=9]="ISO8859_9",E[E.ISO8859_10=10]="ISO8859_10",E[E.ISO8859_11=11]="ISO8859_11",E[E.ISO8859_13=12]="ISO8859_13",E[E.ISO8859_14=13]="ISO8859_14",E[E.ISO8859_15=14]="ISO8859_15",E[E.ISO8859_16=15]="ISO8859_16",E[E.SJIS=16]="SJIS",E[E.Cp1250=17]="Cp1250",E[E.Cp1251=18]="Cp1251",E[E.Cp1252=19]="Cp1252",E[E.Cp1256=20]="Cp1256",E[E.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",E[E.UTF8=22]="UTF8",E[E.ASCII=23]="ASCII",E[E.Big5=24]="Big5",E[E.GB18030=25]="GB18030",E[E.EUC_KR=26]="EUC_KR"})(W||(W={}));class H{constructor(n,i,s,...a){this.valueIdentifier=n,this.name=s,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=a,H.VALUE_IDENTIFIER_TO_ECI.set(n,this),H.NAME_TO_ECI.set(s,this);const l=this.values;for(let c=0,h=l.length;c!==h;c++){const d=l[c];H.VALUES_TO_ECI.set(d,this)}for(const c of a)H.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new b("incorect value");const i=H.VALUES_TO_ECI.get(n);if(i===void 0)throw new b("incorect value");return i}static getCharacterSetECIByName(n){const i=H.NAME_TO_ECI.get(n);if(i===void 0)throw new b("incorect value");return i}equals(n){if(!(n instanceof H))return!1;const i=n;return this.getName()===i.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H(W.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H(W.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H(W.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H(W.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H(W.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H(W.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H(W.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H(W.Big5,28,"Big5"),H.GB18030=new H(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H(W.EUC_KR,30,"EUC_KR","EUC-KR");class ue extends m{}ue.kind="UnsupportedOperationException";class Ne{static decode(n,i){const s=this.encodingName(i);return this.customDecoder?this.customDecoder(n,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(n,s):new TextDecoder(s).decode(n)}static shouldDecodeOnFallback(n){return!Ne.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const s=this.encodingName(i);return this.customEncoder?this.customEncoder(n,s):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof H?n:H.getCharacterSetECIByName(n)}static decodeFallback(n,i){const s=this.encodingCharacterSet(i);if(Ne.isDecodeFallbackSupported(s)){let a="";for(let l=0,c=n.length;l<c;l++){let h=n[l].toString(16);h.length<2&&(h="0"+h),a+="%"+h}return decodeURIComponent(a)}if(s.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new ue(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(H.UTF8)||n.equals(H.ISO8859_1)||n.equals(H.ASCII)}static encodeFallback(n){const s=btoa(unescape(encodeURIComponent(n))).split(""),a=[];for(let l=0;l<s.length;l++)a.push(s[l].charCodeAt(0));return new Uint8Array(a)}}class ce{static castAsNonUtf8Char(n,i=null){const s=i?i.getName():this.ISO88591;return Ne.decode(new Uint8Array([n]),s)}static guessEncoding(n,i){if(i!=null&&i.get(X.CHARACTER_SET)!==void 0)return i.get(X.CHARACTER_SET).toString();const s=n.length;let a=!0,l=!0,c=!0,h=0,d=0,p=0,y=0,C=0,S=0,N=0,M=0,D=0,P=0,V=0;const $=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let ee=0;ee<s&&(a||l||c);ee++){const q=n[ee]&255;c&&(h>0?q&128?h--:c=!1:q&128&&(q&64?(h++,q&32?(h++,q&16?(h++,q&8?c=!1:y++):p++):d++):c=!1)),a&&(q>127&&q<160?a=!1:q>159&&(q<192||q===215||q===247)&&V++),l&&(C>0?q<64||q===127||q>252?l=!1:C--:q===128||q===160||q>239?l=!1:q>160&&q<224?(S++,M=0,N++,N>D&&(D=N)):q>127?(C++,N=0,M++,M>P&&(P=M)):(N=0,M=0))}return c&&h>0&&(c=!1),l&&C>0&&(l=!1),c&&($||d+p+y>0)?ce.UTF8:l&&(ce.ASSUME_SHIFT_JIS||D>=3||P>=3)?ce.SHIFT_JIS:a&&l?D===2&&S===2||V*10>=s?ce.SHIFT_JIS:ce.ISO88591:a?ce.ISO88591:l?ce.SHIFT_JIS:c?ce.UTF8:ce.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let s=-1;function a(c,h,d,p,y,C){if(c==="%%")return"%";if(i[++s]===void 0)return;c=p?parseInt(p.substr(1)):void 0;let S=y?parseInt(y.substr(1)):void 0,N;switch(C){case"s":N=i[s];break;case"c":N=i[s][0];break;case"f":N=parseFloat(i[s]).toFixed(c);break;case"p":N=parseFloat(i[s]).toPrecision(c);break;case"e":N=parseFloat(i[s]).toExponential(c);break;case"x":N=parseInt(i[s]).toString(S||16);break;case"d":N=parseFloat(parseInt(i[s],S||10).toPrecision(c)).toFixed(0);break}N=typeof N=="object"?JSON.stringify(N):(+N).toString(S);let M=parseInt(d),D=d&&d[0]+""=="0"?"0":" ";for(;N.length<M;)N=h!==void 0?N+D:D+N;return N}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(l,a)}static getBytes(n,i){return Ne.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}ce.SHIFT_JIS=H.SJIS.getName(),ce.GB2312="GB2312",ce.ISO88591=H.ISO8859_1.getName(),ce.EUC_JP="EUC_JP",ce.UTF8=H.UTF8.getName(),ce.PLATFORM_DEFAULT_ENCODING=ce.UTF8,ce.ASSUME_SHIFT_JIS=!1;class we{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=ce.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,s){for(let a=i;i<i+s;a++)this.append(n[a]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class $e{constructor(n,i,s,a){if(this.width=n,this.height=i,this.rowSize=s,this.bits=a,i==null&&(i=n),this.height=i,n<1||i<1)throw new I("Both dimensions must be greater than 0");s==null&&(s=Math.floor((n+31)/32)),this.rowSize=s,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,s=n[0].length,a=new $e(s,i);for(let l=0;l<i;l++){const c=n[l];for(let h=0;h<s;h++)c[h]&&a.set(h,l)}return a}static parseFromString(n,i,s){if(n===null)throw new I("stringRepresentation cannot be null");const a=new Array(n.length);let l=0,c=0,h=-1,d=0,p=0;for(;p<n.length;)if(n.charAt(p)===`
`||n.charAt(p)==="\r"){if(l>c){if(h===-1)h=l-c;else if(l-c!==h)throw new I("row lengths do not match");c=l,d++}p++}else if(n.substring(p,p+i.length)===i)p+=i.length,a[l]=!0,l++;else if(n.substring(p,p+s.length)===s)p+=s.length,a[l]=!1,l++;else throw new I("illegal character encountered: "+n.substring(p));if(l>c){if(h===-1)h=l-c;else if(l-c!==h)throw new I("row lengths do not match");d++}const y=new $e(h,d);for(let C=0;C<l;C++)a[C]&&y.set(Math.floor(C%h),Math.floor(C/h));return y}get(n,i){const s=i*this.rowSize+Math.floor(n/32);return(this.bits[s]>>>(n&31)&1)!==0}set(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]|=1<<(n&31)&4294967295}unset(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]&=~(1<<(n&31)&4294967295)}flip(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new I("input matrix dimensions do not match");const i=new k(Math.floor(this.width/32)+1),s=this.rowSize,a=this.bits;for(let l=0,c=this.height;l<c;l++){const h=l*s,d=n.getRow(l,i).getBitArray();for(let p=0;p<s;p++)a[h+p]^=d[p]}}clear(){const n=this.bits,i=n.length;for(let s=0;s<i;s++)n[s]=0}setRegion(n,i,s,a){if(i<0||n<0)throw new I("Left and top must be nonnegative");if(a<1||s<1)throw new I("Height and width must be at least 1");const l=n+s,c=i+a;if(c>this.height||l>this.width)throw new I("The region must fit inside the matrix");const h=this.rowSize,d=this.bits;for(let p=i;p<c;p++){const y=p*h;for(let C=n;C<l;C++)d[y+Math.floor(C/32)]|=1<<(C&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new k(this.width):i.clear();const s=this.rowSize,a=this.bits,l=n*s;for(let c=0;c<s;c++)i.setBulk(c*32,a[l+c]);return i}setRow(n,i){B.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let s=new k(n),a=new k(n);for(let l=0,c=Math.floor((i+1)/2);l<c;l++)s=this.getRow(l,s),a=this.getRow(i-1-l,a),s.reverse(),a.reverse(),this.setRow(l,a),this.setRow(i-1-l,s)}getEnclosingRectangle(){const n=this.width,i=this.height,s=this.rowSize,a=this.bits;let l=n,c=i,h=-1,d=-1;for(let p=0;p<i;p++)for(let y=0;y<s;y++){const C=a[p*s+y];if(C!==0){if(p<c&&(c=p),p>d&&(d=p),y*32<l){let S=0;for(;!(C<<31-S&4294967295);)S++;y*32+S<l&&(l=y*32+S)}if(y*32+31>h){let S=31;for(;!(C>>>S);)S--;y*32+S>h&&(h=y*32+S)}}}return h<l||d<c?null:Int32Array.from([l,c,h-l+1,d-c+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let s=0;for(;s<i.length&&i[s]===0;)s++;if(s===i.length)return null;const a=s/n;let l=s%n*32;const c=i[s];let h=0;for(;!(c<<31-h&4294967295);)h++;return l+=h,Int32Array.from([l,a])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let s=i.length-1;for(;s>=0&&i[s]===0;)s--;if(s<0)return null;const a=Math.floor(s/n);let l=Math.floor(s%n)*32;const c=i[s];let h=31;for(;!(c>>>h);)h--;return l+=h,Int32Array.from([l,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof $e))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&T.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+T.hashCode(this.bits),n}toString(n="X ",i="  ",s=`
`){return this.buildToString(n,i,s)}buildToString(n,i,s){let a=new we;for(let l=0,c=this.height;l<c;l++){for(let h=0,d=this.width;h<d;h++)a.append(this.get(h,l)?n:i);a.append(s)}return a.toString()}clone(){return new $e(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends m{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class Ke extends F{constructor(n){super(n),this.luminances=Ke.EMPTY,this.buckets=new Int32Array(Ke.LUMINANCE_BUCKETS)}getBlackRow(n,i){const s=this.getLuminanceSource(),a=s.getWidth();i==null||i.getSize()<a?i=new k(a):i.clear(),this.initArrays(a);const l=s.getRow(n,this.luminances),c=this.buckets;for(let d=0;d<a;d++)c[(l[d]&255)>>Ke.LUMINANCE_SHIFT]++;const h=Ke.estimateBlackPoint(c);if(a<3)for(let d=0;d<a;d++)(l[d]&255)<h&&i.set(d);else{let d=l[0]&255,p=l[1]&255;for(let y=1;y<a-1;y++){const C=l[y+1]&255;(p*4-d-C)/2<h&&i.set(y),d=p,p=C}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),s=n.getHeight(),a=new $e(i,s);this.initArrays(i);const l=this.buckets;for(let d=1;d<5;d++){const p=Math.floor(s*d/5),y=n.getRow(p,this.luminances),C=Math.floor(i*4/5);for(let S=Math.floor(i/5);S<C;S++){const N=y[S]&255;l[N>>Ke.LUMINANCE_SHIFT]++}}const c=Ke.estimateBlackPoint(l),h=n.getMatrix();for(let d=0;d<s;d++){const p=d*i;for(let y=0;y<i;y++)(h[p+y]&255)<c&&a.set(y,d)}return a}createBinarizer(n){return new Ke(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let s=0;s<Ke.LUMINANCE_BUCKETS;s++)i[s]=0}static estimateBlackPoint(n){const i=n.length;let s=0,a=0,l=0;for(let y=0;y<i;y++)n[y]>l&&(a=y,l=n[y]),n[y]>s&&(s=n[y]);let c=0,h=0;for(let y=0;y<i;y++){const C=y-a,S=n[y]*C*C;S>h&&(c=y,h=S)}if(a>c){const y=a;a=c,c=y}if(c-a<=i/16)throw new G;let d=c-1,p=-1;for(let y=c-1;y>a;y--){const C=y-a,S=C*C*(c-y)*(s-n[y]);S>p&&(d=y,p=S)}return d<<Ke.LUMINANCE_SHIFT}}Ke.LUMINANCE_BITS=5,Ke.LUMINANCE_SHIFT=8-Ke.LUMINANCE_BITS,Ke.LUMINANCE_BUCKETS=1<<Ke.LUMINANCE_BITS,Ke.EMPTY=Uint8ClampedArray.from([0]);class ye extends Ke{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),s=n.getHeight();if(i>=ye.MINIMUM_DIMENSION&&s>=ye.MINIMUM_DIMENSION){const a=n.getMatrix();let l=i>>ye.BLOCK_SIZE_POWER;i&ye.BLOCK_SIZE_MASK&&l++;let c=s>>ye.BLOCK_SIZE_POWER;s&ye.BLOCK_SIZE_MASK&&c++;const h=ye.calculateBlackPoints(a,l,c,i,s),d=new $e(i,s);ye.calculateThresholdForBlock(a,l,c,i,s,h,d),this.matrix=d}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new ye(n)}static calculateThresholdForBlock(n,i,s,a,l,c,h){const d=l-ye.BLOCK_SIZE,p=a-ye.BLOCK_SIZE;for(let y=0;y<s;y++){let C=y<<ye.BLOCK_SIZE_POWER;C>d&&(C=d);const S=ye.cap(y,2,s-3);for(let N=0;N<i;N++){let M=N<<ye.BLOCK_SIZE_POWER;M>p&&(M=p);const D=ye.cap(N,2,i-3);let P=0;for(let $=-2;$<=2;$++){const ee=c[S+$];P+=ee[D-2]+ee[D-1]+ee[D]+ee[D+1]+ee[D+2]}const V=P/25;ye.thresholdBlock(n,M,C,V,a,h)}}}static cap(n,i,s){return n<i?i:n>s?s:n}static thresholdBlock(n,i,s,a,l,c){for(let h=0,d=s*l+i;h<ye.BLOCK_SIZE;h++,d+=l)for(let p=0;p<ye.BLOCK_SIZE;p++)(n[d+p]&255)<=a&&c.set(i+p,s+h)}static calculateBlackPoints(n,i,s,a,l){const c=l-ye.BLOCK_SIZE,h=a-ye.BLOCK_SIZE,d=new Array(s);for(let p=0;p<s;p++){d[p]=new Int32Array(i);let y=p<<ye.BLOCK_SIZE_POWER;y>c&&(y=c);for(let C=0;C<i;C++){let S=C<<ye.BLOCK_SIZE_POWER;S>h&&(S=h);let N=0,M=255,D=0;for(let V=0,$=y*a+S;V<ye.BLOCK_SIZE;V++,$+=a){for(let ee=0;ee<ye.BLOCK_SIZE;ee++){const q=n[$+ee]&255;N+=q,q<M&&(M=q),q>D&&(D=q)}if(D-M>ye.MIN_DYNAMIC_RANGE)for(V++,$+=a;V<ye.BLOCK_SIZE;V++,$+=a)for(let ee=0;ee<ye.BLOCK_SIZE;ee++)N+=n[$+ee]&255}let P=N>>ye.BLOCK_SIZE_POWER*2;if(D-M<=ye.MIN_DYNAMIC_RANGE&&(P=M/2,p>0&&C>0)){const V=(d[p-1][C]+2*d[p][C-1]+d[p-1][C-1])/4;M<V&&(P=V)}d[p][C]=P}}return d}}ye.BLOCK_SIZE_POWER=3,ye.BLOCK_SIZE=1<<ye.BLOCK_SIZE_POWER,ye.BLOCK_SIZE_MASK=ye.BLOCK_SIZE-1,ye.MINIMUM_DIMENSION=ye.BLOCK_SIZE*5,ye.MIN_DYNAMIC_RANGE=24;class re{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,s,a){throw new ue("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ue("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ue("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new we;for(let s=0;s<this.height;s++){const a=this.getRow(s,n);for(let l=0;l<this.width;l++){const c=a[l]&255;let h;c<64?h="#":c<128?h="+":c<192?h=".":h=" ",i.append(h)}i.append(`
`)}return i.toString()}}class ge extends re{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const s=this.delegate.getRow(n,i),a=this.getWidth();for(let l=0;l<a;l++)s[l]=255-(s[l]&255);return s}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(i);for(let a=0;a<i;a++)s[a]=255-(n[a]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,s,a){return new ge(this.delegate.crop(n,i,s,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ge(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ge(this.delegate.rotateCounterClockwise45())}}class pe extends re{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=pe.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return pe.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,s){const a=new Uint8ClampedArray(i*s);for(let l=0,c=0,h=n.length;l<h;l+=4,c++){let d;if(n[l+3]===0)d=255;else{const y=n[l],C=n[l+1],S=n[l+2];d=306*y+601*C+117*S+512>>10}a[c]=d}return a}getRow(n,i){if(n<0||n>=this.getHeight())throw new I("Requested row is outside the image: "+n);const s=this.getWidth(),a=n*s;return i===null?i=this.buffer.slice(a,a+s):(i.length<s&&(i=new Uint8ClampedArray(s)),i.set(this.buffer.slice(a,a+s))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,s,a){return super.crop(n,i,s,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),s=i.getContext("2d"),a=n*pe.DEGREE_TO_RADIANS,l=this.canvas.width,c=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*c),d=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*c);return i.width=h,i.height=d,s.translate(h/2,d/2),s.rotate(a),s.drawImage(this.canvas,l/-2,c/-2),this.buffer=pe.makeBufferFromCanvasImageData(i),this}invert(){return new ge(this)}}pe.DEGREE_TO_RADIANS=Math.PI/180;class te{constructor(n,i,s){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var fe=(globalThis||ws||self||window||void 0)&&(globalThis||ws||self||window||void 0).__awaiter||function(E,n,i,s){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function h(y){try{p(s.next(y))}catch(C){c(C)}}function d(y){try{p(s.throw(y))}catch(C){c(C)}}function p(y){y.done?l(y.value):a(y.value).then(h,d)}p((s=s.apply(E,n||[])).next())})};class Be{constructor(n,i=500,s){this.reader=n,this.timeBetweenScansMillis=i,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return fe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const s of n){const a=s.kind==="video"?"videoinput":s.kind;if(a!=="videoinput")continue;const l=s.deviceId||s.id,c=s.label||`Video device ${i.length+1}`,h=s.groupId,d={deviceId:l,label:c,kind:a,groupId:h};i.push(d)}return i})}getVideoInputDevices(){return fe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new te(i.deviceId,i.label))})}findDeviceById(n){return fe(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(s=>s.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return fe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return fe(this,void 0,void 0,function*(){this.reset();let s;n?s={deviceId:{exact:n}}:s={facingMode:"environment"};const a={video:s};return yield this.decodeOnceFromConstraints(a,i)})}decodeOnceFromConstraints(n,i){return fe(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(s,i)})}decodeOnceFromStream(n,i){return fe(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(n,i,s){return fe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,s)})}decodeFromVideoDevice(n,i,s){return fe(this,void 0,void 0,function*(){let a;n?a={deviceId:{exact:n}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeFromConstraints(l,i,s)})}decodeFromConstraints(n,i,s){return fe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(a,i,s)})}decodeFromStream(n,i,s){return fe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(a,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return fe(this,void 0,void 0,function*(){const s=this.prepareVideoElement(i);return this.addVideoSource(s,n),this.videoElement=s,this.stream=n,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(n){return new Promise((i,s)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return fe(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const s=document.getElementById(n);if(!s)throw new A(`element with id '${n}' not found`);if(s.nodeName.toLowerCase()!==i.toLowerCase())throw new A(`element with id '${n}' must be an ${i} element`);return s}decodeFromImage(n,i){if(!n&&!i)throw new A("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new A("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,s){if(n===void 0&&i===void 0)throw new A("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,s):this.decodeFromVideoElementContinuously(n,s)}decodeFromImageElement(n){if(!n)throw new A("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let s;return this.isImageLoaded(i)?s=this.decodeOnce(i,!1,!0):s=this._decodeOnLoadImage(i),s}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const s=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(s,i)}_decodeFromVideoElementSetup(n){if(!n)throw new A("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new A("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const s=this._decodeOnLoadImage(i);return i.src=n,s}decodeFromVideoUrl(n){if(!n)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),s=this.decodeFromVideoElement(i);return i.src=n,s}decodeFromVideoUrlContinuously(n,i){if(!n)throw new A("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(s,i);return s.src=n,a}_decodeOnLoadImage(n){return new Promise((i,s)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,s),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return fe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return fe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,s=!0){this._stopAsyncDecode=!1;const a=(l,c)=>{if(this._stopAsyncDecode){c(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(n);l(h)}catch(h){const d=i&&h instanceof G,y=(h instanceof L||h instanceof b)&&s;if(d||y)return setTimeout(a,this._timeBetweenDecodingAttempts,l,c);c(h)}};return new Promise((l,c)=>a(l,c))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(n);i(a,null),setTimeout(s,this.timeBetweenScansMillis)}catch(a){i(null,a);const l=a instanceof L||a instanceof b,c=a instanceof G;(l||c)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,s){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,s=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),s=new pe(i),a=new ye(s);return new O(a)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let s,a;return typeof n<"u"&&(n instanceof HTMLVideoElement?(s=n.videoWidth,a=n.videoHeight):n instanceof HTMLImageElement&&(s=n.naturalWidth||n.width,a=n.naturalHeight||n.height)),i.style.width=s+"px",i.style.height=a+"px",i.width=s,i.height=a,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Me{constructor(n,i,s=i==null?0:8*i.length,a,l,c=B.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=s,this.resultPoints=a,this.format=l,this.timestamp=c,this.text=n,this.rawBytes=i,s==null?this.numBits=i==null?0:8*i.length:this.numBits=s,this.resultPoints=a,this.format=l,this.resultMetadata=null,c==null?this.timestamp=B.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const s=new Array(i.length+n.length);B.arraycopy(i,0,s,0,i.length),B.arraycopy(n,0,s,i.length,n.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var In;(function(E){E[E.AZTEC=0]="AZTEC",E[E.CODABAR=1]="CODABAR",E[E.CODE_39=2]="CODE_39",E[E.CODE_93=3]="CODE_93",E[E.CODE_128=4]="CODE_128",E[E.DATA_MATRIX=5]="DATA_MATRIX",E[E.EAN_8=6]="EAN_8",E[E.EAN_13=7]="EAN_13",E[E.ITF=8]="ITF",E[E.MAXICODE=9]="MAXICODE",E[E.PDF_417=10]="PDF_417",E[E.QR_CODE=11]="QR_CODE",E[E.RSS_14=12]="RSS_14",E[E.RSS_EXPANDED=13]="RSS_EXPANDED",E[E.UPC_A=14]="UPC_A",E[E.UPC_E=15]="UPC_E",E[E.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(In||(In={}));var ae=In,Pn;(function(E){E[E.OTHER=0]="OTHER",E[E.ORIENTATION=1]="ORIENTATION",E[E.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",E[E.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",E[E.ISSUE_NUMBER=4]="ISSUE_NUMBER",E[E.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",E[E.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",E[E.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",E[E.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",E[E.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",E[E.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Pn||(Pn={}));var ft=Pn;class Gr{constructor(n,i,s,a,l=-1,c=-1){this.rawBytes=n,this.text=i,this.byteSegments=s,this.ecLevel=a,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=c,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class as{exp(n){return this.expTable[n]}log(n){if(n===0)throw new I;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class Wt{constructor(n,i){if(i.length===0)throw new I;this.field=n;const s=i.length;if(s>1&&i[0]===0){let a=1;for(;a<s&&i[a]===0;)a++;a===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-a),B.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let s;if(n===1){s=0;for(let c=0,h=i.length;c!==h;c++){const d=i[c];s=as.addOrSubtract(s,d)}return s}s=i[0];const a=i.length,l=this.field;for(let c=1;c<a;c++)s=as.addOrSubtract(l.multiply(n,s),i[c]);return s}addOrSubtract(n){if(!this.field.equals(n.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,s=n.coefficients;if(i.length>s.length){const c=i;i=s,s=c}let a=new Int32Array(s.length);const l=s.length-i.length;B.arraycopy(s,0,a,0,l);for(let c=l;c<s.length;c++)a[c]=as.addOrSubtract(i[c-l],s[c]);return new Wt(this.field,a)}multiply(n){if(!this.field.equals(n.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,s=i.length,a=n.coefficients,l=a.length,c=new Int32Array(s+l-1),h=this.field;for(let d=0;d<s;d++){const p=i[d];for(let y=0;y<l;y++)c[d+y]=as.addOrSubtract(c[d+y],h.multiply(p,a[y]))}return new Wt(h,c)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,s=this.field,a=new Int32Array(i),l=this.coefficients;for(let c=0;c<i;c++)a[c]=s.multiply(l[c],n);return new Wt(s,a)}multiplyByMonomial(n,i){if(n<0)throw new I;if(i===0)return this.field.getZero();const s=this.coefficients,a=s.length,l=new Int32Array(a+n),c=this.field;for(let h=0;h<a;h++)l[h]=c.multiply(s[h],i);return new Wt(c,l)}divide(n){if(!this.field.equals(n.field))throw new I("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new I("Divide by 0");const i=this.field;let s=i.getZero(),a=this;const l=n.getCoefficient(n.getDegree()),c=i.inverse(l);for(;a.getDegree()>=n.getDegree()&&!a.isZero();){const h=a.getDegree()-n.getDegree(),d=i.multiply(a.getCoefficient(a.getDegree()),c),p=n.multiplyByMonomial(h,d),y=i.buildMonomial(h,d);s=s.addOrSubtract(y),a=a.addOrSubtract(p)}return[s,a]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let s=this.getCoefficient(i);if(s!==0){if(s<0?(n+=" - ",s=-s):n.length>0&&(n+=" + "),i===0||s!==1){const a=this.field.log(s);a===0?n+="1":a===1?n+="a":(n+="a^",n+=a)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class wo extends m{}wo.kind="ArithmeticException";class be extends as{constructor(n,i,s){super(),this.primitive=n,this.size=i,this.generatorBase=s;const a=new Int32Array(i);let l=1;for(let h=0;h<i;h++)a[h]=l,l*=2,l>=i&&(l^=n,l&=i-1);this.expTable=a;const c=new Int32Array(i);for(let h=0;h<i-1;h++)c[a[h]]=h;this.logTable=c,this.zero=new Wt(this,Int32Array.from([0])),this.one=new Wt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new I;if(i===0)return this.zero;const s=new Int32Array(n+1);return s[0]=i,new Wt(this,s)}inverse(n){if(n===0)throw new wo;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+_.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}be.AZTEC_DATA_12=new be(4201,4096,1),be.AZTEC_DATA_10=new be(1033,1024,1),be.AZTEC_DATA_6=new be(67,64,1),be.AZTEC_PARAM=new be(19,16,1),be.QR_CODE_FIELD_256=new be(285,256,0),be.DATA_MATRIX_FIELD_256=new be(301,256,1),be.AZTEC_DATA_8=be.DATA_MATRIX_FIELD_256,be.MAXICODE_FIELD_64=be.AZTEC_DATA_6;class pi extends m{}pi.kind="ReedSolomonException";class Fn extends m{}Fn.kind="IllegalStateException";class ls{constructor(n){this.field=n}decode(n,i){const s=this.field,a=new Wt(s,n),l=new Int32Array(i);let c=!0;for(let N=0;N<i;N++){const M=a.evaluateAt(s.exp(N+s.getGeneratorBase()));l[l.length-1-N]=M,M!==0&&(c=!1)}if(c)return;const h=new Wt(s,l),d=this.runEuclideanAlgorithm(s.buildMonomial(i,1),h,i),p=d[0],y=d[1],C=this.findErrorLocations(p),S=this.findErrorMagnitudes(y,C);for(let N=0;N<C.length;N++){const M=n.length-1-s.log(C[N]);if(M<0)throw new pi("Bad error location");n[M]=be.addOrSubtract(n[M],S[N])}}runEuclideanAlgorithm(n,i,s){if(n.getDegree()<i.getDegree()){const N=n;n=i,i=N}const a=this.field;let l=n,c=i,h=a.getZero(),d=a.getOne();for(;c.getDegree()>=(s/2|0);){let N=l,M=h;if(l=c,h=d,l.isZero())throw new pi("r_{i-1} was zero");c=N;let D=a.getZero();const P=l.getCoefficient(l.getDegree()),V=a.inverse(P);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){const $=c.getDegree()-l.getDegree(),ee=a.multiply(c.getCoefficient(c.getDegree()),V);D=D.addOrSubtract(a.buildMonomial($,ee)),c=c.addOrSubtract(l.multiplyByMonomial($,ee))}if(d=D.multiply(h).addOrSubtract(M),c.getDegree()>=l.getDegree())throw new Fn("Division algorithm failed to reduce polynomial?")}const p=d.getCoefficient(0);if(p===0)throw new pi("sigmaTilde(0) was zero");const y=a.inverse(p),C=d.multiplyScalar(y),S=c.multiplyScalar(y);return[C,S]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const s=new Int32Array(i);let a=0;const l=this.field;for(let c=1;c<l.getSize()&&a<i;c++)n.evaluateAt(c)===0&&(s[a]=l.inverse(c),a++);if(a!==i)throw new pi("Error locator degree does not match number of roots");return s}findErrorMagnitudes(n,i){const s=i.length,a=new Int32Array(s),l=this.field;for(let c=0;c<s;c++){const h=l.inverse(i[c]);let d=1;for(let p=0;p<s;p++)if(c!==p){const y=l.multiply(i[p],h),C=y&1?y&-2:y|1;d=l.multiply(d,C)}a[c]=l.multiply(n.evaluateAt(h),l.inverse(d)),l.getGeneratorBase()!==0&&(a[c]=l.multiply(a[c],h))}return a}}var vt;(function(E){E[E.UPPER=0]="UPPER",E[E.LOWER=1]="LOWER",E[E.MIXED=2]="MIXED",E[E.DIGIT=3]="DIGIT",E[E.PUNCT=4]="PUNCT",E[E.BINARY=5]="BINARY"})(vt||(vt={}));class He{decode(n){this.ddata=n;let i=n.getBits(),s=this.extractBits(i),a=this.correctBits(s),l=He.convertBoolArrayToByteArray(a),c=He.getEncodedData(a),h=new Gr(l,c,null,null);return h.setNumBits(a.length),h}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,s=vt.UPPER,a=vt.UPPER,l="",c=0;for(;c<i;)if(a===vt.BINARY){if(i-c<5)break;let h=He.readCode(n,c,5);if(c+=5,h===0){if(i-c<11)break;h=He.readCode(n,c,11)+31,c+=11}for(let d=0;d<h;d++){if(i-c<8){c=i;break}const p=He.readCode(n,c,8);l+=ce.castAsNonUtf8Char(p),c+=8}a=s}else{let h=a===vt.DIGIT?4:5;if(i-c<h)break;let d=He.readCode(n,c,h);c+=h;let p=He.getCharacter(a,d);p.startsWith("CTRL_")?(s=a,a=He.getTable(p.charAt(5)),p.charAt(6)==="L"&&(s=a)):(l+=p,a=s)}return l}static getTable(n){switch(n){case"L":return vt.LOWER;case"P":return vt.PUNCT;case"M":return vt.MIXED;case"D":return vt.DIGIT;case"B":return vt.BINARY;case"U":default:return vt.UPPER}}static getCharacter(n,i){switch(n){case vt.UPPER:return He.UPPER_TABLE[i];case vt.LOWER:return He.LOWER_TABLE[i];case vt.MIXED:return He.MIXED_TABLE[i];case vt.PUNCT:return He.PUNCT_TABLE[i];case vt.DIGIT:return He.DIGIT_TABLE[i];default:throw new Fn("Bad table")}}correctBits(n){let i,s;this.ddata.getNbLayers()<=2?(s=6,i=be.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,i=be.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,i=be.AZTEC_DATA_10):(s=12,i=be.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),l=n.length/s;if(l<a)throw new b;let c=n.length%s,h=new Int32Array(l);for(let S=0;S<l;S++,c+=s)h[S]=He.readCode(n,c,s);try{new ls(i).decode(h,l-a)}catch(S){throw new b(S)}let d=(1<<s)-1,p=0;for(let S=0;S<a;S++){let N=h[S];if(N===0||N===d)throw new b;(N===1||N===d-1)&&p++}let y=new Array(a*s-p),C=0;for(let S=0;S<a;S++){let N=h[S];if(N===1||N===d-1)y.fill(N>1,C,C+s-1),C+=s-1;else for(let M=s-1;M>=0;--M)y[C++]=(N&1<<M)!==0}return y}extractBits(n){let i=this.ddata.isCompact(),s=this.ddata.getNbLayers(),a=(i?11:14)+s*4,l=new Int32Array(a),c=new Array(this.totalBitsInLayer(s,i));if(i)for(let h=0;h<l.length;h++)l[h]=h;else{let h=a+1+2*_.truncDivision(_.truncDivision(a,2)-1,15),d=a/2,p=_.truncDivision(h,2);for(let y=0;y<d;y++){let C=y+_.truncDivision(y,15);l[d-y-1]=p-C-1,l[d+y]=p+C+1}}for(let h=0,d=0;h<s;h++){let p=(s-h)*4+(i?9:12),y=h*2,C=a-1-y;for(let S=0;S<p;S++){let N=S*2;for(let M=0;M<2;M++)c[d+N+M]=n.get(l[y+M],l[y+S]),c[d+2*p+N+M]=n.get(l[y+S],l[C-M]),c[d+4*p+N+M]=n.get(l[C-M],l[C-S]),c[d+6*p+N+M]=n.get(l[C-S],l[y+M])}d+=p*8}return c}static readCode(n,i,s){let a=0;for(let l=i;l<i+s;l++)a<<=1,n[l]&&(a|=1);return a}static readByte(n,i){let s=n.length-i;return s>=8?He.readCode(n,i,8):He.readCode(n,i,s)<<8-s}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let s=0;s<i.length;s++)i[s]=He.readByte(n,8*s);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}He.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],He.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],He.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],He.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],He.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class _e{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,s,a){const l=n-s,c=i-a;return Math.sqrt(l*l+c*c)}static sum(n){let i=0;for(let s=0,a=n.length;s!==a;s++){const l=n[s];i+=l}return i}}class yo{static floatToIntBits(n){return n}}yo.MAX_VALUE=Number.MAX_SAFE_INTEGER;class le{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof le){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*yo.floatToIntBits(this.x)+yo.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),s=this.distance(n[1],n[2]),a=this.distance(n[0],n[2]);let l,c,h;if(s>=i&&s>=a?(c=n[0],l=n[1],h=n[2]):a>=s&&a>=i?(c=n[1],l=n[0],h=n[2]):(c=n[2],l=n[0],h=n[1]),this.crossProductZ(l,c,h)<0){const d=l;l=h,h=d}n[0]=l,n[1]=c,n[2]=h}static distance(n,i){return _e.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,s){const a=i.x,l=i.y;return(s.x-a)*(n.y-l)-(s.y-l)*(n.x-a)}}class Eo{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class bf extends Eo{constructor(n,i,s,a,l){super(n,i),this.compact=s,this.nbDatablocks=a,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class er{constructor(n,i,s,a){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=er.INIT_SIZE),s==null&&(s=n.getWidth()/2|0),a==null&&(a=n.getHeight()/2|0);const l=i/2|0;if(this.leftInit=s-l,this.rightInit=s+l,this.upInit=a-l,this.downInit=a+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let n=this.leftInit,i=this.rightInit,s=this.upInit,a=this.downInit,l=!1,c=!0,h=!1,d=!1,p=!1,y=!1,C=!1;const S=this.width,N=this.height;for(;c;){c=!1;let M=!0;for(;(M||!d)&&i<S;)M=this.containsBlackPoint(s,a,i,!1),M?(i++,c=!0,d=!0):d||i++;if(i>=S){l=!0;break}let D=!0;for(;(D||!p)&&a<N;)D=this.containsBlackPoint(n,i,a,!0),D?(a++,c=!0,p=!0):p||a++;if(a>=N){l=!0;break}let P=!0;for(;(P||!y)&&n>=0;)P=this.containsBlackPoint(s,a,n,!1),P?(n--,c=!0,y=!0):y||n--;if(n<0){l=!0;break}let V=!0;for(;(V||!C)&&s>=0;)V=this.containsBlackPoint(n,i,s,!0),V?(s--,c=!0,C=!0):C||s--;if(s<0){l=!0;break}c&&(h=!0)}if(!l&&h){const M=i-n;let D=null;for(let ee=1;D===null&&ee<M;ee++)D=this.getBlackPointOnSegment(n,a-ee,n+ee,a);if(D==null)throw new G;let P=null;for(let ee=1;P===null&&ee<M;ee++)P=this.getBlackPointOnSegment(n,s+ee,n+ee,s);if(P==null)throw new G;let V=null;for(let ee=1;V===null&&ee<M;ee++)V=this.getBlackPointOnSegment(i,s+ee,i-ee,s);if(V==null)throw new G;let $=null;for(let ee=1;$===null&&ee<M;ee++)$=this.getBlackPointOnSegment(i,a-ee,i-ee,a);if($==null)throw new G;return this.centerEdges($,D,V,P)}else throw new G}getBlackPointOnSegment(n,i,s,a){const l=_e.round(_e.distance(n,i,s,a)),c=(s-n)/l,h=(a-i)/l,d=this.image;for(let p=0;p<l;p++){const y=_e.round(n+p*c),C=_e.round(i+p*h);if(d.get(y,C))return new le(y,C)}return null}centerEdges(n,i,s,a){const l=n.getX(),c=n.getY(),h=i.getX(),d=i.getY(),p=s.getX(),y=s.getY(),C=a.getX(),S=a.getY(),N=er.CORR;return l<this.width/2?[new le(C-N,S+N),new le(h+N,d+N),new le(p-N,y-N),new le(l+N,c-N)]:[new le(C+N,S+N),new le(h+N,d-N),new le(p-N,y+N),new le(l-N,c-N)]}containsBlackPoint(n,i,s,a){const l=this.image;if(a){for(let c=n;c<=i;c++)if(l.get(c,s))return!0}else for(let c=n;c<=i;c++)if(l.get(s,c))return!0;return!1}}er.INIT_SIZE=10,er.CORR=1;class dl{static checkAndNudgePoints(n,i){const s=n.getWidth(),a=n.getHeight();let l=!0;for(let c=0;c<i.length&&l;c+=2){const h=Math.floor(i[c]),d=Math.floor(i[c+1]);if(h<-1||h>s||d<-1||d>a)throw new G;l=!1,h===-1?(i[c]=0,l=!0):h===s&&(i[c]=s-1,l=!0),d===-1?(i[c+1]=0,l=!0):d===a&&(i[c+1]=a-1,l=!0)}l=!0;for(let c=i.length-2;c>=0&&l;c-=2){const h=Math.floor(i[c]),d=Math.floor(i[c+1]);if(h<-1||h>s||d<-1||d>a)throw new G;l=!1,h===-1?(i[c]=0,l=!0):h===s&&(i[c]=s-1,l=!0),d===-1?(i[c+1]=0,l=!0):d===a&&(i[c+1]=a-1,l=!0)}}}class vn{constructor(n,i,s,a,l,c,h,d,p){this.a11=n,this.a21=i,this.a31=s,this.a12=a,this.a22=l,this.a32=c,this.a13=h,this.a23=d,this.a33=p}static quadrilateralToQuadrilateral(n,i,s,a,l,c,h,d,p,y,C,S,N,M,D,P){const V=vn.quadrilateralToSquare(n,i,s,a,l,c,h,d);return vn.squareToQuadrilateral(p,y,C,S,N,M,D,P).times(V)}transformPoints(n){const i=n.length,s=this.a11,a=this.a12,l=this.a13,c=this.a21,h=this.a22,d=this.a23,p=this.a31,y=this.a32,C=this.a33;for(let S=0;S<i;S+=2){const N=n[S],M=n[S+1],D=l*N+d*M+C;n[S]=(s*N+c*M+p)/D,n[S+1]=(a*N+h*M+y)/D}}transformPointsWithValues(n,i){const s=this.a11,a=this.a12,l=this.a13,c=this.a21,h=this.a22,d=this.a23,p=this.a31,y=this.a32,C=this.a33,S=n.length;for(let N=0;N<S;N++){const M=n[N],D=i[N],P=l*M+d*D+C;n[N]=(s*M+c*D+p)/P,i[N]=(a*M+h*D+y)/P}}static squareToQuadrilateral(n,i,s,a,l,c,h,d){const p=n-s+l-h,y=i-a+c-d;if(p===0&&y===0)return new vn(s-n,l-s,n,a-i,c-a,i,0,0,1);{const C=s-l,S=h-l,N=a-c,M=d-c,D=C*M-S*N,P=(p*M-S*y)/D,V=(C*y-p*N)/D;return new vn(s-n+P*s,h-n+V*h,n,a-i+P*a,d-i+V*d,i,P,V,1)}}static quadrilateralToSquare(n,i,s,a,l,c,h,d){return vn.squareToQuadrilateral(n,i,s,a,l,c,h,d).buildAdjoint()}buildAdjoint(){return new vn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new vn(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Df extends dl{sampleGrid(n,i,s,a,l,c,h,d,p,y,C,S,N,M,D,P,V,$,ee){const q=vn.quadrilateralToQuadrilateral(a,l,c,h,d,p,y,C,S,N,M,D,P,V,$,ee);return this.sampleGridWithTransform(n,i,s,q)}sampleGridWithTransform(n,i,s,a){if(i<=0||s<=0)throw new G;const l=new $e(i,s),c=new Float32Array(2*i);for(let h=0;h<s;h++){const d=c.length,p=h+.5;for(let y=0;y<d;y+=2)c[y]=y/2+.5,c[y+1]=p;a.transformPoints(c),dl.checkAndNudgePoints(n,c);try{for(let y=0;y<d;y+=2)n.get(Math.floor(c[y]),Math.floor(c[y+1]))&&l.set(y/2,h)}catch{throw new G}}return l}}class hr{static setGridSampler(n){hr.gridSampler=n}static getInstance(){return hr.gridSampler}}hr.gridSampler=new Df;class Ft{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new le(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Lf{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),s=this.getBullsEyeCorners(i);if(n){let c=s[0];s[0]=s[2],s[2]=c}this.extractParameters(s);let a=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),l=this.getMatrixCornerPoints(s);return new bf(a,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new G;let i=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(s,i);let a=0;for(let c=0;c<4;c++){let h=s[(this.shift+c)%4];this.compact?(a<<=7,a+=h>>1&127):(a<<=10,a+=(h>>2&992)+(h>>1&31))}let l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(n,i){let s=0;n.forEach((a,l,c)=>{let h=(a>>i-2<<1)+(a&1);s=(s<<3)+h}),s=((s&1)<<11)+(s>>1);for(let a=0;a<4;a++)if(_.bitCount(s^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new G}getCorrectedParameterData(n,i){let s,a;i?(s=7,a=2):(s=10,a=4);let l=s-a,c=new Int32Array(s);for(let d=s-1;d>=0;--d)c[d]=n&15,n>>=4;try{new ls(be.AZTEC_PARAM).decode(c,l)}catch{throw new G}let h=0;for(let d=0;d<a;d++)h=(h<<4)+c[d];return h}getBullsEyeCorners(n){let i=n,s=n,a=n,l=n,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let C=this.getFirstDifferent(i,c,1,-1),S=this.getFirstDifferent(s,c,1,1),N=this.getFirstDifferent(a,c,-1,1),M=this.getFirstDifferent(l,c,-1,-1);if(this.nbCenterLayers>2){let D=this.distancePoint(M,C)*this.nbCenterLayers/(this.distancePoint(l,i)*(this.nbCenterLayers+2));if(D<.75||D>1.25||!this.isWhiteOrBlackRectangle(C,S,N,M))break}i=C,s=S,a=N,l=M,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let h=new le(i.getX()+.5,i.getY()-.5),d=new le(s.getX()+.5,s.getY()+.5),p=new le(a.getX()-.5,a.getY()+.5),y=new le(l.getX()-.5,l.getY()-.5);return this.expandSquare([h,d,p,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,s,a;try{let h=new er(this.image).detect();n=h[0],i=h[1],s=h[2],a=h[3]}catch{let d=this.image.getWidth()/2,p=this.image.getHeight()/2;n=this.getFirstDifferent(new Ft(d+7,p-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Ft(d+7,p+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new Ft(d-7,p+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ft(d-7,p-7),!1,-1,-1).toResultPoint()}let l=_e.round((n.getX()+a.getX()+i.getX()+s.getX())/4),c=_e.round((n.getY()+a.getY()+i.getY()+s.getY())/4);try{let h=new er(this.image,15,l,c).detect();n=h[0],i=h[1],s=h[2],a=h[3]}catch{n=this.getFirstDifferent(new Ft(l+7,c-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Ft(l+7,c+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new Ft(l-7,c+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ft(l-7,c-7),!1,-1,-1).toResultPoint()}return l=_e.round((n.getX()+a.getX()+i.getX()+s.getX())/4),c=_e.round((n.getY()+a.getY()+i.getY()+s.getY())/4),new Ft(l,c)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,s,a,l){let c=hr.getInstance(),h=this.getDimension(),d=h/2-this.nbCenterLayers,p=h/2+this.nbCenterLayers;return c.sampleGrid(n,h,h,d,d,p,d,p,p,d,p,i.getX(),i.getY(),s.getX(),s.getY(),a.getX(),a.getY(),l.getX(),l.getY())}sampleLine(n,i,s){let a=0,l=this.distanceResultPoint(n,i),c=l/s,h=n.getX(),d=n.getY(),p=c*(i.getX()-n.getX())/l,y=c*(i.getY()-n.getY())/l;for(let C=0;C<s;C++)this.image.get(_e.round(h+C*p),_e.round(d+C*y))&&(a|=1<<s-C-1);return a}isWhiteOrBlackRectangle(n,i,s,a){let l=3;n=new Ft(n.getX()-l,n.getY()+l),i=new Ft(i.getX()-l,i.getY()-l),s=new Ft(s.getX()+l,s.getY()-l),a=new Ft(a.getX()+l,a.getY()+l);let c=this.getColor(a,n);if(c===0)return!1;let h=this.getColor(n,i);return h!==c||(h=this.getColor(i,s),h!==c)?!1:(h=this.getColor(s,a),h===c)}getColor(n,i){let s=this.distancePoint(n,i),a=(i.getX()-n.getX())/s,l=(i.getY()-n.getY())/s,c=0,h=n.getX(),d=n.getY(),p=this.image.get(n.getX(),n.getY()),y=Math.ceil(s);for(let S=0;S<y;S++)h+=a,d+=l,this.image.get(_e.round(h),_e.round(d))!==p&&c++;let C=c/s;return C>.1&&C<.9?0:C<=.1===p?1:-1}getFirstDifferent(n,i,s,a){let l=n.getX()+s,c=n.getY()+a;for(;this.isValid(l,c)&&this.image.get(l,c)===i;)l+=s,c+=a;for(l-=s,c-=a;this.isValid(l,c)&&this.image.get(l,c)===i;)l+=s;for(l-=s;this.isValid(l,c)&&this.image.get(l,c)===i;)c+=a;return c-=a,new Ft(l,c)}expandSquare(n,i,s){let a=s/(2*i),l=n[0].getX()-n[2].getX(),c=n[0].getY()-n[2].getY(),h=(n[0].getX()+n[2].getX())/2,d=(n[0].getY()+n[2].getY())/2,p=new le(h+a*l,d+a*c),y=new le(h-a*l,d-a*c);l=n[1].getX()-n[3].getX(),c=n[1].getY()-n[3].getY(),h=(n[1].getX()+n[3].getX())/2,d=(n[1].getY()+n[3].getY())/2;let C=new le(h+a*l,d+a*c),S=new le(h-a*l,d-a*c);return[p,C,y,S]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=_e.round(n.getX()),s=_e.round(n.getY());return this.isValid(i,s)}distancePoint(n,i){return _e.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return _e.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_.truncDivision(this.nbLayers-4,8)+1)+15}}class Co{decode(n,i=null){let s=null,a=new Lf(n.getBlackMatrix()),l=null,c=null;try{let y=a.detectMirror(!1);l=y.getPoints(),this.reportFoundResultPoints(i,l),c=new He().decode(y)}catch(y){s=y}if(c==null)try{let y=a.detectMirror(!0);l=y.getPoints(),this.reportFoundResultPoints(i,l),c=new He().decode(y)}catch(y){throw s??y}let h=new Me(c.getText(),c.getRawBytes(),c.getNumBits(),l,ae.AZTEC,B.currentTimeMillis()),d=c.getByteSegments();d!=null&&h.putMetadata(ft.BYTE_SEGMENTS,d);let p=c.getECLevel();return p!=null&&h.putMetadata(ft.ERROR_CORRECTION_LEVEL,p),h}reportFoundResultPoints(n,i){if(n!=null){let s=n.get(X.NEED_RESULT_POINT_CALLBACK);s!=null&&i.forEach((a,l,c)=>{s.foundPossibleResultPoint(a)})}}reset(){}}class Zg extends Be{constructor(n=500){super(new Co,n)}}class ht{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get(X.TRY_HARDER)===!0&&n.isRotateSupported()){const l=n.rotateCounterClockwise(),c=this.doDecode(l,i),h=c.getResultMetadata();let d=270;h!==null&&h.get(ft.ORIENTATION)===!0&&(d=d+h.get(ft.ORIENTATION)%360),c.putMetadata(ft.ORIENTATION,d);const p=c.getResultPoints();if(p!==null){const y=l.getHeight();for(let C=0;C<p.length;C++)p[C]=new le(y-p[C].getY()-1,p[C].getX())}return c}else throw new G}}reset(){}doDecode(n,i){const s=n.getWidth(),a=n.getHeight();let l=new k(s);const c=i&&i.get(X.TRY_HARDER)===!0,h=Math.max(1,a>>(c?8:5));let d;c?d=a:d=15;const p=Math.trunc(a/2);for(let y=0;y<d;y++){const C=Math.trunc((y+1)/2),S=(y&1)===0,N=p+h*(S?C:-C);if(N<0||N>=a)break;try{l=n.getBlackRow(N,l)}catch{continue}for(let M=0;M<2;M++){if(M===1&&(l.reverse(),i&&i.get(X.NEED_RESULT_POINT_CALLBACK)===!0)){const D=new Map;i.forEach((P,V)=>D.set(V,P)),D.delete(X.NEED_RESULT_POINT_CALLBACK),i=D}try{const D=this.decodeRow(N,l,i);if(M===1){D.putMetadata(ft.ORIENTATION,180);const P=D.getResultPoints();P!==null&&(P[0]=new le(s-P[0].getX()-1,P[0].getY()),P[1]=new le(s-P[1].getX()-1,P[1].getY()))}return D}catch{}}}throw new G}static recordPattern(n,i,s){const a=s.length;for(let p=0;p<a;p++)s[p]=0;const l=n.getSize();if(i>=l)throw new G;let c=!n.get(i),h=0,d=i;for(;d<l;){if(n.get(d)!==c)s[h]++;else{if(++h===a)break;s[h]=1,c=!c}d++}if(!(h===a||h===a-1&&d===l))throw new G}static recordPatternInReverse(n,i,s){let a=s.length,l=n.get(i);for(;i>0&&a>=0;)n.get(--i)!==l&&(a--,l=!l);if(a>=0)throw new G;ht.recordPattern(n,i+1,s)}static patternMatchVariance(n,i,s){const a=n.length;let l=0,c=0;for(let p=0;p<a;p++)l+=n[p],c+=i[p];if(l<c)return Number.POSITIVE_INFINITY;const h=l/c;s*=h;let d=0;for(let p=0;p<a;p++){const y=n[p],C=i[p]*h,S=y>C?y-C:C-y;if(S>s)return Number.POSITIVE_INFINITY;d+=S}return d/l}}class ne extends ht{static findStartPattern(n){const i=n.getSize(),s=n.getNextSet(0);let a=0,l=Int32Array.from([0,0,0,0,0,0]),c=s,h=!1;const d=6;for(let p=s;p<i;p++)if(n.get(p)!==h)l[a]++;else{if(a===d-1){let y=ne.MAX_AVG_VARIANCE,C=-1;for(let S=ne.CODE_START_A;S<=ne.CODE_START_C;S++){const N=ht.patternMatchVariance(l,ne.CODE_PATTERNS[S],ne.MAX_INDIVIDUAL_VARIANCE);N<y&&(y=N,C=S)}if(C>=0&&n.isRange(Math.max(0,c-(p-c)/2),c,!1))return Int32Array.from([c,p,C]);c+=l[0]+l[1],l=l.slice(2,l.length-1),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,h=!h}throw new G}static decodeCode(n,i,s){ht.recordPattern(n,s,i);let a=ne.MAX_AVG_VARIANCE,l=-1;for(let c=0;c<ne.CODE_PATTERNS.length;c++){const h=ne.CODE_PATTERNS[c],d=this.patternMatchVariance(i,h,ne.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,l=c)}if(l>=0)return l;throw new G}decodeRow(n,i,s){const a=s&&s.get(X.ASSUME_GS1)===!0,l=ne.findStartPattern(i),c=l[2];let h=0;const d=new Uint8Array(20);d[h++]=c;let p;switch(c){case ne.CODE_START_A:p=ne.CODE_CODE_A;break;case ne.CODE_START_B:p=ne.CODE_CODE_B;break;case ne.CODE_START_C:p=ne.CODE_CODE_C;break;default:throw new b}let y=!1,C=!1,S="",N=l[0],M=l[1];const D=Int32Array.from([0,0,0,0,0,0]);let P=0,V=0,$=c,ee=0,q=!0,Ie=!1,Ee=!1;for(;!y;){const Ii=C;switch(C=!1,P=V,V=ne.decodeCode(i,D,M),d[h++]=V,V!==ne.CODE_STOP&&(q=!0),V!==ne.CODE_STOP&&(ee++,$+=ee*V),N=M,M+=D.reduce((Ip,vp)=>Ip+vp,0),V){case ne.CODE_START_A:case ne.CODE_START_B:case ne.CODE_START_C:throw new b}switch(p){case ne.CODE_CODE_A:if(V<64)Ee===Ie?S+=String.fromCharCode(32+V):S+=String.fromCharCode(32+V+128),Ee=!1;else if(V<96)Ee===Ie?S+=String.fromCharCode(V-64):S+=String.fromCharCode(V+64),Ee=!1;else switch(V!==ne.CODE_STOP&&(q=!1),V){case ne.CODE_FNC_1:a&&(S.length===0?S+="]C1":S+="");break;case ne.CODE_FNC_2:case ne.CODE_FNC_3:break;case ne.CODE_FNC_4_A:!Ie&&Ee?(Ie=!0,Ee=!1):Ie&&Ee?(Ie=!1,Ee=!1):Ee=!0;break;case ne.CODE_SHIFT:C=!0,p=ne.CODE_CODE_B;break;case ne.CODE_CODE_B:p=ne.CODE_CODE_B;break;case ne.CODE_CODE_C:p=ne.CODE_CODE_C;break;case ne.CODE_STOP:y=!0;break}break;case ne.CODE_CODE_B:if(V<96)Ee===Ie?S+=String.fromCharCode(32+V):S+=String.fromCharCode(32+V+128),Ee=!1;else switch(V!==ne.CODE_STOP&&(q=!1),V){case ne.CODE_FNC_1:a&&(S.length===0?S+="]C1":S+="");break;case ne.CODE_FNC_2:case ne.CODE_FNC_3:break;case ne.CODE_FNC_4_B:!Ie&&Ee?(Ie=!0,Ee=!1):Ie&&Ee?(Ie=!1,Ee=!1):Ee=!0;break;case ne.CODE_SHIFT:C=!0,p=ne.CODE_CODE_A;break;case ne.CODE_CODE_A:p=ne.CODE_CODE_A;break;case ne.CODE_CODE_C:p=ne.CODE_CODE_C;break;case ne.CODE_STOP:y=!0;break}break;case ne.CODE_CODE_C:if(V<100)V<10&&(S+="0"),S+=V;else switch(V!==ne.CODE_STOP&&(q=!1),V){case ne.CODE_FNC_1:a&&(S.length===0?S+="]C1":S+="");break;case ne.CODE_CODE_A:p=ne.CODE_CODE_A;break;case ne.CODE_CODE_B:p=ne.CODE_CODE_B;break;case ne.CODE_STOP:y=!0;break}break}Ii&&(p=p===ne.CODE_CODE_A?ne.CODE_CODE_B:ne.CODE_CODE_A)}const Qt=M-N;if(M=i.getNextUnset(M),!i.isRange(M,Math.min(i.getSize(),M+(M-N)/2),!1))throw new G;if($-=ee*P,$%103!==P)throw new L;const Nn=S.length;if(Nn===0)throw new G;Nn>0&&q&&(p===ne.CODE_CODE_C?S=S.substring(0,Nn-2):S=S.substring(0,Nn-1));const Zt=(l[1]+l[0])/2,Ve=N+Qt/2,_t=d.length,tn=new Uint8Array(_t);for(let Ii=0;Ii<_t;Ii++)tn[Ii]=d[Ii];const Si=[new le(Zt,n),new le(Ve,n)];return new Me(S,tn,0,Si,ae.CODE_128,new Date().getTime())}}ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ne.MAX_AVG_VARIANCE=.25,ne.MAX_INDIVIDUAL_VARIANCE=.7,ne.CODE_SHIFT=98,ne.CODE_CODE_C=99,ne.CODE_CODE_B=100,ne.CODE_CODE_A=101,ne.CODE_FNC_1=102,ne.CODE_FNC_2=97,ne.CODE_FNC_3=96,ne.CODE_FNC_4_A=101,ne.CODE_FNC_4_B=100,ne.CODE_START_A=103,ne.CODE_START_B=104,ne.CODE_START_C=105,ne.CODE_STOP=106;class mt extends ht{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,s){let a=this.counters;a.fill(0),this.decodeRowResult="";let l=mt.findAsteriskPattern(i,a),c=i.getNextSet(l[1]),h=i.getSize(),d,p;do{mt.recordPattern(i,c,a);let D=mt.toNarrowWidePattern(a);if(D<0)throw new G;d=mt.patternToChar(D),this.decodeRowResult+=d,p=c;for(let P of a)c+=P;c=i.getNextSet(c)}while(d!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let y=0;for(let D of a)y+=D;let C=c-p-y;if(c!==h&&C*2<y)throw new G;if(this.usingCheckDigit){let D=this.decodeRowResult.length-1,P=0;for(let V=0;V<D;V++)P+=mt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(V));if(this.decodeRowResult.charAt(D)!==mt.ALPHABET_STRING.charAt(P%43))throw new L;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new G;let S;this.extendedMode?S=mt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let N=(l[1]+l[0])/2,M=p+y/2;return new Me(S,null,0,[new le(N,n),new le(M,n)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let s=n.getSize(),a=n.getNextSet(0),l=0,c=a,h=!1,d=i.length;for(let p=a;p<s;p++)if(n.get(p)!==h)i[l]++;else{if(l===d-1){if(this.toNarrowWidePattern(i)===mt.ASTERISK_ENCODING&&n.isRange(Math.max(0,c-Math.floor((p-c)/2)),c,!1))return[c,p];c+=i[0]+i[1],i.copyWithin(0,2,2+l-1),i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,h=!h}throw new G}static toNarrowWidePattern(n){let i=n.length,s=0,a;do{let l=2147483647;for(let d of n)d<l&&d>s&&(l=d);s=l,a=0;let c=0,h=0;for(let d=0;d<i;d++){let p=n[d];p>s&&(h|=1<<i-1-d,a++,c+=p)}if(a===3){for(let d=0;d<i&&a>0;d++){let p=n[d];if(p>s&&(a--,p*2>=c))return-1}return h}}while(a>3);return-1}static patternToChar(n){for(let i=0;i<mt.CHARACTER_ENCODINGS.length;i++)if(mt.CHARACTER_ENCODINGS[i]===n)return mt.ALPHABET_STRING.charAt(i);if(n===mt.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(n){let i=n.length,s="";for(let a=0;a<i;a++){let l=n.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){let c=n.charAt(a+1),h="\0";switch(l){case"+":if(c>="A"&&c<="Z")h=String.fromCharCode(c.charCodeAt(0)+32);else throw new b;break;case"$":if(c>="A"&&c<="Z")h=String.fromCharCode(c.charCodeAt(0)-64);else throw new b;break;case"%":if(c>="A"&&c<="E")h=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")h=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")h=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")h=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")h="\0";else if(c==="V")h="@";else if(c==="W")h="`";else if(c==="X"||c==="Y"||c==="Z")h="";else throw new b;break;case"/":if(c>="A"&&c<="O")h=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")h=":";else throw new b;break}s+=h,a++}else s+=l}return s}}mt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",mt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],mt.ASTERISK_ENCODING=148;class je extends ht{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,s){let a=this.decodeStart(i),l=this.decodeEnd(i),c=new we;je.decodeMiddle(i,a[1],l[0],c);let h=c.toString(),d=null;s!=null&&(d=s.get(X.ALLOWED_LENGTHS)),d==null&&(d=je.DEFAULT_ALLOWED_LENGTHS);let p=h.length,y=!1,C=0;for(let M of d){if(p===M){y=!0;break}M>C&&(C=M)}if(!y&&p>C&&(y=!0),!y)throw new b;const S=[new le(a[1],n),new le(l[0],n)];return new Me(h,null,0,S,ae.ITF,new Date().getTime())}static decodeMiddle(n,i,s,a){let l=new Int32Array(10),c=new Int32Array(5),h=new Int32Array(5);for(l.fill(0),c.fill(0),h.fill(0);i<s;){ht.recordPattern(n,i,l);for(let p=0;p<5;p++){let y=2*p;c[p]=l[y],h[p]=l[y+1]}let d=je.decodeDigit(c);a.append(d.toString()),d=this.decodeDigit(h),a.append(d.toString()),l.forEach(function(p){i+=p})}}decodeStart(n){let i=je.skipWhiteSpace(n),s=je.findGuardPattern(n,i,je.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(n,s[0]),s}validateQuietZone(n,i){let s=this.narrowLineWidth*10;s=s<i?s:i;for(let a=i-1;s>0&&a>=0&&!n.get(a);a--)s--;if(s!==0)throw new G}static skipWhiteSpace(n){const i=n.getSize(),s=n.getNextSet(0);if(s===i)throw new G;return s}decodeEnd(n){n.reverse();try{let i=je.skipWhiteSpace(n),s;try{s=je.findGuardPattern(n,i,je.END_PATTERN_REVERSED[0])}catch(l){l instanceof G&&(s=je.findGuardPattern(n,i,je.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,s[0]);let a=s[0];return s[0]=n.getSize()-s[1],s[1]=n.getSize()-a,s}finally{n.reverse()}}static findGuardPattern(n,i,s){let a=s.length,l=new Int32Array(a),c=n.getSize(),h=!1,d=0,p=i;l.fill(0);for(let y=i;y<c;y++)if(n.get(y)!==h)l[d]++;else{if(d===a-1){if(ht.patternMatchVariance(l,s,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE)return[p,y];p+=l[0]+l[1],B.arraycopy(l,2,l,0,d-1),l[d-1]=0,l[d]=0,d--}else d++;l[d]=1,h=!h}throw new G}static decodeDigit(n){let i=je.MAX_AVG_VARIANCE,s=-1,a=je.PATTERNS.length;for(let l=0;l<a;l++){let c=je.PATTERNS[l],h=ht.patternMatchVariance(n,c,je.MAX_INDIVIDUAL_VARIANCE);h<i?(i=h,s=l):h===i&&(s=-1)}if(s>=0)return s%10;throw new G}}je.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],je.MAX_AVG_VARIANCE=.38,je.MAX_INDIVIDUAL_VARIANCE=.5,je.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],je.START_PATTERN=Int32Array.from([1,1,1,1]),je.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class it extends ht{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,s,a=0,l=Int32Array.from([0,0,0]);for(;!i;){l=Int32Array.from([0,0,0]),s=it.findGuardPattern(n,a,!1,this.START_END_PATTERN,l);let c=s[0];a=s[1];let h=c-(a-c);h>=0&&(i=n.isRange(h,c,!1))}return s}static checkChecksum(n){return it.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let s=parseInt(n.charAt(i-1),10);return it.getStandardUPCEANChecksum(n.substring(0,i-1))===s}static getStandardUPCEANChecksum(n){let i=n.length,s=0;for(let a=i-1;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new b;s+=l}s*=3;for(let a=i-2;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new b;s+=l}return(1e3-s)%10}static decodeEnd(n,i){return it.findGuardPattern(n,i,!1,it.START_END_PATTERN,new Int32Array(it.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,s,a){return this.findGuardPattern(n,i,s,a,new Int32Array(a.length))}static findGuardPattern(n,i,s,a,l){let c=n.getSize();i=s?n.getNextUnset(i):n.getNextSet(i);let h=0,d=i,p=a.length,y=s;for(let C=i;C<c;C++)if(n.get(C)!==y)l[h]++;else{if(h===p-1){if(ht.patternMatchVariance(l,a,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return Int32Array.from([d,C]);d+=l[0]+l[1];let S=l.slice(2,l.length-1);for(let N=0;N<h-1;N++)l[N]=S[N];l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,y=!y}throw new G}static decodeDigit(n,i,s,a){this.recordPattern(n,s,i);let l=this.MAX_AVG_VARIANCE,c=-1,h=a.length;for(let d=0;d<h;d++){let p=a[d],y=ht.patternMatchVariance(i,p,it.MAX_INDIVIDUAL_VARIANCE);y<l&&(l=y,c=d)}if(c>=0)return c;throw new G}}it.MAX_AVG_VARIANCE=.48,it.MAX_INDIVIDUAL_VARIANCE=.7,it.START_END_PATTERN=Int32Array.from([1,1,1]),it.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),it.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),it.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class us{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,s){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(i,s,a),c=a.toString(),h=us.parseExtensionString(c),d=[new le((s[0]+s[1])/2,n),new le(l,n)],p=new Me(c,null,0,d,ae.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&p.putAllMetadata(h),p}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c=i[1],h=0;for(let p=0;p<5&&c<l;p++){let y=it.decodeDigit(n,a,c,it.L_AND_G_PATTERNS);s+=String.fromCharCode(48+y%10);for(let C of a)c+=C;y>=10&&(h|=1<<4-p),p!==4&&(c=n.getNextSet(c),c=n.getNextUnset(c))}if(s.length!==5)throw new G;let d=this.determineCheckDigit(h);if(us.extensionChecksum(s.toString())!==d)throw new G;return c}static extensionChecksum(n){let i=n.length,s=0;for(let a=i-2;a>=0;a-=2)s+=n.charAt(a).charCodeAt(0)-48;s*=3;for(let a=i-1;a>=0;a-=2)s+=n.charAt(a).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new G}static parseExtensionString(n){if(n.length!==5)return null;let i=us.parseExtension5String(n);return i==null?null:new Map([[ft.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let s=parseInt(n.substring(1)),a=(s/100).toString(),l=s%100,c=l<10?"0"+l:l.toString();return i+a+"."+c}}class gl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,s){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(i,s,a),c=a.toString(),h=gl.parseExtensionString(c),d=[new le((s[0]+s[1])/2,n),new le(l,n)],p=new Me(c,null,0,d,ae.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&p.putAllMetadata(h),p}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c=i[1],h=0;for(let d=0;d<2&&c<l;d++){let p=it.decodeDigit(n,a,c,it.L_AND_G_PATTERNS);s+=String.fromCharCode(48+p%10);for(let y of a)c+=y;p>=10&&(h|=1<<1-d),d!==1&&(c=n.getNextSet(c),c=n.getNextUnset(c))}if(s.length!==2)throw new G;if(parseInt(s.toString())%4!==h)throw new G;return c}static parseExtensionString(n){return n.length!==2?null:new Map([[ft.ISSUE_NUMBER,parseInt(n)]])}}class kf{static decodeRow(n,i,s){let a=it.findGuardPattern(i,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new us().decodeRow(n,i,a)}catch{return new gl().decodeRow(n,i,a)}}}kf.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class De extends it{constructor(){super(),this.decodeRowStringBuffer="",De.L_AND_G_PATTERNS=De.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=De.L_PATTERNS[n-10],s=new Int32Array(i.length);for(let a=0;a<i.length;a++)s[a]=i[i.length-a-1];De.L_AND_G_PATTERNS[n]=s}}decodeRow(n,i,s){let a=De.findStartGuardPattern(i),l=s==null?null:s.get(X.NEED_RESULT_POINT_CALLBACK);if(l!=null){const q=new le((a[0]+a[1])/2,n);l.foundPossibleResultPoint(q)}let c=this.decodeMiddle(i,a,this.decodeRowStringBuffer),h=c.rowOffset,d=c.resultString;if(l!=null){const q=new le(h,n);l.foundPossibleResultPoint(q)}let p=this.decodeEnd(i,h);if(l!=null){const q=new le((p[0]+p[1])/2,n);l.foundPossibleResultPoint(q)}let y=p[1],C=y+(y-p[0]);if(C>=i.getSize()||!i.isRange(y,C,!1))throw new G;let S=d.toString();if(S.length<8)throw new b;if(!De.checkChecksum(S))throw new L;let N=(a[1]+a[0])/2,M=(p[1]+p[0])/2,D=this.getBarcodeFormat(),P=[new le(N,n),new le(M,n)],V=new Me(S,null,0,P,D,new Date().getTime()),$=0;try{let q=kf.decodeRow(n,i,p[1]);V.putMetadata(ft.UPC_EAN_EXTENSION,q.getText()),V.putAllMetadata(q.getResultMetadata()),V.addResultPoints(q.getResultPoints()),$=q.getText().length}catch{}let ee=s==null?null:s.get(X.ALLOWED_EAN_EXTENSIONS);if(ee!=null){let q=!1;for(let Ie in ee)if($.toString()===Ie){q=!0;break}if(!q)throw new G}return V}decodeEnd(n,i){return De.findGuardPattern(n,i,!1,De.START_END_PATTERN,new Int32Array(De.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return De.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let s=parseInt(n.charAt(i-1),10);return De.getStandardUPCEANChecksum(n.substring(0,i-1))===s}static getStandardUPCEANChecksum(n){let i=n.length,s=0;for(let a=i-1;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new b;s+=l}s*=3;for(let a=i-2;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new b;s+=l}return(1e3-s)%10}}class Yr extends De{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c=i[1],h=0;for(let p=0;p<6&&c<l;p++){let y=De.decodeDigit(n,a,c,De.L_AND_G_PATTERNS);s+=String.fromCharCode(48+y%10);for(let C of a)c+=C;y>=10&&(h|=1<<5-p)}s=Yr.determineFirstDigit(s,h),c=De.findGuardPattern(n,c,!0,De.MIDDLE_PATTERN,new Int32Array(De.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<6&&c<l;p++){let y=De.decodeDigit(n,a,c,De.L_PATTERNS);s+=String.fromCharCode(48+y);for(let C of a)c+=C}return{rowOffset:c,resultString:s}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(n,i){for(let s=0;s<10;s++)if(i===this.FIRST_DIGIT_ENCODINGS[s])return n=String.fromCharCode(48+s)+n,n;throw new G}}Yr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Bf extends De{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,s){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c=i[1];for(let d=0;d<4&&c<l;d++){let p=De.decodeDigit(n,a,c,De.L_PATTERNS);s+=String.fromCharCode(48+p);for(let y of a)c+=y}c=De.findGuardPattern(n,c,!0,De.MIDDLE_PATTERN,new Int32Array(De.MIDDLE_PATTERN.length).fill(0))[1];for(let d=0;d<4&&c<l;d++){let p=De.decodeDigit(n,a,c,De.L_PATTERNS);s+=String.fromCharCode(48+p);for(let y of a)c+=y}return{rowOffset:c,resultString:s}}getBarcodeFormat(){return ae.EAN_8}}class Pf extends De{constructor(){super(...arguments),this.ean13Reader=new Yr}getBarcodeFormat(){return ae.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,s))}decodeMiddle(n,i,s){return this.ean13Reader.decodeMiddle(n,i,s)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let s=new Me(i.substring(1),null,null,n.getResultPoints(),ae.UPC_A);return n.getResultMetadata()!=null&&s.putAllMetadata(n.getResultMetadata()),s}else throw new G}reset(){this.ean13Reader.reset()}}class Tn extends De{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,s){const a=this.decodeMiddleCounters.map(p=>p);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const l=n.getSize();let c=i[1],h=0;for(let p=0;p<6&&c<l;p++){const y=Tn.decodeDigit(n,a,c,Tn.L_AND_G_PATTERNS);s+=String.fromCharCode(48+y%10);for(let C of a)c+=C;y>=10&&(h|=1<<5-p)}let d=Tn.determineNumSysAndCheckDigit(s,h);return{rowOffset:c,resultString:d}}decodeEnd(n,i){return Tn.findGuardPatternWithoutCounters(n,i,!0,Tn.MIDDLE_END_PATTERN)}checkChecksum(n){return De.checkChecksum(Tn.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let s=0;s<=1;s++)for(let a=0;a<10;a++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][a]){let l=String.fromCharCode(48+s),c=String.fromCharCode(48+a);return l+n+c}throw G.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(l=>l.charCodeAt(0)),s=new we;s.append(n.charAt(0));let a=i[5];switch(a){case 0:case 1:case 2:s.appendChars(i,0,2),s.append(a),s.append("0000"),s.appendChars(i,2,3);break;case 3:s.appendChars(i,0,3),s.append("00000"),s.appendChars(i,3,2);break;case 4:s.appendChars(i,0,4),s.append("00000"),s.append(i[4]);break;default:s.appendChars(i,0,5),s.append("0000"),s.append(a);break}return n.length>=8&&s.append(n.charAt(7)),s.toString()}}Tn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class pl extends ht{constructor(n){super();let i=n==null?null:n.get(X.POSSIBLE_FORMATS),s=[];o(i)?(s.push(new Yr),s.push(new Pf),s.push(new Bf),s.push(new Tn)):(i.indexOf(ae.EAN_13)>-1&&s.push(new Yr),i.indexOf(ae.UPC_A)>-1&&s.push(new Pf),i.indexOf(ae.EAN_8)>-1&&s.push(new Bf),i.indexOf(ae.UPC_E)>-1&&s.push(new Tn)),this.readers=s}decodeRow(n,i,s){for(let a of this.readers)try{const l=a.decodeRow(n,i,s),c=l.getBarcodeFormat()===ae.EAN_13&&l.getText().charAt(0)==="0",h=s==null?null:s.get(X.POSSIBLE_FORMATS),d=h==null||h.includes(ae.UPC_A);if(c&&d){const p=l.getRawBytes(),y=new Me(l.getText().substring(1),p,p?p.length:null,l.getResultPoints(),ae.UPC_A);return y.putAllMetadata(l.getResultMetadata()),y}return l}catch{}throw new G}reset(){for(let n of this.readers)n.reset()}}class bt extends ht{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let s=0;s<i.length;s++)if(ht.patternMatchVariance(n,i[s],bt.MAX_INDIVIDUAL_VARIANCE)<bt.MAX_AVG_VARIANCE)return s;throw new G}static count(n){return _e.sum(new Int32Array(n))}static increment(n,i){let s=0,a=i[0];for(let l=1;l<n.length;l++)i[l]>a&&(a=i[l],s=l);n[s]++}static decrement(n,i){let s=0,a=i[0];for(let l=1;l<n.length;l++)i[l]<a&&(a=i[l],s=l);n[s]--}static isFinderPattern(n){let i=n[0]+n[1],s=i+n[2]+n[3],a=i/s;if(a>=bt.MIN_FINDER_PATTERN_RATIO&&a<=bt.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let h of n)h>c&&(c=h),h<l&&(l=h);return c<10*l}return!1}}bt.MAX_AVG_VARIANCE=.2,bt.MAX_INDIVIDUAL_VARIANCE=.45,bt.MIN_FINDER_PATTERN_RATIO=9.5/12,bt.MAX_FINDER_PATTERN_RATIO=12.5/14;class mi{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof mi))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ao{constructor(n,i,s,a,l){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new le(s,l)),this.resultPoints.push(new le(a,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Ao))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class Un{constructor(){}static getRSSvalue(n,i,s){let a=0;for(let d of n)a+=d;let l=0,c=0,h=n.length;for(let d=0;d<h-1;d++){let p;for(p=1,c|=1<<d;p<n[d];p++,c&=~(1<<d)){let y=Un.combins(a-p-1,h-d-2);if(s&&c===0&&a-p-(h-d-1)>=h-d-1&&(y-=Un.combins(a-p-(h-d),h-d-2)),h-d-1>1){let C=0;for(let S=a-p-(h-d-2);S>i;S--)C+=Un.combins(a-p-S-1,h-d-3);y-=C*(h-1-d)}else a-p>i&&y--;l+=y}a-=p}return l}static combins(n,i){let s,a;n-i>i?(a=i,s=n-i):(a=n-i,s=i);let l=1,c=1;for(let h=n;h>s;h--)l*=h,c<=a&&(l/=c,c++);for(;c<=a;)l/=c,c++;return l}}class Kg{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let s=12*i,a=new k(s),l=0,h=n[0].getRightChar().getValue();for(let d=11;d>=0;--d)h&1<<d&&a.set(l),l++;for(let d=1;d<n.length;++d){let p=n[d],y=p.getLeftChar().getValue();for(let C=11;C>=0;--C)y&1<<C&&a.set(l),l++;if(p.getRightChar()!=null){let C=p.getRightChar().getValue();for(let S=11;S>=0;--S)C&1<<S&&a.set(l),l++}}return a}}class Xr{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ml{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class Gt extends ml{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Gt.FNC1}}Gt.FNC1="$";class Qr extends ml{constructor(n,i,s){super(n),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class dn extends ml{constructor(n,i,s){if(super(n),i<0||i>10||s<0||s>10)throw new b;this.firstDigit=i,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===dn.FNC1}isSecondDigitFNC1(){return this.secondDigit===dn.FNC1}isAnyFNC1(){return this.firstDigit===dn.FNC1||this.secondDigit===dn.FNC1}}dn.FNC1=10;class ie{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new G;let i=n.substring(0,2);for(let l of ie.TWO_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(2,l[2],n):ie.processFixedAI(2,l[1],n);if(n.length<3)throw new G;let s=n.substring(0,3);for(let l of ie.THREE_DIGIT_DATA_LENGTH)if(l[0]===s)return l[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(3,l[2],n):ie.processFixedAI(3,l[1],n);for(let l of ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===s)return l[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(4,l[2],n):ie.processFixedAI(4,l[1],n);if(n.length<4)throw new G;let a=n.substring(0,4);for(let l of ie.FOUR_DIGIT_DATA_LENGTH)if(l[0]===a)return l[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(4,l[2],n):ie.processFixedAI(4,l[1],n);throw new G}static processFixedAI(n,i,s){if(s.length<n)throw new G;let a=s.substring(0,n);if(s.length<n+i)throw new G;let l=s.substring(n,n+i),c=s.substring(n+i),h="("+a+")"+l,d=ie.parseFieldsInGeneralPurpose(c);return d==null?h:h+d}static processVariableAI(n,i,s){let a=s.substring(0,n),l;s.length<n+i?l=s.length:l=n+i;let c=s.substring(n,l),h=s.substring(l),d="("+a+")"+c,p=ie.parseFieldsInGeneralPurpose(h);return p==null?d:d+p}}ie.VARIABLE_LENGTH=[],ie.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ie.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ie.VARIABLE_LENGTH,20],["22",ie.VARIABLE_LENGTH,29],["30",ie.VARIABLE_LENGTH,8],["37",ie.VARIABLE_LENGTH,8],["90",ie.VARIABLE_LENGTH,30],["91",ie.VARIABLE_LENGTH,30],["92",ie.VARIABLE_LENGTH,30],["93",ie.VARIABLE_LENGTH,30],["94",ie.VARIABLE_LENGTH,30],["95",ie.VARIABLE_LENGTH,30],["96",ie.VARIABLE_LENGTH,30],["97",ie.VARIABLE_LENGTH,3],["98",ie.VARIABLE_LENGTH,30],["99",ie.VARIABLE_LENGTH,30]],ie.THREE_DIGIT_DATA_LENGTH=[["240",ie.VARIABLE_LENGTH,30],["241",ie.VARIABLE_LENGTH,30],["242",ie.VARIABLE_LENGTH,6],["250",ie.VARIABLE_LENGTH,30],["251",ie.VARIABLE_LENGTH,30],["253",ie.VARIABLE_LENGTH,17],["254",ie.VARIABLE_LENGTH,20],["400",ie.VARIABLE_LENGTH,30],["401",ie.VARIABLE_LENGTH,30],["402",17],["403",ie.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ie.VARIABLE_LENGTH,20],["421",ie.VARIABLE_LENGTH,15],["422",3],["423",ie.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ie.VARIABLE_LENGTH,15],["391",ie.VARIABLE_LENGTH,18],["392",ie.VARIABLE_LENGTH,15],["393",ie.VARIABLE_LENGTH,18],["703",ie.VARIABLE_LENGTH,30]],ie.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ie.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ie.VARIABLE_LENGTH,20],["8003",ie.VARIABLE_LENGTH,30],["8004",ie.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ie.VARIABLE_LENGTH,30],["8008",ie.VARIABLE_LENGTH,12],["8018",18],["8020",ie.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ie.VARIABLE_LENGTH,70],["8200",ie.VARIABLE_LENGTH,70]];class xi{constructor(n){this.buffer=new we,this.information=n}decodeAllCodes(n,i){let s=i,a=null;do{let l=this.decodeGeneralPurposeField(s,a),c=ie.parseFieldsInGeneralPurpose(l.getNewString());if(c!=null&&n.append(c),l.isRemaining()?a=""+l.getRemainingValue():a=null,s===l.getNewPosition())break;s=l.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(n,4);return l===0?new dn(this.information.getSize(),dn.FNC1,dn.FNC1):new dn(this.information.getSize(),l-1,dn.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),s=(i-8)/11,a=(i-8)%11;return new dn(n+7,s,a)}extractNumericValueFromBitArray(n,i){return xi.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,s){let a=0;for(let l=0;l<s;++l)n.get(i+l)&&(a|=1<<s-l-1);return a}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new Qr(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new Qr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let s=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(s!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new Qr(this.current.getPosition(),this.buffer.toString()):i=new Qr(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Xr(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new Qr(this.current.getPosition(),this.buffer.toString());return new Xr(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new Qr(this.current.getPosition(),this.buffer.toString());return new Xr(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new Qr(this.current.getPosition(),this.buffer.toString());return new Xr(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xr(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,7);if(s>=64&&s<116)return!0;if(n+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,8);return a>=232&&a<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new Gt(n+5,Gt.FNC1);if(i>=5&&i<15)return new Gt(n+5,"0"+(i-5));let s=this.extractNumericValueFromBitArray(n,7);if(s>=64&&s<90)return new Gt(n+7,""+(s+1));if(s>=90&&s<116)return new Gt(n+7,""+(s+7));let a=this.extractNumericValueFromBitArray(n,8),l;switch(a){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new b}return new Gt(n+8,l)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,6);return s>=16&&s<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new Gt(n+5,Gt.FNC1);if(i>=5&&i<15)return new Gt(n+5,"0"+(i-5));let s=this.extractNumericValueFromBitArray(n,6);if(s>=32&&s<58)return new Gt(n+6,""+(s+33));let a;switch(s){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Fn("Decoding invalid alphanumeric value: "+s)}return new Gt(n+6,a)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class xl{constructor(n){this.information=n,this.generalDecoder=new xi(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Yt extends xl{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let s=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,s)}encodeCompressedGtinWithoutAI(n,i,s){for(let a=0;a<4;++a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*a,10);l/100===0&&n.append("0"),l/10===0&&n.append("0"),n.append(l)}Yt.appendCheckDigit(n,s)}static appendCheckDigit(n,i){let s=0;for(let a=0;a<13;a++){let l=n.charAt(a+i).charCodeAt(0)-48;s+=a&1?l:3*l}s=10-s%10,s===10&&(s=0),n.append(s)}}Yt.GTIN_SIZE=40;class wi extends Yt{constructor(n){super(n)}parseInformation(){let n=new we;n.append("(01)");let i=n.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(wi.HEADER_SIZE,4);return n.append(s),this.encodeCompressedGtinWithoutAI(n,wi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,wi.HEADER_SIZE+44)}}wi.HEADER_SIZE=4;class So extends xl{constructor(n){super(n)}parseInformation(){let n=new we;return this.getGeneralDecoder().decodeAllCodes(n,So.HEADER_SIZE)}}So.HEADER_SIZE=5;class Io extends Yt{constructor(n){super(n)}encodeCompressedWeight(n,i,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,s);this.addWeightCode(n,a);let l=this.checkWeight(a),c=1e5;for(let h=0;h<5;++h)l/c===0&&n.append("0"),c/=10;n.append(l)}}class jn extends Io{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=jn.HEADER_SIZE+Io.GTIN_SIZE+jn.WEIGHT_SIZE)throw new G;let n=new we;return this.encodeCompressedGtin(n,jn.HEADER_SIZE),this.encodeCompressedWeight(n,jn.HEADER_SIZE+Io.GTIN_SIZE,jn.WEIGHT_SIZE),n.toString()}}jn.HEADER_SIZE=5,jn.WEIGHT_SIZE=15;class qg extends jn{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class Jg extends jn{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class zn extends Yt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<zn.HEADER_SIZE+Yt.GTIN_SIZE)throw new G;let n=new we;this.encodeCompressedGtin(n,zn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(zn.HEADER_SIZE+Yt.GTIN_SIZE,zn.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(zn.HEADER_SIZE+Yt.GTIN_SIZE+zn.LAST_DIGIT_SIZE,null);return n.append(s.getNewString()),n.toString()}}zn.HEADER_SIZE=8,zn.LAST_DIGIT_SIZE=2;class Ut extends Yt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Ut.HEADER_SIZE+Yt.GTIN_SIZE)throw new G;let n=new we;this.encodeCompressedGtin(n,Ut.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Ut.HEADER_SIZE+Yt.GTIN_SIZE,Ut.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ut.HEADER_SIZE+Yt.GTIN_SIZE+Ut.LAST_DIGIT_SIZE,Ut.FIRST_THREE_DIGITS_SIZE);s/100==0&&n.append("0"),s/10==0&&n.append("0"),n.append(s);let a=this.getGeneralDecoder().decodeGeneralPurposeField(Ut.HEADER_SIZE+Yt.GTIN_SIZE+Ut.LAST_DIGIT_SIZE+Ut.FIRST_THREE_DIGITS_SIZE,null);return n.append(a.getNewString()),n.toString()}}Ut.HEADER_SIZE=8,Ut.LAST_DIGIT_SIZE=2,Ut.FIRST_THREE_DIGITS_SIZE=10;class qe extends Io{constructor(n,i,s){super(n),this.dateCode=s,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=qe.HEADER_SIZE+qe.GTIN_SIZE+qe.WEIGHT_SIZE+qe.DATE_SIZE)throw new G;let n=new we;return this.encodeCompressedGtin(n,qe.HEADER_SIZE),this.encodeCompressedWeight(n,qe.HEADER_SIZE+qe.GTIN_SIZE,qe.WEIGHT_SIZE),this.encodeCompressedDate(n,qe.HEADER_SIZE+qe.GTIN_SIZE+qe.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(i,qe.DATE_SIZE);if(s==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let a=s%32;s/=32;let l=s%12+1;s/=12;let c=s;c/10==0&&n.append("0"),n.append(c),l/10==0&&n.append("0"),n.append(l),a/10==0&&n.append("0"),n.append(a)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}qe.HEADER_SIZE=8,qe.WEIGHT_SIZE=20,qe.DATE_SIZE=16;function Ff(E){try{if(E.get(1))return new wi(E);if(!E.get(2))return new So(E);switch(xi.extractNumericValueFromBitArray(E,1,4)){case 4:return new qg(E);case 5:return new Jg(E)}switch(xi.extractNumericValueFromBitArray(E,1,5)){case 12:return new zn(E);case 13:return new Ut(E)}switch(xi.extractNumericValueFromBitArray(E,1,7)){case 56:return new qe(E,"310","11");case 57:return new qe(E,"320","11");case 58:return new qe(E,"310","13");case 59:return new qe(E,"320","13");case 60:return new qe(E,"310","15");case 61:return new qe(E,"320","15");case 62:return new qe(E,"310","17");case 63:return new qe(E,"320","17")}}catch(n){throw console.log(n),new Fn("unknown decoder: "+E)}}class dr{constructor(n,i,s,a){this.leftchar=n,this.rightchar=i,this.finderpattern=s,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof dr?dr.equalsOrNull(n.leftchar,i.leftchar)&&dr.equalsOrNull(n.rightchar,i.rightchar)&&dr.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:dr.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class wl{constructor(n,i,s){this.pairs=n,this.rowNumber=i,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof wl?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let s;return n.forEach((a,l)=>{i.forEach(c=>{a.getLeftChar().getValue()===c.getLeftChar().getValue()&&a.getRightChar().getValue()===c.getRightChar().getValue()&&a.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(s=!0)})}),s}}class Z extends bt{constructor(n){super(...arguments),this.pairs=new Array(Z.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,s){this.pairs.length=0,this.startFromEven=!1;try{return Z.constructResult(this.decodeRow2pairs(n,i))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,Z.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(l){if(l instanceof G){if(!this.pairs.length)throw new G;s=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(n,!1),a){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new G}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let s=i;s<this.rows.length;s++){let a=this.rows[s];this.pairs.length=0;for(let c of n)this.pairs.push(c.getPairs());if(this.pairs.push(a.getPairs()),!Z.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(n);l.push(a);try{return this.checkRows(l,s+1)}catch(c){this.verbose&&console.log(c)}}throw new G}static isValidSequence(n){for(let i of Z.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let s=!0;for(let a=0;a<n.length;a++)if(n[a].getFinderPattern().getValue()!=i[a]){s=!1;break}if(s)return!0}return!1}storeRow(n,i){let s=0,a=!1,l=!1;for(;s<this.rows.length;){let c=this.rows[s];if(c.getRowNumber()>n){l=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),s++}l||a||Z.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new wl(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let s of i)if(s.getPairs().length!==n.length){for(let a of s.getPairs())for(let l of n)if(dr.equals(a,l))break}}static isPartialRow(n,i){for(let s of i){let a=!0;for(let l of n){let c=!1;for(let h of s.getPairs())if(l.equals(h)){c=!0;break}if(!c){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=Kg.buildBitArray(n),a=Ff(i).parseInformation(),l=n[0].getFinderPattern().getResultPoints(),c=n[n.length-1].getFinderPattern().getResultPoints(),h=[l[0],l[1],c[0],c[1]];return new Me(a,null,null,h,ae.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),s=n.getRightChar();if(s==null)return!1;let a=s.getChecksumPortion(),l=2;for(let h=1;h<this.pairs.size();++h){let d=this.pairs.get(h);a+=d.getLeftChar().getChecksumPortion(),l++;let p=d.getRightChar();p!=null&&(a+=p.getChecksumPortion(),l++)}return a%=211,211*(l-4)+a==i.getValue()}static getNextSecondBar(n,i){let s;return n.get(i)?(s=n.getNextUnset(i),s=n.getNextSet(s)):(s=n.getNextSet(i),s=n.getNextUnset(s)),s}retrieveNextPair(n,i,s){let a=i.length%2==0;this.startFromEven&&(a=!a);let l,c=!0,h=-1;do this.findNextPair(n,i,h),l=this.parseFoundFinderPattern(n,s,a),l==null?h=Z.getNextSecondBar(n,this.startEnd[0]):c=!1;while(c);let d=this.decodeDataCharacter(n,l,a,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new G;let p;try{p=this.decodeDataCharacter(n,l,a,!1)}catch(y){p=null,this.verbose&&console.log(y)}return new dr(d,p,l,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c;s>=0?c=s:this.isEmptyPair(i)?c=0:c=i[i.length-1].getFinderPattern().getStartEnd()[1];let h=i.length%2!=0;this.startFromEven&&(h=!h);let d=!1;for(;c<l&&(d=!n.get(c),!!d);)c++;let p=0,y=c;for(let C=c;C<l;C++)if(n.get(C)!=d)a[p]++;else{if(p==3){if(h&&Z.reverseCounters(a),Z.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=C;return}h&&Z.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,d=!d}throw new G}static reverseCounters(n){let i=n.length;for(let s=0;s<i/2;++s){let a=n[s];n[s]=n[i-s-1],n[i-s-1]=a}}parseFoundFinderPattern(n,i,s){let a,l,c;if(s){let p=this.startEnd[0]-1;for(;p>=0&&!n.get(p);)p--;p++,a=this.startEnd[0]-p,l=p,c=this.startEnd[1]}else l=this.startEnd[0],c=n.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=a;let d;try{d=this.parseFinderValue(h,Z.FINDER_PATTERNS)}catch{return null}return new Ao(d,[l,c],l,c,i)}decodeDataCharacter(n,i,s,a){let l=this.getDataCharacterCounters();for(let Ve=0;Ve<l.length;Ve++)l[Ve]=0;if(a)Z.recordPatternInReverse(n,i.getStartEnd()[0],l);else{Z.recordPattern(n,i.getStartEnd()[1],l);for(let Ve=0,_t=l.length-1;Ve<_t;Ve++,_t--){let tn=l[Ve];l[Ve]=l[_t],l[_t]=tn}}let c=17,h=_e.sum(new Int32Array(l))/c,d=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(h-d)/d>.3)throw new G;let p=this.getOddCounts(),y=this.getEvenCounts(),C=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let Ve=0;Ve<l.length;Ve++){let _t=1*l[Ve]/h,tn=_t+.5;if(tn<1){if(_t<.3)throw new G;tn=1}else if(tn>8){if(_t>8.7)throw new G;tn=8}let Si=Ve/2;Ve&1?(y[Si]=tn,S[Si]=_t-tn):(p[Si]=tn,C[Si]=_t-tn)}this.adjustOddEvenCounts(c);let N=4*i.getValue()+(s?0:2)+(a?0:1)-1,M=0,D=0;for(let Ve=p.length-1;Ve>=0;Ve--){if(Z.isNotA1left(i,s,a)){let _t=Z.WEIGHTS[N][2*Ve];D+=p[Ve]*_t}M+=p[Ve]}let P=0;for(let Ve=y.length-1;Ve>=0;Ve--)if(Z.isNotA1left(i,s,a)){let _t=Z.WEIGHTS[N][2*Ve+1];P+=y[Ve]*_t}let V=D+P;if(M&1||M>13||M<4)throw new G;let $=(13-M)/2,ee=Z.SYMBOL_WIDEST[$],q=9-ee,Ie=Un.getRSSvalue(p,ee,!0),Ee=Un.getRSSvalue(y,q,!1),Qt=Z.EVEN_TOTAL_SUBSET[$],Nn=Z.GSUM[$],Zt=Ie*Qt+Ee+Nn;return new mi(Zt,V)}static isNotA1left(n,i,s){return!(n.getValue()==0&&i&&s)}adjustOddEvenCounts(n){let i=_e.sum(new Int32Array(this.getOddCounts())),s=_e.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;i>13?l=!0:i<4&&(a=!0);let c=!1,h=!1;s>13?h=!0:s<4&&(c=!0);let d=i+s-n,p=(i&1)==1,y=(s&1)==0;if(d==1)if(p){if(y)throw new G;l=!0}else{if(!y)throw new G;h=!0}else if(d==-1)if(p){if(y)throw new G;a=!0}else{if(!y)throw new G;c=!0}else if(d==0){if(p){if(!y)throw new G;i<s?(a=!0,h=!0):(l=!0,c=!0)}else if(y)throw new G}else throw new G;if(a){if(l)throw new G;Z.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Z.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(h)throw new G;Z.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Z.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Z.SYMBOL_WIDEST=[7,5,4,3,1],Z.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Z.GSUM=[0,348,1388,2948,3988],Z.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Z.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Z.FINDER_PAT_A=0,Z.FINDER_PAT_B=1,Z.FINDER_PAT_C=2,Z.FINDER_PAT_D=3,Z.FINDER_PAT_E=4,Z.FINDER_PAT_F=5,Z.FINDER_PATTERN_SEQUENCES=[[Z.FINDER_PAT_A,Z.FINDER_PAT_A],[Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B],[Z.FINDER_PAT_A,Z.FINDER_PAT_C,Z.FINDER_PAT_B,Z.FINDER_PAT_D],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_C],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_D,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_E,Z.FINDER_PAT_B,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_D],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_E],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F],[Z.FINDER_PAT_A,Z.FINDER_PAT_A,Z.FINDER_PAT_B,Z.FINDER_PAT_B,Z.FINDER_PAT_C,Z.FINDER_PAT_D,Z.FINDER_PAT_D,Z.FINDER_PAT_E,Z.FINDER_PAT_E,Z.FINDER_PAT_F,Z.FINDER_PAT_F]],Z.MAX_PAIRS=11;class $g extends mi{constructor(n,i,s){super(n,i),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class st extends bt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,s){const a=this.decodePair(i,!1,n,s);st.addOrTally(this.possibleLeftPairs,a),i.reverse();let l=this.decodePair(i,!0,n,s);st.addOrTally(this.possibleRightPairs,l),i.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&st.checkChecksum(c,h))return st.constructResult(c,h)}throw new G}static addOrTally(n,i){if(i==null)return;let s=!1;for(let a of n)if(a.getValue()===i.getValue()){a.incrementCount(),s=!0;break}s||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let s=4537077*n.getValue()+i.getValue(),a=new String(s).toString(),l=new we;for(let p=13-a.length;p>0;p--)l.append("0");l.append(a);let c=0;for(let p=0;p<13;p++){let y=l.charAt(p).charCodeAt(0)-48;c+=p&1?y:3*y}c=10-c%10,c===10&&(c=0),l.append(c.toString());let h=n.getFinderPattern().getResultPoints(),d=i.getFinderPattern().getResultPoints();return new Me(l.toString(),null,0,[h[0],h[1],d[0],d[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(n,i){let s=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,a=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,s===a}decodePair(n,i,s,a){try{let l=this.findFinderPattern(n,i),c=this.parseFoundFinderPattern(n,s,i,l),h=a==null?null:a.get(X.NEED_RESULT_POINT_CALLBACK);if(h!=null){let y=(l[0]+l[1])/2;i&&(y=n.getSize()-1-y),h.foundPossibleResultPoint(new le(y,s))}let d=this.decodeDataCharacter(n,c,!0),p=this.decodeDataCharacter(n,c,!1);return new $g(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(n,i,s){let a=this.getDataCharacterCounters();for(let P=0;P<a.length;P++)a[P]=0;if(s)ht.recordPatternInReverse(n,i.getStartEnd()[0],a);else{ht.recordPattern(n,i.getStartEnd()[1]+1,a);for(let P=0,V=a.length-1;P<V;P++,V--){let $=a[P];a[P]=a[V],a[V]=$}}let l=s?16:15,c=_e.sum(new Int32Array(a))/l,h=this.getOddCounts(),d=this.getEvenCounts(),p=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors();for(let P=0;P<a.length;P++){let V=a[P]/c,$=Math.floor(V+.5);$<1?$=1:$>8&&($=8);let ee=Math.floor(P/2);P&1?(d[ee]=$,y[ee]=V-$):(h[ee]=$,p[ee]=V-$)}this.adjustOddEvenCounts(s,l);let C=0,S=0;for(let P=h.length-1;P>=0;P--)S*=9,S+=h[P],C+=h[P];let N=0,M=0;for(let P=d.length-1;P>=0;P--)N*=9,N+=d[P],M+=d[P];let D=S+3*N;if(s){if(C&1||C>12||C<4)throw new G;let P=(12-C)/2,V=st.OUTSIDE_ODD_WIDEST[P],$=9-V,ee=Un.getRSSvalue(h,V,!1),q=Un.getRSSvalue(d,$,!0),Ie=st.OUTSIDE_EVEN_TOTAL_SUBSET[P],Ee=st.OUTSIDE_GSUM[P];return new mi(ee*Ie+q+Ee,D)}else{if(M&1||M>10||M<4)throw new G;let P=(10-M)/2,V=st.INSIDE_ODD_WIDEST[P],$=9-V,ee=Un.getRSSvalue(h,V,!0),q=Un.getRSSvalue(d,$,!1),Ie=st.INSIDE_ODD_TOTAL_SUBSET[P],Ee=st.INSIDE_GSUM[P];return new mi(q*Ie+ee+Ee,D)}}findFinderPattern(n,i){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let a=n.getSize(),l=!1,c=0;for(;c<a&&(l=!n.get(c),i!==l);)c++;let h=0,d=c;for(let p=c;p<a;p++)if(n.get(p)!==l)s[h]++;else{if(h===3){if(bt.isFinderPattern(s))return[d,p];d+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,h--}else h++;s[h]=1,l=!l}throw new G}parseFoundFinderPattern(n,i,s,a){let l=n.get(a[0]),c=a[0]-1;for(;c>=0&&l!==n.get(c);)c--;c++;const h=a[0]-c,d=this.getDecodeFinderCounters(),p=new Int32Array(d.length);B.arraycopy(d,0,p,1,d.length-1),p[0]=h;const y=this.parseFinderValue(p,st.FINDER_PATTERNS);let C=c,S=a[1];return s&&(C=n.getSize()-1-C,S=n.getSize()-1-S),new Ao(y,[c,a[1]],C,S,i)}adjustOddEvenCounts(n,i){let s=_e.sum(new Int32Array(this.getOddCounts())),a=_e.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1,h=!1,d=!1;n?(s>12?c=!0:s<4&&(l=!0),a>12?d=!0:a<4&&(h=!0)):(s>11?c=!0:s<5&&(l=!0),a>10?d=!0:a<4&&(h=!0));let p=s+a-i,y=(s&1)===(n?1:0),C=(a&1)===1;if(p===1)if(y){if(C)throw new G;c=!0}else{if(!C)throw new G;d=!0}else if(p===-1)if(y){if(C)throw new G;l=!0}else{if(!C)throw new G;h=!0}else if(p===0){if(y){if(!C)throw new G;s<a?(l=!0,d=!0):(c=!0,h=!0)}else if(C)throw new G}else throw new G;if(l){if(c)throw new G;bt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&bt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(d)throw new G;bt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&bt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],st.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],st.OUTSIDE_GSUM=[0,161,961,2015,2715],st.INSIDE_GSUM=[0,336,1036,1516],st.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],st.INSIDE_ODD_WIDEST=[2,4,6,8],st.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yi extends ht{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const s=n?n.get(X.POSSIBLE_FORMATS):null,a=n&&n.get(X.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(ae.EAN_13)||s.includes(ae.UPC_A)||s.includes(ae.EAN_8)||s.includes(ae.UPC_E))&&this.readers.push(new pl(n)),s.includes(ae.CODE_39)&&this.readers.push(new mt(a)),s.includes(ae.CODE_128)&&this.readers.push(new ne),s.includes(ae.ITF)&&this.readers.push(new je),s.includes(ae.RSS_14)&&this.readers.push(new st),s.includes(ae.RSS_EXPANDED)&&this.readers.push(new Z(this.verbose))):(this.readers.push(new pl(n)),this.readers.push(new mt),this.readers.push(new pl(n)),this.readers.push(new ne),this.readers.push(new je),this.readers.push(new st),this.readers.push(new Z(this.verbose)))}decodeRow(n,i,s){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(n,i,s)}catch{}throw new G}reset(){this.readers.forEach(n=>n.reset())}}class ep extends Be{constructor(n=500,i){super(new yi(i),n,i)}}class ke{constructor(n,i,s){this.ecCodewords=n,this.ecBlocks=[i],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Le{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ve{constructor(n,i,s,a,l,c){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=s,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=l,this.ecBlocks=c;let h=0;const d=c.getECCodewords(),p=c.getECBlocks();for(let y of p)h+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if(n&1||i&1)throw new b;for(let s of ve.VERSIONS)if(s.symbolSizeRows===n&&s.symbolSizeColumns===i)return s;throw new b}toString(){return""+this.versionNumber}static buildVersions(){return[new ve(1,10,10,8,8,new ke(5,new Le(1,3))),new ve(2,12,12,10,10,new ke(7,new Le(1,5))),new ve(3,14,14,12,12,new ke(10,new Le(1,8))),new ve(4,16,16,14,14,new ke(12,new Le(1,12))),new ve(5,18,18,16,16,new ke(14,new Le(1,18))),new ve(6,20,20,18,18,new ke(18,new Le(1,22))),new ve(7,22,22,20,20,new ke(20,new Le(1,30))),new ve(8,24,24,22,22,new ke(24,new Le(1,36))),new ve(9,26,26,24,24,new ke(28,new Le(1,44))),new ve(10,32,32,14,14,new ke(36,new Le(1,62))),new ve(11,36,36,16,16,new ke(42,new Le(1,86))),new ve(12,40,40,18,18,new ke(48,new Le(1,114))),new ve(13,44,44,20,20,new ke(56,new Le(1,144))),new ve(14,48,48,22,22,new ke(68,new Le(1,174))),new ve(15,52,52,24,24,new ke(42,new Le(2,102))),new ve(16,64,64,14,14,new ke(56,new Le(2,140))),new ve(17,72,72,16,16,new ke(36,new Le(4,92))),new ve(18,80,80,18,18,new ke(48,new Le(4,114))),new ve(19,88,88,20,20,new ke(56,new Le(4,144))),new ve(20,96,96,22,22,new ke(68,new Le(4,174))),new ve(21,104,104,24,24,new ke(56,new Le(6,136))),new ve(22,120,120,18,18,new ke(68,new Le(6,175))),new ve(23,132,132,20,20,new ke(62,new Le(8,163))),new ve(24,144,144,22,22,new ke(62,new Le(8,156),new Le(2,155))),new ve(25,8,18,6,16,new ke(7,new Le(1,5))),new ve(26,8,32,6,14,new ke(11,new Le(1,10))),new ve(27,12,26,10,24,new ke(14,new Le(1,16))),new ve(28,12,36,10,16,new ke(18,new Le(1,22))),new ve(29,16,36,14,16,new ke(24,new Le(1,32))),new ve(30,16,48,14,22,new ke(28,new Le(1,49)))]}}ve.VERSIONS=ve.buildVersions();class yl{constructor(n){const i=n.getHeight();if(i<8||i>144||i&1)throw new b;this.version=yl.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new $e(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),s=n.getWidth();return ve.getVersionForDimensions(i,s)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,s=4,a=0;const l=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let h=!1,d=!1,p=!1,y=!1;do if(s===l&&a===0&&!h)n[i++]=this.readCorner1(l,c)&255,s-=2,a+=2,h=!0;else if(s===l-2&&a===0&&c&3&&!d)n[i++]=this.readCorner2(l,c)&255,s-=2,a+=2,d=!0;else if(s===l+4&&a===2&&!(c&7)&&!p)n[i++]=this.readCorner3(l,c)&255,s-=2,a+=2,p=!0;else if(s===l-2&&a===0&&(c&7)===4&&!y)n[i++]=this.readCorner4(l,c)&255,s-=2,a+=2,y=!0;else{do s<l&&a>=0&&!this.readMappingMatrix.get(a,s)&&(n[i++]=this.readUtah(s,a,l,c)&255),s-=2,a+=2;while(s>=0&&a<c);s+=1,a+=3;do s>=0&&a<c&&!this.readMappingMatrix.get(a,s)&&(n[i++]=this.readUtah(s,a,l,c)&255),s+=2,a-=2;while(s<l&&a>=0);s+=3,a+=1}while(s<l||a<c);if(i!==this.version.getTotalCodewords())throw new b;return n}readModule(n,i,s,a){return n<0&&(n+=s,i+=4-(s+4&7)),i<0&&(i+=a,n+=4-(a+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,s,a){let l=0;return this.readModule(n-2,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n-2,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i,s,a)&&(l|=1),l<<=1,this.readModule(n,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n,i,s,a)&&(l|=1),l}readCorner1(n,i){let s=0;return this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,1,n,i)&&(s|=1),s<<=1,this.readModule(n-1,2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(2,i-1,n,i)&&(s|=1),s<<=1,this.readModule(3,i-1,n,i)&&(s|=1),s}readCorner2(n,i){let s=0;return this.readModule(n-3,0,n,i)&&(s|=1),s<<=1,this.readModule(n-2,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(0,i-4,n,i)&&(s|=1),s<<=1,this.readModule(0,i-3,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s}readCorner3(n,i){let s=0;return this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(0,i-3,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-3,n,i)&&(s|=1),s<<=1,this.readModule(1,i-2,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s}readCorner4(n,i){let s=0;return this.readModule(n-3,0,n,i)&&(s|=1),s<<=1,this.readModule(n-2,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(2,i-1,n,i)&&(s|=1),s<<=1,this.readModule(3,i-1,n,i)&&(s|=1),s}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new I("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),c=i/a|0,h=s/l|0,d=c*a,p=h*l,y=new $e(p,d);for(let C=0;C<c;++C){const S=C*a;for(let N=0;N<h;++N){const M=N*l;for(let D=0;D<a;++D){const P=C*(a+2)+1+D,V=S+D;for(let $=0;$<l;++$){const ee=N*(l+2)+1+$;if(n.get(ee,P)){const q=M+$;y.set(q,V)}}}}}return y}}class El{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const s=i.getECBlocks();let a=0;const l=s.getECBlocks();for(let D of l)a+=D.getCount();const c=new Array(a);let h=0;for(let D of l)for(let P=0;P<D.getCount();P++){const V=D.getDataCodewords(),$=s.getECCodewords()+V;c[h++]=new El(V,new Uint8Array($))}const p=c[0].codewords.length-s.getECCodewords(),y=p-1;let C=0;for(let D=0;D<y;D++)for(let P=0;P<h;P++)c[P].codewords[D]=n[C++];const S=i.getVersionNumber()===24,N=S?8:h;for(let D=0;D<N;D++)c[D].codewords[p-1]=n[C++];const M=c[0].codewords.length;for(let D=p;D<M;D++)for(let P=0;P<h;P++){const V=S?(P+8)%h:P,$=S&&V>7?D-1:D;c[V].codewords[$]=n[C++]}if(C!==n.length)throw new I;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Cl{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new I(""+n);let i=0,s=this.bitOffset,a=this.byteOffset;const l=this.bytes;if(s>0){const c=8-s,h=n<c?n:c,d=c-h,p=255>>8-h<<d;i=(l[a]&p)>>d,n-=h,s+=h,s===8&&(s=0,a++)}if(n>0){for(;n>=8;)i=i<<8|l[a]&255,a++,n-=8;if(n>0){const c=8-n,h=255>>c<<c;i=i<<n|(l[a]&h)>>c,s+=n}}return this.bitOffset=s,this.byteOffset=a,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var xt;(function(E){E[E.PAD_ENCODE=0]="PAD_ENCODE",E[E.ASCII_ENCODE=1]="ASCII_ENCODE",E[E.C40_ENCODE=2]="C40_ENCODE",E[E.TEXT_ENCODE=3]="TEXT_ENCODE",E[E.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",E[E.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",E[E.BASE256_ENCODE=6]="BASE256_ENCODE"})(xt||(xt={}));class gr{static decode(n){const i=new Cl(n),s=new we,a=new we,l=new Array;let c=xt.ASCII_ENCODE;do if(c===xt.ASCII_ENCODE)c=this.decodeAsciiSegment(i,s,a);else{switch(c){case xt.C40_ENCODE:this.decodeC40Segment(i,s);break;case xt.TEXT_ENCODE:this.decodeTextSegment(i,s);break;case xt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,s);break;case xt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,s);break;case xt.BASE256_ENCODE:this.decodeBase256Segment(i,s,l);break;default:throw new b}c=xt.ASCII_ENCODE}while(c!==xt.PAD_ENCODE&&i.available()>0);return a.length()>0&&s.append(a.toString()),new Gr(n,s.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(n,i,s){let a=!1;do{let l=n.readBits(8);if(l===0)throw new b;if(l<=128)return a&&(l+=128),i.append(String.fromCharCode(l-1)),xt.ASCII_ENCODE;if(l===129)return xt.PAD_ENCODE;if(l<=229){const c=l-130;c<10&&i.append("0"),i.append(""+c)}else switch(l){case 230:return xt.C40_ENCODE;case 231:return xt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:i.append("[)>05"),s.insert(0,"");break;case 237:i.append("[)>06"),s.insert(0,"");break;case 238:return xt.ANSIX12_ENCODE;case 239:return xt.TEXT_ENCODE;case 240:return xt.EDIFACT_ENCODE;case 241:break;default:if(l!==254||n.available()!==0)throw new b;break}}while(n.available()>0);return xt.ASCII_ENCODE}static decodeC40Segment(n,i){let s=!1;const a=[];let l=0;do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),a);for(let h=0;h<3;h++){const d=a[h];switch(l){case 0:if(d<3)l=d+1;else if(d<this.C40_BASIC_SET_CHARS.length){const p=this.C40_BASIC_SET_CHARS[d];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p)}else throw new b;break;case 1:s?(i.append(String.fromCharCode(d+128)),s=!1):i.append(String.fromCharCode(d)),l=0;break;case 2:if(d<this.C40_SHIFT2_SET_CHARS.length){const p=this.C40_SHIFT2_SET_CHARS[d];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p)}else switch(d){case 27:i.append("");break;case 30:s=!0;break;default:throw new b}l=0;break;case 3:s?(i.append(String.fromCharCode(d+224)),s=!1):i.append(String.fromCharCode(d+96)),l=0;break;default:throw new b}}}while(n.available()>0)}static decodeTextSegment(n,i){let s=!1,a=[],l=0;do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),a);for(let h=0;h<3;h++){const d=a[h];switch(l){case 0:if(d<3)l=d+1;else if(d<this.TEXT_BASIC_SET_CHARS.length){const p=this.TEXT_BASIC_SET_CHARS[d];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p)}else throw new b;break;case 1:s?(i.append(String.fromCharCode(d+128)),s=!1):i.append(String.fromCharCode(d)),l=0;break;case 2:if(d<this.TEXT_SHIFT2_SET_CHARS.length){const p=this.TEXT_SHIFT2_SET_CHARS[d];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p)}else switch(d){case 27:i.append("");break;case 30:s=!0;break;default:throw new b}l=0;break;case 3:if(d<this.TEXT_SHIFT3_SET_CHARS.length){const p=this.TEXT_SHIFT3_SET_CHARS[d];s?(i.append(String.fromCharCode(p.charCodeAt(0)+128)),s=!1):i.append(p),l=0}else throw new b;break;default:throw new b}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const s=[];do{if(n.available()===8)return;const a=n.readBits(8);if(a===254)return;this.parseTwoBytes(a,n.readBits(8),s);for(let l=0;l<3;l++){const c=s[l];switch(c){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(c<14)i.append(String.fromCharCode(c+44));else if(c<40)i.append(String.fromCharCode(c+51));else throw new b;break}}}while(n.available()>0)}static parseTwoBytes(n,i,s){let a=(n<<8)+i-1,l=Math.floor(a/1600);s[0]=l,a-=l*1600,l=Math.floor(a/40),s[1]=l,s[2]=a-l*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let s=0;s<4;s++){let a=n.readBits(6);if(a===31){const l=8-n.getBitOffset();l!==8&&n.readBits(l);return}a&32||(a|=64),i.append(String.fromCharCode(a))}}while(n.available()>0)}static decodeBase256Segment(n,i,s){let a=1+n.getByteOffset();const l=this.unrandomize255State(n.readBits(8),a++);let c;if(l===0?c=n.available()/8|0:l<250?c=l:c=250*(l-249)+this.unrandomize255State(n.readBits(8),a++),c<0)throw new b;const h=new Uint8Array(c);for(let d=0;d<c;d++){if(n.available()<8)throw new b;h[d]=this.unrandomize255State(n.readBits(8),a++)}s.push(h);try{i.append(Ne.decode(h,ce.ISO88591))}catch(d){throw new Fn("Platform does not support required encoding: "+d.message)}}static unrandomize255State(n,i){const s=149*i%255+1,a=n-s;return a>=0?a:a+256}}gr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],gr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],gr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],gr.TEXT_SHIFT2_SET_CHARS=gr.C40_SHIFT2_SET_CHARS,gr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class tp{constructor(){this.rsDecoder=new ls(be.DATA_MATRIX_FIELD_256)}decode(n){const i=new yl(n),s=i.getVersion(),a=i.readCodewords(),l=El.getDataBlocks(a,s);let c=0;for(let p of l)c+=p.getNumDataCodewords();const h=new Uint8Array(c),d=l.length;for(let p=0;p<d;p++){const y=l[p],C=y.getCodewords(),S=y.getNumDataCodewords();this.correctErrors(C,S);for(let N=0;N<S;N++)h[N*d+p]=C[N]}return gr.decode(h)}correctErrors(n,i){const s=new Int32Array(n);try{this.rsDecoder.decode(s,n.length-i)}catch{throw new L}for(let a=0;a<i;a++)n[a]=s[a]}}class ut{constructor(n){this.image=n,this.rectangleDetector=new er(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new G;i=this.shiftToModuleCenter(i);const s=i[0],a=i[1],l=i[2],c=i[3];let h=this.transitionsBetween(s,c)+1,d=this.transitionsBetween(l,c)+1;(h&1)===1&&(h+=1),(d&1)===1&&(d+=1),4*h<7*d&&4*d<7*h&&(h=d=Math.max(h,d));let p=ut.sampleGrid(this.image,s,a,l,c,h,d);return new Eo(p,[s,a,l,c])}static shiftPoint(n,i,s){let a=(i.getX()-n.getX())/(s+1),l=(i.getY()-n.getY())/(s+1);return new le(n.getX()+a,n.getY()+l)}static moveAway(n,i,s){let a=n.getX(),l=n.getY();return a<i?a-=1:a+=1,l<s?l-=1:l+=1,new le(a,l)}detectSolid1(n){let i=n[0],s=n[1],a=n[3],l=n[2],c=this.transitionsBetween(i,s),h=this.transitionsBetween(s,a),d=this.transitionsBetween(a,l),p=this.transitionsBetween(l,i),y=c,C=[l,i,s,a];return y>h&&(y=h,C[0]=i,C[1]=s,C[2]=a,C[3]=l),y>d&&(y=d,C[0]=s,C[1]=a,C[2]=l,C[3]=i),y>p&&(C[0]=a,C[1]=l,C[2]=i,C[3]=s),C}detectSolid2(n){let i=n[0],s=n[1],a=n[2],l=n[3],c=this.transitionsBetween(i,l),h=ut.shiftPoint(s,a,(c+1)*4),d=ut.shiftPoint(a,s,(c+1)*4),p=this.transitionsBetween(h,i),y=this.transitionsBetween(d,l);return p<y?(n[0]=i,n[1]=s,n[2]=a,n[3]=l):(n[0]=s,n[1]=a,n[2]=l,n[3]=i),n}correctTopRight(n){let i=n[0],s=n[1],a=n[2],l=n[3],c=this.transitionsBetween(i,l),h=this.transitionsBetween(s,l),d=ut.shiftPoint(i,s,(h+1)*4),p=ut.shiftPoint(a,s,(c+1)*4);c=this.transitionsBetween(d,l),h=this.transitionsBetween(p,l);let y=new le(l.getX()+(a.getX()-s.getX())/(c+1),l.getY()+(a.getY()-s.getY())/(c+1)),C=new le(l.getX()+(i.getX()-s.getX())/(h+1),l.getY()+(i.getY()-s.getY())/(h+1));if(!this.isValid(y))return this.isValid(C)?C:null;if(!this.isValid(C))return y;let S=this.transitionsBetween(d,y)+this.transitionsBetween(p,y),N=this.transitionsBetween(d,C)+this.transitionsBetween(p,C);return S>N?y:C}shiftToModuleCenter(n){let i=n[0],s=n[1],a=n[2],l=n[3],c=this.transitionsBetween(i,l)+1,h=this.transitionsBetween(a,l)+1,d=ut.shiftPoint(i,s,h*4),p=ut.shiftPoint(a,s,c*4);c=this.transitionsBetween(d,l)+1,h=this.transitionsBetween(p,l)+1,(c&1)===1&&(c+=1),(h&1)===1&&(h+=1);let y=(i.getX()+s.getX()+a.getX()+l.getX())/4,C=(i.getY()+s.getY()+a.getY()+l.getY())/4;i=ut.moveAway(i,y,C),s=ut.moveAway(s,y,C),a=ut.moveAway(a,y,C),l=ut.moveAway(l,y,C);let S,N;return d=ut.shiftPoint(i,s,h*4),d=ut.shiftPoint(d,l,c*4),S=ut.shiftPoint(s,i,h*4),S=ut.shiftPoint(S,a,c*4),p=ut.shiftPoint(a,l,h*4),p=ut.shiftPoint(p,s,c*4),N=ut.shiftPoint(l,a,h*4),N=ut.shiftPoint(N,i,c*4),[d,S,p,N]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,s,a,l,c,h){return hr.getInstance().sampleGrid(n,c,h,.5,.5,c-.5,.5,c-.5,h-.5,.5,h-.5,i.getX(),i.getY(),l.getX(),l.getY(),a.getX(),a.getY(),s.getX(),s.getY())}transitionsBetween(n,i){let s=Math.trunc(n.getX()),a=Math.trunc(n.getY()),l=Math.trunc(i.getX()),c=Math.trunc(i.getY()),h=Math.abs(c-a)>Math.abs(l-s);if(h){let D=s;s=a,a=D,D=l,l=c,c=D}let d=Math.abs(l-s),p=Math.abs(c-a),y=-d/2,C=a<c?1:-1,S=s<l?1:-1,N=0,M=this.image.get(h?a:s,h?s:a);for(let D=s,P=a;D!==l;D+=S){let V=this.image.get(h?P:D,h?D:P);if(V!==M&&(N++,M=V),y+=p,y>0){if(P===c)break;P+=C,y-=d}}return N}}class pr{constructor(){this.decoder=new tp}decode(n,i=null){let s,a;if(i!=null&&i.has(X.PURE_BARCODE)){const p=pr.extractPureBits(n.getBlackMatrix());s=this.decoder.decode(p),a=pr.NO_POINTS}else{const p=new ut(n.getBlackMatrix()).detect();s=this.decoder.decode(p.getBits()),a=p.getPoints()}const l=s.getRawBytes(),c=new Me(s.getText(),l,8*l.length,a,ae.DATA_MATRIX,B.currentTimeMillis()),h=s.getByteSegments();h!=null&&c.putMetadata(ft.BYTE_SEGMENTS,h);const d=s.getECLevel();return d!=null&&c.putMetadata(ft.ERROR_CORRECTION_LEVEL,d),c}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),s=n.getBottomRightOnBit();if(i==null||s==null)throw new G;const a=this.moduleSize(i,n);let l=i[1];const c=s[1];let h=i[0];const p=(s[0]-h+1)/a,y=(c-l+1)/a;if(p<=0||y<=0)throw new G;const C=a/2;l+=C,h+=C;const S=new $e(p,y);for(let N=0;N<y;N++){const M=l+N*a;for(let D=0;D<p;D++)n.get(h+D*a,M)&&S.set(D,N)}return S}static moduleSize(n,i){const s=i.getWidth();let a=n[0];const l=n[1];for(;a<s&&i.get(a,l);)a++;if(a===s)throw new G;const c=a-n[0];if(c===0)throw new G;return c}}pr.NO_POINTS=[];class np extends Be{constructor(n=500){super(new pr,n)}}var Ei;(function(E){E[E.L=0]="L",E[E.M=1]="M",E[E.Q=2]="Q",E[E.H=3]="H"})(Ei||(Ei={}));class We{constructor(n,i,s){this.value=n,this.stringValue=i,this.bits=s,We.FOR_BITS.set(s,this),We.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return We.L;case"M":return We.M;case"Q":return We.Q;case"H":return We.H;default:throw new A(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof We))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=We.FOR_BITS.size)throw new I;return We.FOR_BITS.get(n)}}We.FOR_BITS=new Map,We.FOR_VALUE=new Map,We.L=new We(Ei.L,"L",1),We.M=new We(Ei.M,"M",0),We.Q=new We(Ei.Q,"Q",3),We.H=new We(Ei.H,"H",2);class Dt{constructor(n){this.errorCorrectionLevel=We.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return _.bitCount(n^i)}static decodeFormatInformation(n,i){const s=Dt.doDecodeFormatInformation(n,i);return s!==null?s:Dt.doDecodeFormatInformation(n^Dt.FORMAT_INFO_MASK_QR,i^Dt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let s=Number.MAX_SAFE_INTEGER,a=0;for(const l of Dt.FORMAT_INFO_DECODE_LOOKUP){const c=l[0];if(c===n||c===i)return new Dt(l[1]);let h=Dt.numBitsDiffering(n,c);h<s&&(a=l[1],s=h),n!==i&&(h=Dt.numBitsDiffering(i,c),h<s&&(a=l[1],s=h))}return s<=3?new Dt(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Dt))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Dt.FORMAT_INFO_MASK_QR=21522,Dt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class U{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const s of i)n+=s.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class v{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class he{constructor(n,i,...s){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=s;let a=0;const l=s[0].getECCodewordsPerBlock(),c=s[0].getECBlocks();for(const h of c)a+=h.getCount()*(h.getDataCodewords()+l);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new b;try{return this.getVersionForNumber((n-17)/4)}catch{throw new b}}static getVersionForNumber(n){if(n<1||n>40)throw new I;return he.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,s=0;for(let a=0;a<he.VERSION_DECODE_INFO.length;a++){const l=he.VERSION_DECODE_INFO[a];if(l===n)return he.getVersionForNumber(a+7);const c=Dt.numBitsDiffering(n,l);c<i&&(s=a+7,i=c)}return i<=3?he.getVersionForNumber(s):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new $e(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const s=this.alignmentPatternCenters.length;for(let a=0;a<s;a++){const l=this.alignmentPatternCenters[a]-2;for(let c=0;c<s;c++)a===0&&(c===0||c===s-1)||a===s-1&&c===0||i.setRegion(this.alignmentPatternCenters[c]-2,l,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}he.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),he.VERSIONS=[new he(1,new Int32Array(0),new U(7,new v(1,19)),new U(10,new v(1,16)),new U(13,new v(1,13)),new U(17,new v(1,9))),new he(2,Int32Array.from([6,18]),new U(10,new v(1,34)),new U(16,new v(1,28)),new U(22,new v(1,22)),new U(28,new v(1,16))),new he(3,Int32Array.from([6,22]),new U(15,new v(1,55)),new U(26,new v(1,44)),new U(18,new v(2,17)),new U(22,new v(2,13))),new he(4,Int32Array.from([6,26]),new U(20,new v(1,80)),new U(18,new v(2,32)),new U(26,new v(2,24)),new U(16,new v(4,9))),new he(5,Int32Array.from([6,30]),new U(26,new v(1,108)),new U(24,new v(2,43)),new U(18,new v(2,15),new v(2,16)),new U(22,new v(2,11),new v(2,12))),new he(6,Int32Array.from([6,34]),new U(18,new v(2,68)),new U(16,new v(4,27)),new U(24,new v(4,19)),new U(28,new v(4,15))),new he(7,Int32Array.from([6,22,38]),new U(20,new v(2,78)),new U(18,new v(4,31)),new U(18,new v(2,14),new v(4,15)),new U(26,new v(4,13),new v(1,14))),new he(8,Int32Array.from([6,24,42]),new U(24,new v(2,97)),new U(22,new v(2,38),new v(2,39)),new U(22,new v(4,18),new v(2,19)),new U(26,new v(4,14),new v(2,15))),new he(9,Int32Array.from([6,26,46]),new U(30,new v(2,116)),new U(22,new v(3,36),new v(2,37)),new U(20,new v(4,16),new v(4,17)),new U(24,new v(4,12),new v(4,13))),new he(10,Int32Array.from([6,28,50]),new U(18,new v(2,68),new v(2,69)),new U(26,new v(4,43),new v(1,44)),new U(24,new v(6,19),new v(2,20)),new U(28,new v(6,15),new v(2,16))),new he(11,Int32Array.from([6,30,54]),new U(20,new v(4,81)),new U(30,new v(1,50),new v(4,51)),new U(28,new v(4,22),new v(4,23)),new U(24,new v(3,12),new v(8,13))),new he(12,Int32Array.from([6,32,58]),new U(24,new v(2,92),new v(2,93)),new U(22,new v(6,36),new v(2,37)),new U(26,new v(4,20),new v(6,21)),new U(28,new v(7,14),new v(4,15))),new he(13,Int32Array.from([6,34,62]),new U(26,new v(4,107)),new U(22,new v(8,37),new v(1,38)),new U(24,new v(8,20),new v(4,21)),new U(22,new v(12,11),new v(4,12))),new he(14,Int32Array.from([6,26,46,66]),new U(30,new v(3,115),new v(1,116)),new U(24,new v(4,40),new v(5,41)),new U(20,new v(11,16),new v(5,17)),new U(24,new v(11,12),new v(5,13))),new he(15,Int32Array.from([6,26,48,70]),new U(22,new v(5,87),new v(1,88)),new U(24,new v(5,41),new v(5,42)),new U(30,new v(5,24),new v(7,25)),new U(24,new v(11,12),new v(7,13))),new he(16,Int32Array.from([6,26,50,74]),new U(24,new v(5,98),new v(1,99)),new U(28,new v(7,45),new v(3,46)),new U(24,new v(15,19),new v(2,20)),new U(30,new v(3,15),new v(13,16))),new he(17,Int32Array.from([6,30,54,78]),new U(28,new v(1,107),new v(5,108)),new U(28,new v(10,46),new v(1,47)),new U(28,new v(1,22),new v(15,23)),new U(28,new v(2,14),new v(17,15))),new he(18,Int32Array.from([6,30,56,82]),new U(30,new v(5,120),new v(1,121)),new U(26,new v(9,43),new v(4,44)),new U(28,new v(17,22),new v(1,23)),new U(28,new v(2,14),new v(19,15))),new he(19,Int32Array.from([6,30,58,86]),new U(28,new v(3,113),new v(4,114)),new U(26,new v(3,44),new v(11,45)),new U(26,new v(17,21),new v(4,22)),new U(26,new v(9,13),new v(16,14))),new he(20,Int32Array.from([6,34,62,90]),new U(28,new v(3,107),new v(5,108)),new U(26,new v(3,41),new v(13,42)),new U(30,new v(15,24),new v(5,25)),new U(28,new v(15,15),new v(10,16))),new he(21,Int32Array.from([6,28,50,72,94]),new U(28,new v(4,116),new v(4,117)),new U(26,new v(17,42)),new U(28,new v(17,22),new v(6,23)),new U(30,new v(19,16),new v(6,17))),new he(22,Int32Array.from([6,26,50,74,98]),new U(28,new v(2,111),new v(7,112)),new U(28,new v(17,46)),new U(30,new v(7,24),new v(16,25)),new U(24,new v(34,13))),new he(23,Int32Array.from([6,30,54,78,102]),new U(30,new v(4,121),new v(5,122)),new U(28,new v(4,47),new v(14,48)),new U(30,new v(11,24),new v(14,25)),new U(30,new v(16,15),new v(14,16))),new he(24,Int32Array.from([6,28,54,80,106]),new U(30,new v(6,117),new v(4,118)),new U(28,new v(6,45),new v(14,46)),new U(30,new v(11,24),new v(16,25)),new U(30,new v(30,16),new v(2,17))),new he(25,Int32Array.from([6,32,58,84,110]),new U(26,new v(8,106),new v(4,107)),new U(28,new v(8,47),new v(13,48)),new U(30,new v(7,24),new v(22,25)),new U(30,new v(22,15),new v(13,16))),new he(26,Int32Array.from([6,30,58,86,114]),new U(28,new v(10,114),new v(2,115)),new U(28,new v(19,46),new v(4,47)),new U(28,new v(28,22),new v(6,23)),new U(30,new v(33,16),new v(4,17))),new he(27,Int32Array.from([6,34,62,90,118]),new U(30,new v(8,122),new v(4,123)),new U(28,new v(22,45),new v(3,46)),new U(30,new v(8,23),new v(26,24)),new U(30,new v(12,15),new v(28,16))),new he(28,Int32Array.from([6,26,50,74,98,122]),new U(30,new v(3,117),new v(10,118)),new U(28,new v(3,45),new v(23,46)),new U(30,new v(4,24),new v(31,25)),new U(30,new v(11,15),new v(31,16))),new he(29,Int32Array.from([6,30,54,78,102,126]),new U(30,new v(7,116),new v(7,117)),new U(28,new v(21,45),new v(7,46)),new U(30,new v(1,23),new v(37,24)),new U(30,new v(19,15),new v(26,16))),new he(30,Int32Array.from([6,26,52,78,104,130]),new U(30,new v(5,115),new v(10,116)),new U(28,new v(19,47),new v(10,48)),new U(30,new v(15,24),new v(25,25)),new U(30,new v(23,15),new v(25,16))),new he(31,Int32Array.from([6,30,56,82,108,134]),new U(30,new v(13,115),new v(3,116)),new U(28,new v(2,46),new v(29,47)),new U(30,new v(42,24),new v(1,25)),new U(30,new v(23,15),new v(28,16))),new he(32,Int32Array.from([6,34,60,86,112,138]),new U(30,new v(17,115)),new U(28,new v(10,46),new v(23,47)),new U(30,new v(10,24),new v(35,25)),new U(30,new v(19,15),new v(35,16))),new he(33,Int32Array.from([6,30,58,86,114,142]),new U(30,new v(17,115),new v(1,116)),new U(28,new v(14,46),new v(21,47)),new U(30,new v(29,24),new v(19,25)),new U(30,new v(11,15),new v(46,16))),new he(34,Int32Array.from([6,34,62,90,118,146]),new U(30,new v(13,115),new v(6,116)),new U(28,new v(14,46),new v(23,47)),new U(30,new v(44,24),new v(7,25)),new U(30,new v(59,16),new v(1,17))),new he(35,Int32Array.from([6,30,54,78,102,126,150]),new U(30,new v(12,121),new v(7,122)),new U(28,new v(12,47),new v(26,48)),new U(30,new v(39,24),new v(14,25)),new U(30,new v(22,15),new v(41,16))),new he(36,Int32Array.from([6,24,50,76,102,128,154]),new U(30,new v(6,121),new v(14,122)),new U(28,new v(6,47),new v(34,48)),new U(30,new v(46,24),new v(10,25)),new U(30,new v(2,15),new v(64,16))),new he(37,Int32Array.from([6,28,54,80,106,132,158]),new U(30,new v(17,122),new v(4,123)),new U(28,new v(29,46),new v(14,47)),new U(30,new v(49,24),new v(10,25)),new U(30,new v(24,15),new v(46,16))),new he(38,Int32Array.from([6,32,58,84,110,136,162]),new U(30,new v(4,122),new v(18,123)),new U(28,new v(13,46),new v(32,47)),new U(30,new v(48,24),new v(14,25)),new U(30,new v(42,15),new v(32,16))),new he(39,Int32Array.from([6,26,54,82,110,138,166]),new U(30,new v(20,117),new v(4,118)),new U(28,new v(40,47),new v(7,48)),new U(30,new v(43,24),new v(22,25)),new U(30,new v(10,15),new v(67,16))),new he(40,Int32Array.from([6,30,58,86,114,142,170]),new U(30,new v(19,118),new v(6,119)),new U(28,new v(18,47),new v(31,48)),new U(30,new v(34,24),new v(34,25)),new U(30,new v(20,15),new v(61,16)))];var Ct;(function(E){E[E.DATA_MASK_000=0]="DATA_MASK_000",E[E.DATA_MASK_001=1]="DATA_MASK_001",E[E.DATA_MASK_010=2]="DATA_MASK_010",E[E.DATA_MASK_011=3]="DATA_MASK_011",E[E.DATA_MASK_100=4]="DATA_MASK_100",E[E.DATA_MASK_101=5]="DATA_MASK_101",E[E.DATA_MASK_110=6]="DATA_MASK_110",E[E.DATA_MASK_111=7]="DATA_MASK_111"})(Ct||(Ct={}));class gn{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let s=0;s<i;s++)for(let a=0;a<i;a++)this.isMasked(s,a)&&n.flip(a,s)}}gn.values=new Map([[Ct.DATA_MASK_000,new gn(Ct.DATA_MASK_000,(E,n)=>(E+n&1)===0)],[Ct.DATA_MASK_001,new gn(Ct.DATA_MASK_001,(E,n)=>(E&1)===0)],[Ct.DATA_MASK_010,new gn(Ct.DATA_MASK_010,(E,n)=>n%3===0)],[Ct.DATA_MASK_011,new gn(Ct.DATA_MASK_011,(E,n)=>(E+n)%3===0)],[Ct.DATA_MASK_100,new gn(Ct.DATA_MASK_100,(E,n)=>(Math.floor(E/2)+Math.floor(n/3)&1)===0)],[Ct.DATA_MASK_101,new gn(Ct.DATA_MASK_101,(E,n)=>E*n%6===0)],[Ct.DATA_MASK_110,new gn(Ct.DATA_MASK_110,(E,n)=>E*n%6<3)],[Ct.DATA_MASK_111,new gn(Ct.DATA_MASK_111,(E,n)=>(E+n+E*n%3&1)===0)]]);class rp{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new b;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let l=0;l<6;l++)n=this.copyBit(l,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let l=5;l>=0;l--)n=this.copyBit(8,l,n);const i=this.bitMatrix.getHeight();let s=0;const a=i-7;for(let l=i-1;l>=a;l--)s=this.copyBit(8,l,s);for(let l=i-8;l<i;l++)s=this.copyBit(l,8,s);if(this.parsedFormatInfo=Dt.decodeFormatInformation(n,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new b}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return he.getVersionForNumber(i);let s=0;const a=n-11;for(let c=5;c>=0;c--)for(let h=n-9;h>=a;h--)s=this.copyBit(h,c,s);let l=he.decodeVersionInformation(s);if(l!==null&&l.getDimensionForVersion()===n)return this.parsedVersion=l,l;s=0;for(let c=5;c>=0;c--)for(let h=n-9;h>=a;h--)s=this.copyBit(c,h,s);if(l=he.decodeVersionInformation(s),l!==null&&l.getDimensionForVersion()===n)return this.parsedVersion=l,l;throw new b}copyBit(n,i,s){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?s<<1|1:s<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),s=gn.values.get(n.getDataMask()),a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a);const l=i.buildFunctionPattern();let c=!0;const h=new Uint8Array(i.getTotalCodewords());let d=0,p=0,y=0;for(let C=a-1;C>0;C-=2){C===6&&C--;for(let S=0;S<a;S++){const N=c?a-1-S:S;for(let M=0;M<2;M++)l.get(C-M,N)||(y++,p<<=1,this.bitMatrix.get(C-M,N)&&(p|=1),y===8&&(h[d++]=p,y=0,p=0))}c=!c}if(d!==i.getTotalCodewords())throw new b;return h}remask(){if(this.parsedFormatInfo===null)return;const n=gn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,s=n.getWidth();i<s;i++)for(let a=i+1,l=n.getHeight();a<l;a++)n.get(i,a)!==n.get(a,i)&&(n.flip(a,i),n.flip(i,a))}}class Al{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,s){if(n.length!==i.getTotalCodewords())throw new I;const a=i.getECBlocksForLevel(s);let l=0;const c=a.getECBlocks();for(const M of c)l+=M.getCount();const h=new Array(l);let d=0;for(const M of c)for(let D=0;D<M.getCount();D++){const P=M.getDataCodewords(),V=a.getECCodewordsPerBlock()+P;h[d++]=new Al(P,new Uint8Array(V))}const p=h[0].codewords.length;let y=h.length-1;for(;y>=0&&h[y].codewords.length!==p;)y--;y++;const C=p-a.getECCodewordsPerBlock();let S=0;for(let M=0;M<C;M++)for(let D=0;D<d;D++)h[D].codewords[M]=n[S++];for(let M=y;M<d;M++)h[M].codewords[C]=n[S++];const N=h[0].codewords.length;for(let M=C;M<N;M++)for(let D=0;D<d;D++){const P=D<y?M:M+1;h[D].codewords[P]=n[S++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var pn;(function(E){E[E.TERMINATOR=0]="TERMINATOR",E[E.NUMERIC=1]="NUMERIC",E[E.ALPHANUMERIC=2]="ALPHANUMERIC",E[E.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",E[E.BYTE=4]="BYTE",E[E.ECI=5]="ECI",E[E.KANJI=6]="KANJI",E[E.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",E[E.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",E[E.HANZI=9]="HANZI"})(pn||(pn={}));class de{constructor(n,i,s,a){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=s,this.bits=a,de.FOR_BITS.set(a,this),de.FOR_VALUE.set(n,this)}static forBits(n){const i=de.FOR_BITS.get(n);if(i===void 0)throw new I;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let s;return i<=9?s=0:i<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof de))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}de.FOR_BITS=new Map,de.FOR_VALUE=new Map,de.TERMINATOR=new de(pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),de.NUMERIC=new de(pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),de.ALPHANUMERIC=new de(pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),de.STRUCTURED_APPEND=new de(pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),de.BYTE=new de(pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),de.ECI=new de(pn.ECI,"ECI",Int32Array.from([0,0,0]),7),de.KANJI=new de(pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),de.FNC1_FIRST_POSITION=new de(pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),de.FNC1_SECOND_POSITION=new de(pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),de.HANZI=new de(pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class et{static decode(n,i,s,a){const l=new Cl(n);let c=new we;const h=new Array;let d=-1,p=-1;try{let y=null,C=!1,S;do{if(l.available()<4)S=de.TERMINATOR;else{const N=l.readBits(4);S=de.forBits(N)}switch(S){case de.TERMINATOR:break;case de.FNC1_FIRST_POSITION:case de.FNC1_SECOND_POSITION:C=!0;break;case de.STRUCTURED_APPEND:if(l.available()<16)throw new b;d=l.readBits(8),p=l.readBits(8);break;case de.ECI:const N=et.parseECIValue(l);if(y=H.getCharacterSetECIByValue(N),y===null)throw new b;break;case de.HANZI:const M=l.readBits(4),D=l.readBits(S.getCharacterCountBits(i));M===et.GB2312_SUBSET&&et.decodeHanziSegment(l,c,D);break;default:const P=l.readBits(S.getCharacterCountBits(i));switch(S){case de.NUMERIC:et.decodeNumericSegment(l,c,P);break;case de.ALPHANUMERIC:et.decodeAlphanumericSegment(l,c,P,C);break;case de.BYTE:et.decodeByteSegment(l,c,P,y,h,a);break;case de.KANJI:et.decodeKanjiSegment(l,c,P);break;default:throw new b}break}}while(S!==de.TERMINATOR)}catch{throw new b}return new Gr(n,c.toString(),h.length===0?null:h,s===null?null:s.toString(),d,p)}static decodeHanziSegment(n,i,s){if(s*13>n.available())throw new b;const a=new Uint8Array(2*s);let l=0;for(;s>0;){const c=n.readBits(13);let h=c/96<<8&4294967295|c%96;h<959?h+=41377:h+=42657,a[l]=h>>8&255,a[l+1]=h&255,l+=2,s--}try{i.append(Ne.decode(a,ce.GB2312))}catch(c){throw new b(c)}}static decodeKanjiSegment(n,i,s){if(s*13>n.available())throw new b;const a=new Uint8Array(2*s);let l=0;for(;s>0;){const c=n.readBits(13);let h=c/192<<8&4294967295|c%192;h<7936?h+=33088:h+=49472,a[l]=h>>8,a[l+1]=h,l+=2,s--}try{i.append(Ne.decode(a,ce.SHIFT_JIS))}catch(c){throw new b(c)}}static decodeByteSegment(n,i,s,a,l,c){if(8*s>n.available())throw new b;const h=new Uint8Array(s);for(let p=0;p<s;p++)h[p]=n.readBits(8);let d;a===null?d=ce.guessEncoding(h,c):d=a.getName();try{i.append(Ne.decode(h,d))}catch(p){throw new b(p)}l.push(h)}static toAlphaNumericChar(n){if(n>=et.ALPHANUMERIC_CHARS.length)throw new b;return et.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,s,a){const l=i.length();for(;s>1;){if(n.available()<11)throw new b;const c=n.readBits(11);i.append(et.toAlphaNumericChar(Math.floor(c/45))),i.append(et.toAlphaNumericChar(c%45)),s-=2}if(s===1){if(n.available()<6)throw new b;i.append(et.toAlphaNumericChar(n.readBits(6)))}if(a)for(let c=l;c<i.length();c++)i.charAt(c)==="%"&&(c<i.length()-1&&i.charAt(c+1)==="%"?i.deleteCharAt(c+1):i.setCharAt(c,""))}static decodeNumericSegment(n,i,s){for(;s>=3;){if(n.available()<10)throw new b;const a=n.readBits(10);if(a>=1e3)throw new b;i.append(et.toAlphaNumericChar(Math.floor(a/100))),i.append(et.toAlphaNumericChar(Math.floor(a/10)%10)),i.append(et.toAlphaNumericChar(a%10)),s-=3}if(s===2){if(n.available()<7)throw new b;const a=n.readBits(7);if(a>=100)throw new b;i.append(et.toAlphaNumericChar(Math.floor(a/10))),i.append(et.toAlphaNumericChar(a%10))}else if(s===1){if(n.available()<4)throw new b;const a=n.readBits(4);if(a>=10)throw new b;i.append(et.toAlphaNumericChar(a))}}static parseECIValue(n){const i=n.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const s=n.readBits(8);return(i&63)<<8&4294967295|s}if((i&224)===192){const s=n.readBits(16);return(i&31)<<16&4294967295|s}throw new b}}et.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",et.GB2312_SUBSET=1;class Uf{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class ip{constructor(){this.rsDecoder=new ls(be.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix($e.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const s=new rp(n);let a=null;try{return this.decodeBitMatrixParser(s,i)}catch(l){a=l}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const l=this.decodeBitMatrixParser(s,i);return l.setOther(new Uf(!0)),l}catch(l){throw a!==null?a:l}}decodeBitMatrixParser(n,i){const s=n.readVersion(),a=n.readFormatInformation().getErrorCorrectionLevel(),l=n.readCodewords(),c=Al.getDataBlocks(l,s,a);let h=0;for(const y of c)h+=y.getNumDataCodewords();const d=new Uint8Array(h);let p=0;for(const y of c){const C=y.getCodewords(),S=y.getNumDataCodewords();this.correctErrors(C,S);for(let N=0;N<S;N++)d[p++]=C[N]}return et.decode(d,s,a,i)}correctErrors(n,i){const s=new Int32Array(n);try{this.rsDecoder.decode(s,n.length-i)}catch{throw new L}for(let a=0;a<i;a++)n[a]=s[a]}}class Sl extends le{constructor(n,i,s){super(n,i),this.estimatedModuleSize=s}aboutEquals(n,i,s){if(Math.abs(i-this.getY())<=n&&Math.abs(s-this.getX())<=n){const a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(n,i,s){const a=(this.getX()+i)/2,l=(this.getY()+n)/2,c=(this.estimatedModuleSize+s)/2;return new Sl(a,l,c)}}class vo{constructor(n,i,s,a,l,c,h){this.image=n,this.startX=i,this.startY=s,this.width=a,this.height=l,this.moduleSize=c,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,s=this.width,a=n+s,l=this.startY+i/2,c=new Int32Array(3),h=this.image;for(let d=0;d<i;d++){const p=l+(d&1?-Math.floor((d+1)/2):Math.floor((d+1)/2));c[0]=0,c[1]=0,c[2]=0;let y=n;for(;y<a&&!h.get(y,p);)y++;let C=0;for(;y<a;){if(h.get(y,p))if(C===1)c[1]++;else if(C===2){if(this.foundPatternCross(c)){const S=this.handlePossibleCenter(c,p,y);if(S!==null)return S}c[0]=c[2],c[1]=1,c[2]=0,C=1}else c[++C]++;else C===1&&C++,c[C]++;y++}if(this.foundPatternCross(c)){const S=this.handlePossibleCenter(c,p,a);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,s=i/2;for(let a=0;a<3;a++)if(Math.abs(i-n[a])>=s)return!1;return!0}crossCheckVertical(n,i,s,a){const l=this.image,c=l.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let d=n;for(;d>=0&&l.get(i,d)&&h[1]<=s;)h[1]++,d--;if(d<0||h[1]>s)return NaN;for(;d>=0&&!l.get(i,d)&&h[0]<=s;)h[0]++,d--;if(h[0]>s)return NaN;for(d=n+1;d<c&&l.get(i,d)&&h[1]<=s;)h[1]++,d++;if(d===c||h[1]>s)return NaN;for(;d<c&&!l.get(i,d)&&h[2]<=s;)h[2]++,d++;if(h[2]>s)return NaN;const p=h[0]+h[1]+h[2];return 5*Math.abs(p-a)>=2*a?NaN:this.foundPatternCross(h)?vo.centerFromEnd(h,d):NaN}handlePossibleCenter(n,i,s){const a=n[0]+n[1]+n[2],l=vo.centerFromEnd(n,s),c=this.crossCheckVertical(i,l,2*n[1],a);if(!isNaN(c)){const h=(n[0]+n[1]+n[2])/3;for(const p of this.possibleCenters)if(p.aboutEquals(h,c,l))return p.combineEstimate(c,l,h);const d=new Sl(l,c,h);this.possibleCenters.push(d),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(d)}return null}}class Il extends le{constructor(n,i,s,a){super(n,i),this.estimatedModuleSize=s,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,s){if(Math.abs(i-this.getY())<=n&&Math.abs(s-this.getX())<=n){const a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(n,i,s){const a=this.count+1,l=(this.count*this.getX()+i)/a,c=(this.count*this.getY()+n)/a,h=(this.count*this.estimatedModuleSize+s)/a;return new Il(l,c,h,a)}}class sp{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class At{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get(X.TRY_HARDER)!==void 0,s=n!=null&&n.get(X.PURE_BARCODE)!==void 0,a=this.image,l=a.getHeight(),c=a.getWidth();let h=Math.floor(3*l/(4*At.MAX_MODULES));(h<At.MIN_SKIP||i)&&(h=At.MIN_SKIP);let d=!1;const p=new Int32Array(5);for(let C=h-1;C<l&&!d;C+=h){p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0;let S=0;for(let N=0;N<c;N++)if(a.get(N,C))(S&1)===1&&S++,p[S]++;else if(S&1)p[S]++;else if(S===4)if(At.foundPatternCross(p)){if(this.handlePossibleCenter(p,C,N,s)===!0)if(h=2,this.hasSkipped===!0)d=this.haveMultiplyConfirmedCenters();else{const D=this.findRowSkip();D>p[2]&&(C+=D-p[2]-h,N=c-1)}else{p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,S=3;continue}S=0,p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0}else p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,S=3;else p[++S]++;At.foundPatternCross(p)&&this.handlePossibleCenter(p,C,c,s)===!0&&(h=p[0],this.hasSkipped&&(d=this.haveMultiplyConfirmedCenters()))}const y=this.selectBestPatterns();return le.orderBestPatterns(y),new sp(y)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let l=0;l<5;l++){const c=n[l];if(c===0)return!1;i+=c}if(i<7)return!1;const s=i/7,a=s/2;return Math.abs(s-n[0])<a&&Math.abs(s-n[1])<a&&Math.abs(3*s-n[2])<3*a&&Math.abs(s-n[3])<a&&Math.abs(s-n[4])<a}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,s,a){const l=this.getCrossCheckStateCount();let c=0;const h=this.image;for(;n>=c&&i>=c&&h.get(i-c,n-c);)l[2]++,c++;if(n<c||i<c)return!1;for(;n>=c&&i>=c&&!h.get(i-c,n-c)&&l[1]<=s;)l[1]++,c++;if(n<c||i<c||l[1]>s)return!1;for(;n>=c&&i>=c&&h.get(i-c,n-c)&&l[0]<=s;)l[0]++,c++;if(l[0]>s)return!1;const d=h.getHeight(),p=h.getWidth();for(c=1;n+c<d&&i+c<p&&h.get(i+c,n+c);)l[2]++,c++;if(n+c>=d||i+c>=p)return!1;for(;n+c<d&&i+c<p&&!h.get(i+c,n+c)&&l[3]<s;)l[3]++,c++;if(n+c>=d||i+c>=p||l[3]>=s)return!1;for(;n+c<d&&i+c<p&&h.get(i+c,n+c)&&l[4]<s;)l[4]++,c++;if(l[4]>=s)return!1;const y=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(y-a)<2*a&&At.foundPatternCross(l)}crossCheckVertical(n,i,s,a){const l=this.image,c=l.getHeight(),h=this.getCrossCheckStateCount();let d=n;for(;d>=0&&l.get(i,d);)h[2]++,d--;if(d<0)return NaN;for(;d>=0&&!l.get(i,d)&&h[1]<=s;)h[1]++,d--;if(d<0||h[1]>s)return NaN;for(;d>=0&&l.get(i,d)&&h[0]<=s;)h[0]++,d--;if(h[0]>s)return NaN;for(d=n+1;d<c&&l.get(i,d);)h[2]++,d++;if(d===c)return NaN;for(;d<c&&!l.get(i,d)&&h[3]<s;)h[3]++,d++;if(d===c||h[3]>=s)return NaN;for(;d<c&&l.get(i,d)&&h[4]<s;)h[4]++,d++;if(h[4]>=s)return NaN;const p=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(p-a)>=2*a?NaN:At.foundPatternCross(h)?At.centerFromEnd(h,d):NaN}crossCheckHorizontal(n,i,s,a){const l=this.image,c=l.getWidth(),h=this.getCrossCheckStateCount();let d=n;for(;d>=0&&l.get(d,i);)h[2]++,d--;if(d<0)return NaN;for(;d>=0&&!l.get(d,i)&&h[1]<=s;)h[1]++,d--;if(d<0||h[1]>s)return NaN;for(;d>=0&&l.get(d,i)&&h[0]<=s;)h[0]++,d--;if(h[0]>s)return NaN;for(d=n+1;d<c&&l.get(d,i);)h[2]++,d++;if(d===c)return NaN;for(;d<c&&!l.get(d,i)&&h[3]<s;)h[3]++,d++;if(d===c||h[3]>=s)return NaN;for(;d<c&&l.get(d,i)&&h[4]<s;)h[4]++,d++;if(h[4]>=s)return NaN;const p=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(p-a)>=a?NaN:At.foundPatternCross(h)?At.centerFromEnd(h,d):NaN}handlePossibleCenter(n,i,s,a){const l=n[0]+n[1]+n[2]+n[3]+n[4];let c=At.centerFromEnd(n,s),h=this.crossCheckVertical(i,Math.floor(c),n[2],l);if(!isNaN(h)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(h),n[2],l),!isNaN(c)&&(!a||this.crossCheckDiagonal(Math.floor(h),Math.floor(c),n[2],l)))){const d=l/7;let p=!1;const y=this.possibleCenters;for(let C=0,S=y.length;C<S;C++){const N=y[C];if(N.aboutEquals(d,h,c)){y[C]=N.combineEstimate(h,c,d),p=!0;break}}if(!p){const C=new Il(c,h,d);y.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const s of this.possibleCenters)if(s.getCount()>=At.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const s=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=At.CENTER_QUORUM&&(n++,i+=c.getEstimatedModuleSize());if(n<3)return!1;const a=i/s;let l=0;for(const c of this.possibleCenters)l+=Math.abs(c.getEstimatedModuleSize()-a);return l<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new G;const i=this.possibleCenters;let s;if(n>3){let a=0,l=0;for(const d of this.possibleCenters){const p=d.getEstimatedModuleSize();a+=p,l+=p*p}s=a/n;let c=Math.sqrt(l/n-s*s);i.sort((d,p)=>{const y=Math.abs(p.getEstimatedModuleSize()-s),C=Math.abs(d.getEstimatedModuleSize()-s);return y<C?-1:y>C?1:0});const h=Math.max(.2*s,c);for(let d=0;d<i.length&&i.length>3;d++){const p=i[d];Math.abs(p.getEstimatedModuleSize()-s)>h&&(i.splice(d,1),d--)}}if(i.length>3){let a=0;for(const l of i)a+=l.getEstimatedModuleSize();s=a/i.length,i.sort((l,c)=>{if(c.getCount()===l.getCount()){const h=Math.abs(c.getEstimatedModuleSize()-s),d=Math.abs(l.getEstimatedModuleSize()-s);return h<d?1:h>d?-1:0}else return c.getCount()-l.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}At.CENTER_QUORUM=2,At.MIN_SKIP=3,At.MAX_MODULES=57;class cs{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(X.NEED_RESULT_POINT_CALLBACK);const s=new At(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(s)}processFinderPatternInfo(n){const i=n.getTopLeft(),s=n.getTopRight(),a=n.getBottomLeft(),l=this.calculateModuleSize(i,s,a);if(l<1)throw new G("No pattern found in proccess finder.");const c=cs.computeDimension(i,s,a,l),h=he.getProvisionalVersionForDimension(c),d=h.getDimensionForVersion()-7;let p=null;if(h.getAlignmentPatternCenters().length>0){const N=s.getX()-i.getX()+a.getX(),M=s.getY()-i.getY()+a.getY(),D=1-3/d,P=Math.floor(i.getX()+D*(N-i.getX())),V=Math.floor(i.getY()+D*(M-i.getY()));for(let $=4;$<=16;$<<=1)try{p=this.findAlignmentInRegion(l,P,V,$);break}catch(ee){if(!(ee instanceof G))throw ee}}const y=cs.createTransform(i,s,a,p,c),C=cs.sampleGrid(this.image,y,c);let S;return p===null?S=[a,i,s]:S=[a,i,s,p],new Eo(C,S)}static createTransform(n,i,s,a,l){const c=l-3.5;let h,d,p,y;return a!==null?(h=a.getX(),d=a.getY(),p=c-3,y=p):(h=i.getX()-n.getX()+s.getX(),d=i.getY()-n.getY()+s.getY(),p=c,y=c),vn.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,p,y,3.5,c,n.getX(),n.getY(),i.getX(),i.getY(),h,d,s.getX(),s.getY())}static sampleGrid(n,i,s){return hr.getInstance().sampleGridWithTransform(n,s,s,i)}static computeDimension(n,i,s,a){const l=_e.round(le.distance(n,i)/a),c=_e.round(le.distance(n,s)/a);let h=Math.floor((l+c)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new G("Dimensions could be not found.")}return h}calculateModuleSize(n,i,s){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,s))/2}calculateModuleSizeOneWay(n,i){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(s)?a/7:isNaN(a)?s/7:(s+a)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,s,a){let l=this.sizeOfBlackWhiteBlackRun(n,i,s,a),c=1,h=n-(s-n);h<0?(c=n/(n-h),h=0):h>=this.image.getWidth()&&(c=(this.image.getWidth()-1-n)/(h-n),h=this.image.getWidth()-1);let d=Math.floor(i-(a-i)*c);return c=1,d<0?(c=i/(i-d),d=0):d>=this.image.getHeight()&&(c=(this.image.getHeight()-1-i)/(d-i),d=this.image.getHeight()-1),h=Math.floor(n+(h-n)*c),l+=this.sizeOfBlackWhiteBlackRun(n,i,h,d),l-1}sizeOfBlackWhiteBlackRun(n,i,s,a){const l=Math.abs(a-i)>Math.abs(s-n);if(l){let N=n;n=i,i=N,N=s,s=a,a=N}const c=Math.abs(s-n),h=Math.abs(a-i);let d=-c/2;const p=n<s?1:-1,y=i<a?1:-1;let C=0;const S=s+p;for(let N=n,M=i;N!==S;N+=p){const D=l?M:N,P=l?N:M;if(C===1===this.image.get(D,P)){if(C===2)return _e.distance(N,M,n,i);C++}if(d+=h,d>0){if(M===a)break;M+=y,d-=c}}return C===2?_e.distance(s+p,a,n,i):NaN}findAlignmentInRegion(n,i,s,a){const l=Math.floor(a*n),c=Math.max(0,i-l),h=Math.min(this.image.getWidth()-1,i+l);if(h-c<n*3)throw new G("Alignment top exceeds estimated module size.");const d=Math.max(0,s-l),p=Math.min(this.image.getHeight()-1,s+l);if(p-d<n*3)throw new G("Alignment bottom exceeds estimated module size.");return new vo(this.image,c,d,h-c,p-d,n,this.resultPointCallback).find()}}class mr{constructor(){this.decoder=new ip}getDecoder(){return this.decoder}decode(n,i){let s,a;if(i!=null&&i.get(X.PURE_BARCODE)!==void 0){const d=mr.extractPureBits(n.getBlackMatrix());s=this.decoder.decodeBitMatrix(d,i),a=mr.NO_POINTS}else{const d=new cs(n.getBlackMatrix()).detect(i);s=this.decoder.decodeBitMatrix(d.getBits(),i),a=d.getPoints()}s.getOther()instanceof Uf&&s.getOther().applyMirroredCorrection(a);const l=new Me(s.getText(),s.getRawBytes(),void 0,a,ae.QR_CODE,void 0),c=s.getByteSegments();c!==null&&l.putMetadata(ft.BYTE_SEGMENTS,c);const h=s.getECLevel();return h!==null&&l.putMetadata(ft.ERROR_CORRECTION_LEVEL,h),s.hasStructuredAppend()&&(l.putMetadata(ft.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),l.putMetadata(ft.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),l}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),s=n.getBottomRightOnBit();if(i===null||s===null)throw new G;const a=this.moduleSize(i,n);let l=i[1],c=s[1],h=i[0],d=s[0];if(h>=d||l>=c)throw new G;if(c-l!==d-h&&(d=h+(c-l),d>=n.getWidth()))throw new G;const p=Math.round((d-h+1)/a),y=Math.round((c-l+1)/a);if(p<=0||y<=0)throw new G;if(y!==p)throw new G;const C=Math.floor(a/2);l+=C,h+=C;const S=h+Math.floor((p-1)*a)-d;if(S>0){if(S>C)throw new G;h-=S}const N=l+Math.floor((y-1)*a)-c;if(N>0){if(N>C)throw new G;l-=N}const M=new $e(p,y);for(let D=0;D<y;D++){const P=l+Math.floor(D*a);for(let V=0;V<p;V++)n.get(h+Math.floor(V*a),P)&&M.set(V,D)}return M}static moduleSize(n,i){const s=i.getHeight(),a=i.getWidth();let l=n[0],c=n[1],h=!0,d=0;for(;l<a&&c<s;){if(h!==i.get(l,c)){if(++d===5)break;h=!h}l++,c++}if(l===a||c===s)throw new G;return(l-n[0])/7}}mr.NO_POINTS=new Array;class xe{PDF417Common(){}static getBitCountSum(n){return _e.sum(n)}static toIntArray(n){if(n==null||!n.length)return xe.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let s=0;for(const a of n)i[s++]=a;return i}static getCodeword(n){const i=T.binarySearch(xe.SYMBOL_TABLE,n&262143);return i<0?-1:(xe.CODEWORD_TABLE[i]-1)%xe.NUMBER_OF_CODEWORDS}}xe.NUMBER_OF_CODEWORDS=929,xe.MAX_CODEWORDS_IN_BARCODE=xe.NUMBER_OF_CODEWORDS-1,xe.MIN_ROWS_IN_BARCODE=3,xe.MAX_ROWS_IN_BARCODE=90,xe.MODULES_IN_CODEWORD=17,xe.MODULES_IN_STOP_PATTERN=18,xe.BARS_IN_MODULE=8,xe.EMPTY_INT_ARRAY=new Int32Array([]),xe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class op{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Ce{static detectMultiple(n,i,s){let a=n.getBlackMatrix(),l=Ce.detect(s,a);return l.length||(a=a.clone(),a.rotate180(),l=Ce.detect(s,a)),new op(a,l)}static detect(n,i){const s=new Array;let a=0,l=0,c=!1;for(;a<i.getHeight();){const h=Ce.findVertices(i,a,l);if(h[0]==null&&h[3]==null){if(!c)break;c=!1,l=0;for(const d of s)d[1]!=null&&(a=Math.trunc(Math.max(a,d[1].getY()))),d[3]!=null&&(a=Math.max(a,Math.trunc(d[3].getY())));a+=Ce.ROW_STEP;continue}if(c=!0,s.push(h),!n)break;h[2]!=null?(l=Math.trunc(h[2].getX()),a=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY()))}return s}static findVertices(n,i,s){const a=n.getHeight(),l=n.getWidth(),c=new Array(8);return Ce.copyToResult(c,Ce.findRowsWithPattern(n,a,l,i,s,Ce.START_PATTERN),Ce.INDEXES_START_PATTERN),c[4]!=null&&(s=Math.trunc(c[4].getX()),i=Math.trunc(c[4].getY())),Ce.copyToResult(c,Ce.findRowsWithPattern(n,a,l,i,s,Ce.STOP_PATTERN),Ce.INDEXES_STOP_PATTERN),c}static copyToResult(n,i,s){for(let a=0;a<s.length;a++)n[s[a]]=i[a]}static findRowsWithPattern(n,i,s,a,l,c){const h=new Array(4);let d=!1;const p=new Int32Array(c.length);for(;a<i;a+=Ce.ROW_STEP){let C=Ce.findGuardPattern(n,l,a,s,!1,c,p);if(C!=null){for(;a>0;){const S=Ce.findGuardPattern(n,l,--a,s,!1,c,p);if(S!=null)C=S;else{a++;break}}h[0]=new le(C[0],a),h[1]=new le(C[1],a),d=!0;break}}let y=a+1;if(d){let C=0,S=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;y<i;y++){const N=Ce.findGuardPattern(n,S[0],y,s,!1,c,p);if(N!=null&&Math.abs(S[0]-N[0])<Ce.MAX_PATTERN_DRIFT&&Math.abs(S[1]-N[1])<Ce.MAX_PATTERN_DRIFT)S=N,C=0;else{if(C>Ce.SKIPPED_ROW_COUNT_MAX)break;C++}}y-=C+1,h[2]=new le(S[0],y),h[3]=new le(S[1],y)}return y-a<Ce.BARCODE_MIN_HEIGHT&&T.fill(h,null),h}static findGuardPattern(n,i,s,a,l,c,h){T.fillWithin(h,0,h.length,0);let d=i,p=0;for(;n.get(d,s)&&d>0&&p++<Ce.MAX_PIXEL_DRIFT;)d--;let y=d,C=0,S=c.length;for(let N=l;y<a;y++)if(n.get(y,s)!==N)h[C]++;else{if(C===S-1){if(Ce.patternMatchVariance(h,c,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return new Int32Array([d,y]);d+=h[0]+h[1],B.arraycopy(h,2,h,0,C-1),h[C-1]=0,h[C]=0,C--}else C++;h[C]=1,N=!N}return C===S-1&&Ce.patternMatchVariance(h,c,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE?new Int32Array([d,y-1]):null}static patternMatchVariance(n,i,s){let a=n.length,l=0,c=0;for(let p=0;p<a;p++)l+=n[p],c+=i[p];if(l<c)return 1/0;let h=l/c;s*=h;let d=0;for(let p=0;p<a;p++){let y=n[p],C=i[p]*h,S=y>C?y-C:C-y;if(S>s)return 1/0;d+=S}return d/l}}Ce.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ce.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ce.MAX_AVG_VARIANCE=.42,Ce.MAX_INDIVIDUAL_VARIANCE=.8,Ce.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ce.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ce.MAX_PIXEL_DRIFT=3,Ce.MAX_PATTERN_DRIFT=5,Ce.SKIPPED_ROW_COUNT_MAX=25,Ce.ROW_STEP=5,Ce.BARCODE_MIN_HEIGHT=10;class Tt{constructor(n,i){if(i.length===0)throw new I;this.field=n;let s=i.length;if(s>1&&i[0]===0){let a=1;for(;a<s&&i[a]===0;)a++;a===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-a),B.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let a=0;for(let l of this.coefficients)a=this.field.add(a,l);return a}let i=this.coefficients[0],s=this.coefficients.length;for(let a=1;a<s;a++)i=this.field.add(this.field.multiply(n,i),this.coefficients[a]);return i}add(n){if(!this.field.equals(n.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,s=n.coefficients;if(i.length>s.length){let c=i;i=s,s=c}let a=new Int32Array(s.length),l=s.length-i.length;B.arraycopy(s,0,a,0,l);for(let c=l;c<s.length;c++)a[c]=this.field.add(i[c-l],s[c]);return new Tt(this.field,a)}subtract(n){if(!this.field.equals(n.field))throw new I("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Tt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Tt(this.field,new Int32Array([0]));let i=this.coefficients,s=i.length,a=n.coefficients,l=a.length,c=new Int32Array(s+l-1);for(let h=0;h<s;h++){let d=i[h];for(let p=0;p<l;p++)c[h+p]=this.field.add(c[h+p],this.field.multiply(d,a[p]))}return new Tt(this.field,c)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let s=0;s<n;s++)i[s]=this.field.subtract(0,this.coefficients[s]);return new Tt(this.field,i)}multiplyScalar(n){if(n===0)return new Tt(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,s=new Int32Array(i);for(let a=0;a<i;a++)s[a]=this.field.multiply(this.coefficients[a],n);return new Tt(this.field,s)}multiplyByMonomial(n,i){if(n<0)throw new I;if(i===0)return new Tt(this.field,new Int32Array([0]));let s=this.coefficients.length,a=new Int32Array(s+n);for(let l=0;l<s;l++)a[l]=this.field.multiply(this.coefficients[l],i);return new Tt(this.field,a)}toString(){let n=new we;for(let i=this.getDegree();i>=0;i--){let s=this.getCoefficient(i);s!==0&&(s<0?(n.append(" - "),s=-s):n.length()>0&&n.append(" + "),(i===0||s!==1)&&n.append(s),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class ap{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new I;return this.logTable[n]}inverse(n){if(n===0)throw new wo;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class vl extends ap{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let s=1;for(let a=0;a<n;a++)this.expTable[a]=s,s=s*i%n;for(let a=0;a<n-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new Tt(this,new Int32Array([0])),this.one=new Tt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new I;if(i===0)return this.zero;let s=new Int32Array(n+1);return s[0]=i,new Tt(this,s)}}vl.PDF417_GF=new vl(xe.NUMBER_OF_CODEWORDS,3);class jf{constructor(){this.field=vl.PDF417_GF}decode(n,i,s){let a=new Tt(this.field,n),l=new Int32Array(i),c=!1;for(let M=i;M>0;M--){let D=a.evaluateAt(this.field.exp(M));l[i-M]=D,D!==0&&(c=!0)}if(!c)return 0;let h=this.field.getOne();if(s!=null)for(const M of s){let D=this.field.exp(n.length-1-M),P=new Tt(this.field,new Int32Array([this.field.subtract(0,D),1]));h=h.multiply(P)}let d=new Tt(this.field,l),p=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),d,i),y=p[0],C=p[1],S=this.findErrorLocations(y),N=this.findErrorMagnitudes(C,y,S);for(let M=0;M<S.length;M++){let D=n.length-1-this.field.log(S[M]);if(D<0)throw L.getChecksumInstance();n[D]=this.field.subtract(n[D],N[M])}return S.length}runEuclideanAlgorithm(n,i,s){if(n.getDegree()<i.getDegree()){let S=n;n=i,i=S}let a=n,l=i,c=this.field.getZero(),h=this.field.getOne();for(;l.getDegree()>=Math.round(s/2);){let S=a,N=c;if(a=l,c=h,a.isZero())throw L.getChecksumInstance();l=S;let M=this.field.getZero(),D=a.getCoefficient(a.getDegree()),P=this.field.inverse(D);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){let V=l.getDegree()-a.getDegree(),$=this.field.multiply(l.getCoefficient(l.getDegree()),P);M=M.add(this.field.buildMonomial(V,$)),l=l.subtract(a.multiplyByMonomial(V,$))}h=M.multiply(c).subtract(N).negative()}let d=h.getCoefficient(0);if(d===0)throw L.getChecksumInstance();let p=this.field.inverse(d),y=h.multiply(p),C=l.multiply(p);return[y,C]}findErrorLocations(n){let i=n.getDegree(),s=new Int32Array(i),a=0;for(let l=1;l<this.field.getSize()&&a<i;l++)n.evaluateAt(l)===0&&(s[a]=this.field.inverse(l),a++);if(a!==i)throw L.getChecksumInstance();return s}findErrorMagnitudes(n,i,s){let a=i.getDegree(),l=new Int32Array(a);for(let p=1;p<=a;p++)l[a-p]=this.field.multiply(p,i.getCoefficient(p));let c=new Tt(this.field,l),h=s.length,d=new Int32Array(h);for(let p=0;p<h;p++){let y=this.field.inverse(s[p]),C=this.field.subtract(0,n.evaluateAt(y)),S=this.field.inverse(c.evaluateAt(y));d[p]=this.field.multiply(C,S)}return d}}class Zr{constructor(n,i,s,a,l){n instanceof Zr?this.constructor_2(n):this.constructor_1(n,i,s,a,l)}constructor_1(n,i,s,a,l){const c=i==null||s==null,h=a==null||l==null;if(c&&h)throw new G;c?(i=new le(0,a.getY()),s=new le(0,l.getY())):h&&(a=new le(n.getWidth()-1,i.getY()),l=new le(n.getWidth()-1,s.getY())),this.image=n,this.topLeft=i,this.bottomLeft=s,this.topRight=a,this.bottomRight=l,this.minX=Math.trunc(Math.min(i.getX(),s.getX())),this.maxX=Math.trunc(Math.max(a.getX(),l.getX())),this.minY=Math.trunc(Math.min(i.getY(),a.getY())),this.maxY=Math.trunc(Math.max(s.getY(),l.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new Zr(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,s){let a=this.topLeft,l=this.bottomLeft,c=this.topRight,h=this.bottomRight;if(n>0){let d=s?this.topLeft:this.topRight,p=Math.trunc(d.getY()-n);p<0&&(p=0);let y=new le(d.getX(),p);s?a=y:c=y}if(i>0){let d=s?this.bottomLeft:this.bottomRight,p=Math.trunc(d.getY()+i);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);let y=new le(d.getX(),p);s?l=y:h=y}return new Zr(this.image,a,l,c,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class lp{constructor(n,i,s,a){this.columnCount=n,this.errorCorrectionLevel=a,this.rowCountUpperPart=i,this.rowCountLowerPart=s,this.rowCount=i+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class fs{constructor(){this.buffer=""}static form(n,i){let s=-1;function a(c,h,d,p,y,C){if(c==="%%")return"%";if(i[++s]===void 0)return;c=p?parseInt(p.substr(1)):void 0;let S=y?parseInt(y.substr(1)):void 0,N;switch(C){case"s":N=i[s];break;case"c":N=i[s][0];break;case"f":N=parseFloat(i[s]).toFixed(c);break;case"p":N=parseFloat(i[s]).toPrecision(c);break;case"e":N=parseFloat(i[s]).toExponential(c);break;case"x":N=parseInt(i[s]).toString(S||16);break;case"d":N=parseFloat(parseInt(i[s],S||10).toPrecision(c)).toFixed(0);break}N=typeof N=="object"?JSON.stringify(N):(+N).toString(S);let M=parseInt(d),D=d&&d[0]+""=="0"?"0":" ";for(;N.length<M;)N=h!==void 0?N+D:D+N;return N}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(l,a)}format(n,...i){this.buffer+=fs.form(n,i)}toString(){return this.buffer}}class hs{constructor(n){this.boundingBox=new Zr(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let s=1;s<hs.MAX_NEARBY_DISTANCE;s++){let a=this.imageRowToCodewordIndex(n)-s;if(a>=0&&(i=this.codewords[a],i!=null)||(a=this.imageRowToCodewordIndex(n)+s,a<this.codewords.length&&(i=this.codewords[a],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new fs;let i=0;for(const s of this.codewords){if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}return n.toString()}}hs.MAX_NEARBY_DISTANCE=5;class ds{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[s,a]of this.values.entries()){const l={getKey:()=>s,getValue:()=>a};l.getValue()>n?(n=l.getValue(),i=[],i.push(l.getKey())):l.getValue()===n&&i.push(l.getKey())}return xe.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class zf extends hs{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),d=-1,p=1,y=0;for(let C=c;C<h;C++){if(i[C]==null)continue;let S=i[C],N=S.getRowNumber()-d;if(N===0)y++;else if(N===1)p=Math.max(p,y),y=1,d=S.getRowNumber();else if(N<0||S.getRowNumber()>=n.getRowCount()||N>C)i[C]=null;else{let M;p>2?M=(p-2)*N:M=N;let D=M>=C;for(let P=1;P<=M&&!D;P++)D=i[C-P]!=null;D?i[C]=null:(d=S.getRowNumber(),y=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let s of this.getCodewords())if(s!=null){let a=s.getRowNumber();if(a>=i.length)continue;i[a]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.getCodewords(),d=-1;for(let p=l;p<c;p++){if(h[p]==null)continue;let y=h[p];y.setRowNumberAsRowIndicatorColumn();let C=y.getRowNumber()-d;C===0||(C===1?d=y.getRowNumber():y.getRowNumber()>=n.getRowCount()?h[p]=null:d=y.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new ds,s=new ds,a=new ds,l=new ds;for(let h of n){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let d=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(d*3+1);break;case 1:l.setValue(d/3),a.setValue(d%3);break;case 2:i.setValue(d+1);break}}if(i.getValue().length===0||s.getValue().length===0||a.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<xe.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>xe.MAX_ROWS_IN_BARCODE)return null;let c=new lp(i.getValue()[0],s.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(n,c),c}removeIncorrectCodewords(n,i){for(let s=0;s<n.length;s++){let a=n[s];if(n[s]==null)continue;let l=a.getValue()%30,c=a.getRowNumber();if(c>i.getRowCount()){n[s]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:l*3+1!==i.getRowCountUpperPart()&&(n[s]=null);break;case 1:(Math.trunc(l/3)!==i.getErrorCorrectionLevel()||l%3!==i.getRowCountLowerPart())&&(n[s]=null);break;case 2:l+1!==i.getColumnCount()&&(n[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class gs{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=xe.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let s=this.detectionResultColumns[i].getCodewords();for(let a=0;a<s.length;a++)s[a]!=null&&(s[a].hasValidRowNumber()||this.adjustRowNumbers(i,a,s))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<n.length;s++)if(n[s]!=null&&i[s]!=null&&n[s].getRowNumber()===i[s].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let l=this.detectionResultColumns[a].getCodewords()[s];l!=null&&(l.setRowNumber(n[s].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<i.length;s++){if(i[s]==null)continue;let a=i[s].getRowNumber(),l=0;for(let c=this.barcodeColumnCount+1;c>0&&l<this.ADJUST_ROW_NUMBER_SKIP;c--){let h=this.detectionResultColumns[c].getCodewords()[s];h!=null&&(l=gs.adjustRowNumberIfValid(a,l,h),h.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let s=0;s<i.length;s++){if(i[s]==null)continue;let a=i[s].getRowNumber(),l=0;for(let c=1;c<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;c++){let h=this.detectionResultColumns[c].getCodewords()[s];h!=null&&(l=gs.adjustRowNumberIfValid(a,l,h),h.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(n)?(s.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,s){if(!this.detectionResultColumns[n-1])return;let a=s[i],l=this.detectionResultColumns[n-1].getCodewords(),c=l;this.detectionResultColumns[n+1]!=null&&(c=this.detectionResultColumns[n+1].getCodewords());let h=new Array(14);h[2]=l[i],h[3]=c[i],i>0&&(h[0]=s[i-1],h[4]=l[i-1],h[5]=c[i-1]),i>1&&(h[8]=s[i-2],h[10]=l[i-2],h[11]=c[i-2]),i<s.length-1&&(h[1]=s[i+1],h[6]=l[i+1],h[7]=c[i+1]),i<s.length-2&&(h[9]=s[i+2],h[12]=l[i+2],h[13]=c[i+2]);for(let d of h)if(gs.adjustRowNumber(a,d))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new fs;for(let s=0;s<n.getCodewords().length;s++){i.format("CW %3d:",s);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){i.format("    |   ");continue}let l=this.detectionResultColumns[a].getCodewords()[s];if(l==null){i.format("    |   ");continue}i.format(" %3d|%3d",l.getRowNumber(),l.getValue())}i.format("%n")}return i.toString()}}class ps{constructor(n,i,s,a){this.rowNumber=ps.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(s),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==ps.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}ps.BARCODE_ROW_UNKNOWN=-1;class Xt{static initialize(){for(let n=0;n<xe.SYMBOL_TABLE.length;n++){let i=xe.SYMBOL_TABLE[n],s=i&1;for(let a=0;a<xe.BARS_IN_MODULE;a++){let l=0;for(;(i&1)===s;)l+=1,i>>=1;s=i&1,Xt.RATIOS_TABLE[n]||(Xt.RATIOS_TABLE[n]=new Array(xe.BARS_IN_MODULE)),Xt.RATIOS_TABLE[n][xe.BARS_IN_MODULE-a-1]=Math.fround(l/xe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=Xt.getDecodedCodewordValue(Xt.sampleBitCounts(n));return i!==-1?i:Xt.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=_e.sum(n),s=new Int32Array(xe.BARS_IN_MODULE),a=0,l=0;for(let c=0;c<xe.MODULES_IN_CODEWORD;c++){let h=i/(2*xe.MODULES_IN_CODEWORD)+c*i/xe.MODULES_IN_CODEWORD;l+n[a]<=h&&(l+=n[a],a++),s[a]++}return s}static getDecodedCodewordValue(n){let i=Xt.getBitValue(n);return xe.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let s=0;s<n.length;s++)for(let a=0;a<n[s];a++)i=i<<1|(s%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=_e.sum(n),s=new Array(xe.BARS_IN_MODULE);if(i>1)for(let c=0;c<s.length;c++)s[c]=Math.fround(n[c]/i);let a=yo.MAX_VALUE,l=-1;this.bSymbolTableReady||Xt.initialize();for(let c=0;c<Xt.RATIOS_TABLE.length;c++){let h=0,d=Xt.RATIOS_TABLE[c];for(let p=0;p<xe.BARS_IN_MODULE;p++){let y=Math.fround(d[p]-s[p]);if(h+=Math.fround(y*y),h>=a)break}h<a&&(a=h,l=xe.SYMBOL_TABLE[c])}return l}}Xt.bSymbolTableReady=!1,Xt.RATIOS_TABLE=new Array(xe.SYMBOL_TABLE.length).map(E=>new Array(xe.BARS_IN_MODULE));class Vf{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Hf{static parseLong(n,i=void 0){return parseInt(n,i)}}class Wf extends m{}Wf.kind="NullPointerException";class up{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,s){if(n==null)throw new Wf;if(i<0||i>n.length||s<0||i+s>n.length||i+s<0)throw new Y;if(s===0)return;for(let a=0;a<s;a++)this.write(n[i+a])}flush(){}close(){}}class cp extends m{}class fp extends up{constructor(n=32){if(super(),this.count=0,n<0)throw new I("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let s=this.buf.length<<1;if(s-n<0&&(s=n),s<0){if(n<0)throw new cp;s=_.MAX_VALUE}this.buf=T.copyOfUint8Array(this.buf,s)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,s){if(i<0||i>n.length||s<0||i+s-n.length>0)throw new Y;this.ensureCapacity(this.count+s),B.arraycopy(n,i,this.buf,this.count,s),this.count+=s}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return T.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Ue;(function(E){E[E.ALPHA=0]="ALPHA",E[E.LOWER=1]="LOWER",E[E.MIXED=2]="MIXED",E[E.PUNCT=3]="PUNCT",E[E.ALPHA_SHIFT=4]="ALPHA_SHIFT",E[E.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ue||(Ue={}));function Gf(){if(typeof window<"u")return window.BigInt||null;if(typeof ws<"u")return ws.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let To;function xr(E){if(typeof To>"u"&&(To=Gf()),To===null)throw new Error("BigInt is not supported!");return To(E)}function hp(){let E=[];E[0]=xr(1);let n=xr(900);E[1]=n;for(let i=2;i<16;i++)E[i]=E[i-1]*n;return E}class z{static decode(n,i){let s=new we(""),a=H.ISO8859_1;s.enableDecoding(a);let l=1,c=n[l++],h=new Vf;for(;l<n[0];){switch(c){case z.TEXT_COMPACTION_MODE_LATCH:l=z.textCompaction(n,l,s);break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:l=z.byteCompaction(c,n,a,l,s);break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(n[l++]);break;case z.NUMERIC_COMPACTION_MODE_LATCH:l=z.numericCompaction(n,l,s);break;case z.ECI_CHARSET:H.getCharacterSetECIByValue(n[l++]);break;case z.ECI_GENERAL_PURPOSE:l+=2;break;case z.ECI_USER_DEFINED:l++;break;case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=z.decodeMacroBlock(n,l,h);break;case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:throw new b;default:l--,l=z.textCompaction(n,l,s);break}if(l<n.length)c=n[l++];else throw b.getFormatInstance()}if(s.length()===0)throw b.getFormatInstance();let d=new Gr(null,s.toString(),null,i);return d.setOther(h),d}static decodeMacroBlock(n,i,s){if(i+z.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw b.getFormatInstance();let a=new Int32Array(z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<z.NUMBER_OF_SEQUENCE_CODEWORDS;h++,i++)a[h]=n[i];s.setSegmentIndex(_.parseInt(z.decodeBase900toBase10(a,z.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new we;i=z.textCompaction(n,i,l),s.setFileId(l.toString());let c=-1;for(n[i]===z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=i+1);i<n[0];)switch(n[i]){case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new we;i=z.textCompaction(n,i+1,h),s.setFileName(h.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let d=new we;i=z.textCompaction(n,i+1,d),s.setSender(d.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let p=new we;i=z.textCompaction(n,i+1,p),s.setAddressee(p.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let y=new we;i=z.numericCompaction(n,i+1,y),s.setSegmentCount(_.parseInt(y.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let C=new we;i=z.numericCompaction(n,i+1,C),s.setTimestamp(Hf.parseLong(C.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new we;i=z.numericCompaction(n,i+1,S),s.setChecksum(_.parseInt(S.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let N=new we;i=z.numericCompaction(n,i+1,N),s.setFileSize(Hf.parseLong(N.toString()));break;default:throw b.getFormatInstance()}break;case z.MACRO_PDF417_TERMINATOR:i++,s.setLastSegment(!0);break;default:throw b.getFormatInstance()}if(c!==-1){let h=i-c;s.isLastSegment()&&h--,s.setOptionalData(T.copyOfRange(n,c,c+h))}return i}static textCompaction(n,i,s){let a=new Int32Array((n[0]-i)*2),l=new Int32Array((n[0]-i)*2),c=0,h=!1;for(;i<n[0]&&!h;){let d=n[i++];if(d<z.TEXT_COMPACTION_MODE_LATCH)a[c]=d/30,a[c+1]=d%30,c+=2;else switch(d){case z.TEXT_COMPACTION_MODE_LATCH:a[c++]=z.TEXT_COMPACTION_MODE_LATCH;break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:i--,h=!0;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[c]=z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,d=n[i++],l[c]=d,c++;break}}return z.decodeTextCompaction(a,l,c,s),i}static decodeTextCompaction(n,i,s,a){let l=Ue.ALPHA,c=Ue.ALPHA,h=0;for(;h<s;){let d=n[h],p="";switch(l){case Ue.ALPHA:if(d<26)p=String.fromCharCode(65+d);else switch(d){case 26:p=" ";break;case z.LL:l=Ue.LOWER;break;case z.ML:l=Ue.MIXED;break;case z.PS:c=l,l=Ue.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:l=Ue.ALPHA;break}break;case Ue.LOWER:if(d<26)p=String.fromCharCode(97+d);else switch(d){case 26:p=" ";break;case z.AS:c=l,l=Ue.ALPHA_SHIFT;break;case z.ML:l=Ue.MIXED;break;case z.PS:c=l,l=Ue.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:l=Ue.ALPHA;break}break;case Ue.MIXED:if(d<z.PL)p=z.MIXED_CHARS[d];else switch(d){case z.PL:l=Ue.PUNCT;break;case 26:p=" ";break;case z.LL:l=Ue.LOWER;break;case z.AL:l=Ue.ALPHA;break;case z.PS:c=l,l=Ue.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:l=Ue.ALPHA;break}break;case Ue.PUNCT:if(d<z.PAL)p=z.PUNCT_CHARS[d];else switch(d){case z.PAL:l=Ue.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:l=Ue.ALPHA;break}break;case Ue.ALPHA_SHIFT:if(l=c,d<26)p=String.fromCharCode(65+d);else switch(d){case 26:p=" ";break;case z.TEXT_COMPACTION_MODE_LATCH:l=Ue.ALPHA;break}break;case Ue.PUNCT_SHIFT:if(l=c,d<z.PAL)p=z.PUNCT_CHARS[d];else switch(d){case z.PAL:l=Ue.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case z.TEXT_COMPACTION_MODE_LATCH:l=Ue.ALPHA;break}break}p!==""&&a.append(p),h++}}static byteCompaction(n,i,s,a,l){let c=new fp,h=0,d=0,p=!1;switch(n){case z.BYTE_COMPACTION_MODE_LATCH:let y=new Int32Array(6),C=i[a++];for(;a<i[0]&&!p;)switch(y[h++]=C,d=900*d+C,C=i[a++],C){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:a--,p=!0;break;default:if(h%5===0&&h>0){for(let S=0;S<6;++S)c.write(Number(xr(d)>>xr(8*(5-S))));d=0,h=0}break}a===i[0]&&C<z.TEXT_COMPACTION_MODE_LATCH&&(y[h++]=C);for(let S=0;S<h;S++)c.write(y[S]);break;case z.BYTE_COMPACTION_MODE_LATCH_6:for(;a<i[0]&&!p;){let S=i[a++];if(S<z.TEXT_COMPACTION_MODE_LATCH)h++,d=900*d+S;else switch(S){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:a--,p=!0;break}if(h%5===0&&h>0){for(let N=0;N<6;++N)c.write(Number(xr(d)>>xr(8*(5-N))));d=0,h=0}}break}return l.append(Ne.decode(c.toByteArray(),s)),a}static numericCompaction(n,i,s){let a=0,l=!1,c=new Int32Array(z.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!l;){let h=n[i++];if(i===n[0]&&(l=!0),h<z.TEXT_COMPACTION_MODE_LATCH)c[a]=h,a++;else switch(h){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:i--,l=!0;break}(a%z.MAX_NUMERIC_CODEWORDS===0||h===z.NUMERIC_COMPACTION_MODE_LATCH||l)&&a>0&&(s.append(z.decodeBase900toBase10(c,a)),a=0)}return i}static decodeBase900toBase10(n,i){let s=xr(0);for(let l=0;l<i;l++)s+=z.EXP900[i-l-1]*xr(n[l]);let a=s.toString();if(a.charAt(0)!=="1")throw new b;return a.substring(1)}}z.TEXT_COMPACTION_MODE_LATCH=900,z.BYTE_COMPACTION_MODE_LATCH=901,z.NUMERIC_COMPACTION_MODE_LATCH=902,z.BYTE_COMPACTION_MODE_LATCH_6=924,z.ECI_USER_DEFINED=925,z.ECI_GENERAL_PURPOSE=926,z.ECI_CHARSET=927,z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,z.MACRO_PDF417_TERMINATOR=922,z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,z.MAX_NUMERIC_CODEWORDS=15,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,z.PL=25,z.LL=27,z.AS=27,z.ML=28,z.AL=28,z.PS=29,z.PAL=29,z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",z.EXP900=Gf()?hp():[],z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ae{constructor(){}static decode(n,i,s,a,l,c,h){let d=new Zr(n,i,s,a,l),p=null,y=null,C;for(let M=!0;;M=!1){if(i!=null&&(p=Ae.getRowIndicatorColumn(n,d,i,!0,c,h)),a!=null&&(y=Ae.getRowIndicatorColumn(n,d,a,!1,c,h)),C=Ae.merge(p,y),C==null)throw G.getNotFoundInstance();let D=C.getBoundingBox();if(M&&D!=null&&(D.getMinY()<d.getMinY()||D.getMaxY()>d.getMaxY()))d=D;else break}C.setBoundingBox(d);let S=C.getBarcodeColumnCount()+1;C.setDetectionResultColumn(0,p),C.setDetectionResultColumn(S,y);let N=p!=null;for(let M=1;M<=S;M++){let D=N?M:S-M;if(C.getDetectionResultColumn(D)!==void 0)continue;let P;D===0||D===S?P=new zf(d,D===0):P=new hs(d),C.setDetectionResultColumn(D,P);let V=-1,$=V;for(let ee=d.getMinY();ee<=d.getMaxY();ee++){if(V=Ae.getStartColumn(C,D,ee,N),V<0||V>d.getMaxX()){if($===-1)continue;V=$}let q=Ae.detectCodeword(n,d.getMinX(),d.getMaxX(),N,V,ee,c,h);q!=null&&(P.setCodeword(ee,q),$=V,c=Math.min(c,q.getWidth()),h=Math.max(h,q.getWidth()))}}return Ae.createDecoderResult(C)}static merge(n,i){if(n==null&&i==null)return null;let s=Ae.getBarcodeMetadata(n,i);if(s==null)return null;let a=Zr.merge(Ae.adjustBoundingBox(n),Ae.adjustBoundingBox(i));return new gs(s,a)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let s=Ae.getMax(i),a=0;for(let h of i)if(a+=s-h,h>0)break;let l=n.getCodewords();for(let h=0;a>0&&l[h]==null;h++)a--;let c=0;for(let h=i.length-1;h>=0&&(c+=s-i[h],!(i[h]>0));h--);for(let h=l.length-1;c>0&&l[h]==null;h--)c--;return n.getBoundingBox().addMissingRows(a,c,n.isLeft())}static getMax(n){let i=-1;for(let s of n)i=Math.max(i,s);return i}static getBarcodeMetadata(n,i){let s;if(n==null||(s=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let a;return i==null||(a=i.getBarcodeMetadata())==null?s:s.getColumnCount()!==a.getColumnCount()&&s.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&s.getRowCount()!==a.getRowCount()?null:s}static getRowIndicatorColumn(n,i,s,a,l,c){let h=new zf(i,a);for(let d=0;d<2;d++){let p=d===0?1:-1,y=Math.trunc(Math.trunc(s.getX()));for(let C=Math.trunc(Math.trunc(s.getY()));C<=i.getMaxY()&&C>=i.getMinY();C+=p){let S=Ae.detectCodeword(n,0,n.getWidth(),a,y,C,l,c);S!=null&&(h.setCodeword(C,S),a?y=S.getStartX():y=S.getEndX())}}return h}static adjustCodewordCount(n,i){let s=i[0][1],a=s.getValue(),l=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Ae.getNumberOfECCodeWords(n.getBarcodeECLevel());if(a.length===0){if(l<1||l>xe.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();s.setValue(l)}else a[0]!==l&&s.setValue(l)}static createDecoderResult(n){let i=Ae.createBarcodeMatrix(n);Ae.adjustCodewordCount(n,i);let s=new Array,a=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),l=[],c=new Array;for(let d=0;d<n.getBarcodeRowCount();d++)for(let p=0;p<n.getBarcodeColumnCount();p++){let y=i[d][p+1].getValue(),C=d*n.getBarcodeColumnCount()+p;y.length===0?s.push(C):y.length===1?a[C]=y[0]:(c.push(C),l.push(y))}let h=new Array(l.length);for(let d=0;d<h.length;d++)h[d]=l[d];return Ae.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),a,xe.toIntArray(s),xe.toIntArray(c),h)}static createDecoderResultFromAmbiguousValues(n,i,s,a,l){let c=new Int32Array(a.length),h=100;for(;h-- >0;){for(let d=0;d<c.length;d++)i[a[d]]=l[d][c[d]];try{return Ae.decodeCodewords(i,n,s)}catch(d){if(!(d instanceof L))throw d}if(c.length===0)throw L.getChecksumInstance();for(let d=0;d<c.length;d++)if(c[d]<l[d].length-1){c[d]++;break}else if(c[d]=0,d===c.length-1)throw L.getChecksumInstance()}throw L.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let a=0;a<i.length;a++)for(let l=0;l<i[a].length;l++)i[a][l]=new ds;let s=0;for(let a of n.getDetectionResultColumns()){if(a!=null){for(let l of a.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=0){if(c>=i.length)continue;i[c][s].setValue(l.getValue())}}}s++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,s,a){let l=a?1:-1,c=null;if(Ae.isValidBarcodeColumn(n,i-l)&&(c=n.getDetectionResultColumn(i-l).getCodeword(s)),c!=null)return a?c.getEndX():c.getStartX();if(c=n.getDetectionResultColumn(i).getCodewordNearby(s),c!=null)return a?c.getStartX():c.getEndX();if(Ae.isValidBarcodeColumn(n,i-l)&&(c=n.getDetectionResultColumn(i-l).getCodewordNearby(s)),c!=null)return a?c.getEndX():c.getStartX();let h=0;for(;Ae.isValidBarcodeColumn(n,i-l);){i-=l;for(let d of n.getDetectionResultColumn(i).getCodewords())if(d!=null)return(a?d.getEndX():d.getStartX())+l*h*(d.getEndX()-d.getStartX());h++}return a?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,s,a,l,c,h,d){l=Ae.adjustCodewordStartColumn(n,i,s,a,l,c);let p=Ae.getModuleBitCount(n,i,s,a,l,c);if(p==null)return null;let y,C=_e.sum(p);if(a)y=l+C;else{for(let M=0;M<p.length/2;M++){let D=p[M];p[M]=p[p.length-1-M],p[p.length-1-M]=D}y=l,l=y-C}if(!Ae.checkCodewordSkew(C,h,d))return null;let S=Xt.getDecodedValue(p),N=xe.getCodeword(S);return N===-1?null:new ps(l,y,Ae.getCodewordBucketNumber(S),N)}static getModuleBitCount(n,i,s,a,l,c){let h=l,d=new Int32Array(8),p=0,y=a?1:-1,C=a;for(;(a?h<s:h>=i)&&p<d.length;)n.get(h,c)===C?(d[p]++,h+=y):(p++,C=!C);return p===d.length||h===(a?s:i)&&p===d.length-1?d:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,s,a,l,c){let h=l,d=a?-1:1;for(let p=0;p<2;p++){for(;(a?h>=i:h<s)&&a===n.get(h,c);){if(Math.abs(l-h)>Ae.CODEWORD_SKEW_SIZE)return l;h+=d}d=-d,a=!a}return h}static checkCodewordSkew(n,i,s){return i-Ae.CODEWORD_SKEW_SIZE<=n&&n<=s+Ae.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,s){if(n.length===0)throw b.getFormatInstance();let a=1<<i+1,l=Ae.correctErrors(n,s,a);Ae.verifyCodewordCount(n,a);let c=z.decode(n,""+i);return c.setErrorsCorrected(l),c.setErasures(s.length),c}static correctErrors(n,i,s){if(i!=null&&i.length>s/2+Ae.MAX_ERRORS||s<0||s>Ae.MAX_EC_CODEWORDS)throw L.getChecksumInstance();return Ae.errorCorrection.decode(n,s,i)}static verifyCodewordCount(n,i){if(n.length<4)throw b.getFormatInstance();let s=n[0];if(s>n.length)throw b.getFormatInstance();if(s===0)if(i<n.length)n[0]=n.length-i;else throw b.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),s=0,a=i.length-1;for(;!((n&1)!==s&&(s=n&1,a--,a<0));)i[a]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Ae.getCodewordBucketNumber(Ae.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new fs;for(let s=0;s<n.length;s++){i.format("Row %2d: ",s);for(let a=0;a<n[s].length;a++){let l=n[s][a];l.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}i.format("%n")}return i.toString()}}Ae.CODEWORD_SKEW_SIZE=2,Ae.MAX_ERRORS=3,Ae.MAX_EC_CODEWORDS=512,Ae.errorCorrection=new jf;class Nt{decode(n,i=null){let s=Nt.decode(n,i,!1);if(s==null||s.length===0||s[0]==null)throw G.getNotFoundInstance();return s[0]}decodeMultiple(n,i=null){try{return Nt.decode(n,i,!0)}catch(s){throw s instanceof b||s instanceof L?G.getNotFoundInstance():s}}static decode(n,i,s){const a=new Array,l=Ce.detectMultiple(n,i,s);for(const c of l.getPoints()){const h=Ae.decode(l.getBits(),c[4],c[5],c[6],c[7],Nt.getMinCodewordWidth(c),Nt.getMaxCodewordWidth(c)),d=new Me(h.getText(),h.getRawBytes(),void 0,c,ae.PDF_417);d.putMetadata(ft.ERROR_CORRECTION_LEVEL,h.getECLevel());const p=h.getOther();p!=null&&d.putMetadata(ft.PDF417_EXTRA_METADATA,p),a.push(d)}return a.map(c=>c)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?_.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Nt.getMaxWidth(n[0],n[4]),Nt.getMaxWidth(n[6],n[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.max(Nt.getMaxWidth(n[1],n[5]),Nt.getMaxWidth(n[7],n[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Nt.getMinWidth(n[0],n[4]),Nt.getMinWidth(n[6],n[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.min(Nt.getMinWidth(n[1],n[5]),Nt.getMinWidth(n[7],n[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}reset(){}}class No extends m{}No.kind="ReaderException";class Yf{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!o(n)&&n.get(X.TRY_HARDER)===!0,s=o(n)?null:n.get(X.POSSIBLE_FORMATS),a=new Array;if(!o(s)){const l=s.some(c=>c===ae.UPC_A||c===ae.UPC_E||c===ae.EAN_13||c===ae.EAN_8||c===ae.CODABAR||c===ae.CODE_39||c===ae.CODE_93||c===ae.CODE_128||c===ae.ITF||c===ae.RSS_14||c===ae.RSS_EXPANDED);l&&!i&&a.push(new yi(n,this.verbose)),s.includes(ae.QR_CODE)&&a.push(new mr),s.includes(ae.DATA_MATRIX)&&a.push(new pr),s.includes(ae.AZTEC)&&a.push(new Co),s.includes(ae.PDF_417)&&a.push(new Nt),l&&i&&a.push(new yi(n,this.verbose))}a.length===0&&(i||a.push(new yi(n,this.verbose)),a.push(new mr),a.push(new pr),a.push(new Co),a.push(new Nt),i&&a.push(new yi(n,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new No("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(s){if(s instanceof No)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class dp extends Be{constructor(n=null,i=500){const s=new Yf;s.setHints(n),super(s,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class gp extends Be{constructor(n=500){super(new Nt,n)}}class pp extends Be{constructor(n=500){super(new mr,n)}}var Tl;(function(E){E[E.ERROR_CORRECTION=0]="ERROR_CORRECTION",E[E.CHARACTER_SET=1]="CHARACTER_SET",E[E.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",E[E.MIN_SIZE=3]="MIN_SIZE",E[E.MAX_SIZE=4]="MAX_SIZE",E[E.MARGIN=5]="MARGIN",E[E.PDF417_COMPACT=6]="PDF417_COMPACT",E[E.PDF417_COMPACTION=7]="PDF417_COMPACTION",E[E.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",E[E.AZTEC_LAYERS=9]="AZTEC_LAYERS",E[E.QR_VERSION=10]="QR_VERSION"})(Tl||(Tl={}));var wt=Tl;class Nl{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Wt(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let s=i[i.length-1];const a=this.field;for(let l=i.length;l<=n;l++){const c=s.multiply(new Wt(a,Int32Array.from([1,a.exp(l-1+a.getGeneratorBase())])));i.push(c),s=c}}return i[n]}encode(n,i){if(i===0)throw new I("No error correction bytes");const s=n.length-i;if(s<=0)throw new I("No data bytes provided");const a=this.buildGenerator(i),l=new Int32Array(s);B.arraycopy(n,0,l,0,s);let c=new Wt(this.field,l);c=c.multiplyByMonomial(i,1);const d=c.divide(a)[1].getCoefficients(),p=i-d.length;for(let y=0;y<p;y++)n[s+y]=0;B.arraycopy(d,0,n,s+p,d.length)}}class ot{constructor(){}static applyMaskPenaltyRule1(n){return ot.applyMaskPenaltyRule1Internal(n,!0)+ot.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let c=0;c<l-1;c++){const h=s[c];for(let d=0;d<a-1;d++){const p=h[d];p===h[d+1]&&p===s[c+1][d]&&p===s[c+1][d+1]&&i++}}return ot.N2*i}static applyMaskPenaltyRule3(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let c=0;c<l;c++)for(let h=0;h<a;h++){const d=s[c];h+6<a&&d[h]===1&&d[h+1]===0&&d[h+2]===1&&d[h+3]===1&&d[h+4]===1&&d[h+5]===0&&d[h+6]===1&&(ot.isWhiteHorizontal(d,h-4,h)||ot.isWhiteHorizontal(d,h+7,h+11))&&i++,c+6<l&&s[c][h]===1&&s[c+1][h]===0&&s[c+2][h]===1&&s[c+3][h]===1&&s[c+4][h]===1&&s[c+5][h]===0&&s[c+6][h]===1&&(ot.isWhiteVertical(s,h,c-4,c)||ot.isWhiteVertical(s,h,c+7,c+11))&&i++}return i*ot.N3}static isWhiteHorizontal(n,i,s){i=Math.max(i,0),s=Math.min(s,n.length);for(let a=i;a<s;a++)if(n[a]===1)return!1;return!0}static isWhiteVertical(n,i,s,a){s=Math.max(s,0),a=Math.min(a,n.length);for(let l=s;l<a;l++)if(n[l][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let d=0;d<l;d++){const p=s[d];for(let y=0;y<a;y++)p[y]===1&&i++}const c=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-c)*10/c)*ot.N4}static getDataMaskBit(n,i,s){let a,l;switch(n){case 0:a=s+i&1;break;case 1:a=s&1;break;case 2:a=i%3;break;case 3:a=(s+i)%3;break;case 4:a=Math.floor(s/2)+Math.floor(i/3)&1;break;case 5:l=s*i,a=(l&1)+l%3;break;case 6:l=s*i,a=(l&1)+l%3&1;break;case 7:l=s*i,a=l%3+(s+i&1)&1;break;default:throw new I("Invalid mask pattern: "+n)}return a===0}static applyMaskPenaltyRule1Internal(n,i){let s=0;const a=i?n.getHeight():n.getWidth(),l=i?n.getWidth():n.getHeight(),c=n.getArray();for(let h=0;h<a;h++){let d=0,p=-1;for(let y=0;y<l;y++){const C=i?c[h][y]:c[y][h];C===p?d++:(d>=5&&(s+=ot.N1+(d-5)),d=1,p=C)}d>=5&&(s+=ot.N1+(d-5))}return s}}ot.N1=3,ot.N2=3,ot.N3=40,ot.N4=10;class _o{constructor(n,i){this.width=n,this.height=i;const s=new Array(i);for(let a=0;a!==i;a++)s[a]=new Uint8Array(n);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,s){this.bytes[i][n]=s}setBoolean(n,i,s){this.bytes[i][n]=s?1:0}clear(n){for(const i of this.bytes)T.fill(i,n)}equals(n){if(!(n instanceof _o))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let s=0,a=this.height;s<a;++s){const l=this.bytes[s],c=i.bytes[s];for(let h=0,d=this.width;h<d;++h)if(l[h]!==c[h])return!1}return!0}toString(){const n=new we;for(let i=0,s=this.height;i<s;++i){const a=this.bytes[i];for(let l=0,c=this.width;l<c;++l)switch(a[l]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Kr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new we;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Kr.NUM_MASK_PATTERNS}}Kr.NUM_MASK_PATTERNS=8;class ze extends m{}ze.kind="WriterException";class me{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,s,a,l){me.clearMatrix(l),me.embedBasicPatterns(s,l),me.embedTypeInfo(i,a,l),me.maybeEmbedVersionInfo(s,l),me.embedDataBits(n,a,l)}static embedBasicPatterns(n,i){me.embedPositionDetectionPatternsAndSeparators(i),me.embedDarkDotAtLeftBottomCorner(i),me.maybeEmbedPositionAdjustmentPatterns(n,i),me.embedTimingPatterns(i)}static embedTypeInfo(n,i,s){const a=new k;me.makeTypeInfoBits(n,i,a);for(let l=0,c=a.getSize();l<c;++l){const h=a.get(a.getSize()-1-l),d=me.TYPE_INFO_COORDINATES[l],p=d[0],y=d[1];if(s.setBoolean(p,y,h),l<8){const C=s.getWidth()-l-1;s.setBoolean(C,8,h)}else{const S=s.getHeight()-7+(l-8);s.setBoolean(8,S,h)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const s=new k;me.makeVersionInfoBits(n,s);let a=6*3-1;for(let l=0;l<6;++l)for(let c=0;c<3;++c){const h=s.get(a);a--,i.setBoolean(l,i.getHeight()-11+c,h),i.setBoolean(i.getHeight()-11+c,l,h)}}static embedDataBits(n,i,s){let a=0,l=-1,c=s.getWidth()-1,h=s.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);h>=0&&h<s.getHeight();){for(let d=0;d<2;++d){const p=c-d;if(!me.isEmpty(s.get(p,h)))continue;let y;a<n.getSize()?(y=n.get(a),++a):y=!1,i!==255&&ot.getDataMaskBit(i,p,h)&&(y=!y),s.setBoolean(p,h,y)}h+=l}l=-l,h+=l,c-=2}if(a!==n.getSize())throw new ze("Not all bits consumed: "+a+"/"+n.getSize())}static findMSBSet(n){return 32-_.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new I("0 polynomial");const s=me.findMSBSet(i);for(n<<=s-1;me.findMSBSet(n)>=s;)n^=i<<me.findMSBSet(n)-s;return n}static makeTypeInfoBits(n,i,s){if(!Kr.isValidMaskPattern(i))throw new ze("Invalid mask pattern");const a=n.getBits()<<3|i;s.appendBits(a,5);const l=me.calculateBCHCode(a,me.TYPE_INFO_POLY);s.appendBits(l,10);const c=new k;if(c.appendBits(me.TYPE_INFO_MASK_PATTERN,15),s.xor(c),s.getSize()!==15)throw new ze("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const s=me.calculateBCHCode(n.getVersionNumber(),me.VERSION_INFO_POLY);if(i.appendBits(s,12),i.getSize()!==18)throw new ze("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const s=(i+1)%2;me.isEmpty(n.get(i,6))&&n.setNumber(i,6,s),me.isEmpty(n.get(6,i))&&n.setNumber(6,i,s)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new ze;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,s){for(let a=0;a<8;++a){if(!me.isEmpty(s.get(n+a,i)))throw new ze;s.setNumber(n+a,i,0)}}static embedVerticalSeparationPattern(n,i,s){for(let a=0;a<7;++a){if(!me.isEmpty(s.get(n,i+a)))throw new ze;s.setNumber(n,i+a,0)}}static embedPositionAdjustmentPattern(n,i,s){for(let a=0;a<5;++a){const l=me.POSITION_ADJUSTMENT_PATTERN[a];for(let c=0;c<5;++c)s.setNumber(n+c,i+a,l[c])}}static embedPositionDetectionPattern(n,i,s){for(let a=0;a<7;++a){const l=me.POSITION_DETECTION_PATTERN[a];for(let c=0;c<7;++c)s.setNumber(n+c,i+a,l[c])}}static embedPositionDetectionPatternsAndSeparators(n){const i=me.POSITION_DETECTION_PATTERN[0].length;me.embedPositionDetectionPattern(0,0,n),me.embedPositionDetectionPattern(n.getWidth()-i,0,n),me.embedPositionDetectionPattern(0,n.getWidth()-i,n);const s=8;me.embedHorizontalSeparationPattern(0,s-1,n),me.embedHorizontalSeparationPattern(n.getWidth()-s,s-1,n),me.embedHorizontalSeparationPattern(0,n.getWidth()-s,n);const a=7;me.embedVerticalSeparationPattern(a,0,n),me.embedVerticalSeparationPattern(n.getHeight()-a-1,0,n),me.embedVerticalSeparationPattern(a,n.getHeight()-a,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const s=n.getVersionNumber()-1,a=me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let l=0,c=a.length;l!==c;l++){const h=a[l];if(h>=0)for(let d=0;d!==c;d++){const p=a[d];p>=0&&me.isEmpty(i.get(p,h))&&me.embedPositionAdjustmentPattern(p-2,h-2,i)}}}}me.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),me.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),me.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),me.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),me.VERSION_INFO_POLY=7973,me.TYPE_INFO_POLY=1335,me.TYPE_INFO_MASK_PATTERN=21522;class mp{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ye{constructor(){}static calculateMaskPenalty(n){return ot.applyMaskPenaltyRule1(n)+ot.applyMaskPenaltyRule2(n)+ot.applyMaskPenaltyRule3(n)+ot.applyMaskPenaltyRule4(n)}static encode(n,i,s=null){let a=Ye.DEFAULT_BYTE_MODE_ENCODING;const l=s!==null&&s.get(wt.CHARACTER_SET)!==void 0;l&&(a=s.get(wt.CHARACTER_SET).toString());const c=this.chooseMode(n,a),h=new k;if(c===de.BYTE&&(l||Ye.DEFAULT_BYTE_MODE_ENCODING!==a)){const ee=H.getCharacterSetECIByName(a);ee!==void 0&&this.appendECI(ee,h)}this.appendModeInfo(c,h);const d=new k;this.appendBytes(n,c,d,a);let p;if(s!==null&&s.get(wt.QR_VERSION)!==void 0){const ee=Number.parseInt(s.get(wt.QR_VERSION).toString(),10);p=he.getVersionForNumber(ee);const q=this.calculateBitsNeeded(c,h,d,p);if(!this.willFit(q,p,i))throw new ze("Data too big for requested version")}else p=this.recommendVersion(i,c,h,d);const y=new k;y.appendBitArray(h);const C=c===de.BYTE?d.getSizeInBytes():n.length;this.appendLengthInfo(C,p,c,y),y.appendBitArray(d);const S=p.getECBlocksForLevel(i),N=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(N,y);const M=this.interleaveWithECBytes(y,p.getTotalCodewords(),N,S.getNumBlocks()),D=new Kr;D.setECLevel(i),D.setMode(c),D.setVersion(p);const P=p.getDimensionForVersion(),V=new _o(P,P),$=this.chooseMaskPattern(M,i,p,V);return D.setMaskPattern($),me.buildMatrix(M,i,p,$,V),D.setMatrix(V),D}static recommendVersion(n,i,s,a){const l=this.calculateBitsNeeded(i,s,a,he.getVersionForNumber(1)),c=this.chooseVersion(l,n),h=this.calculateBitsNeeded(i,s,a,c);return this.chooseVersion(h,n)}static calculateBitsNeeded(n,i,s,a){return i.getSize()+n.getCharacterCountBits(a)+s.getSize()}static getAlphanumericCode(n){return n<Ye.ALPHANUMERIC_TABLE.length?Ye.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(H.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return de.KANJI;let s=!1,a=!1;for(let l=0,c=n.length;l<c;++l){const h=n.charAt(l);if(Ye.isDigit(h))s=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)a=!0;else return de.BYTE}return a?de.ALPHANUMERIC:s?de.NUMERIC:de.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=Ne.encode(n,H.SJIS)}catch{return!1}const s=i.length;if(s%2!==0)return!1;for(let a=0;a<s;a+=2){const l=i[a]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(n,i,s,a){let l=Number.MAX_SAFE_INTEGER,c=-1;for(let h=0;h<Kr.NUM_MASK_PATTERNS;h++){me.buildMatrix(n,i,s,h,a);let d=this.calculateMaskPenalty(a);d<l&&(l=d,c=h)}return c}static chooseVersion(n,i){for(let s=1;s<=40;s++){const a=he.getVersionForNumber(s);if(Ye.willFit(n,a,i))return a}throw new ze("Data too big")}static willFit(n,i,s){const a=i.getTotalCodewords(),c=i.getECBlocksForLevel(s).getTotalECCodewords(),h=a-c,d=(n+7)/8;return h>=d}static terminateBits(n,i){const s=n*8;if(i.getSize()>s)throw new ze("data bits cannot fit in the QR Code"+i.getSize()+" > "+s);for(let c=0;c<4&&i.getSize()<s;++c)i.appendBit(!1);const a=i.getSize()&7;if(a>0)for(let c=a;c<8;c++)i.appendBit(!1);const l=n-i.getSizeInBytes();for(let c=0;c<l;++c)i.appendBits(c&1?17:236,8);if(i.getSize()!==s)throw new ze("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,s,a,l,c){if(a>=s)throw new ze("Block ID too large");const h=n%s,d=s-h,p=Math.floor(n/s),y=p+1,C=Math.floor(i/s),S=C+1,N=p-C,M=y-S;if(N!==M)throw new ze("EC bytes mismatch");if(s!==d+h)throw new ze("RS blocks mismatch");if(n!==(C+N)*d+(S+M)*h)throw new ze("Total bytes mismatch");a<d?(l[0]=C,c[0]=N):(l[0]=S,c[0]=M)}static interleaveWithECBytes(n,i,s,a){if(n.getSizeInBytes()!==s)throw new ze("Number of bits and data bytes does not match");let l=0,c=0,h=0;const d=new Array;for(let y=0;y<a;++y){const C=new Int32Array(1),S=new Int32Array(1);Ye.getNumDataBytesAndNumECBytesForBlockID(i,s,a,y,C,S);const N=C[0],M=new Uint8Array(N);n.toBytes(8*l,M,0,N);const D=Ye.generateECBytes(M,S[0]);d.push(new mp(M,D)),c=Math.max(c,N),h=Math.max(h,D.length),l+=C[0]}if(s!==l)throw new ze("Data bytes does not match offset");const p=new k;for(let y=0;y<c;++y)for(const C of d){const S=C.getDataBytes();y<S.length&&p.appendBits(S[y],8)}for(let y=0;y<h;++y)for(const C of d){const S=C.getErrorCorrectionBytes();y<S.length&&p.appendBits(S[y],8)}if(i!==p.getSizeInBytes())throw new ze("Interleaving error: "+i+" and "+p.getSizeInBytes()+" differ.");return p}static generateECBytes(n,i){const s=n.length,a=new Int32Array(s+i);for(let c=0;c<s;c++)a[c]=n[c]&255;new Nl(be.QR_CODE_FIELD_256).encode(a,i);const l=new Uint8Array(i);for(let c=0;c<i;c++)l[c]=a[s+c];return l}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,s,a){const l=s.getCharacterCountBits(i);if(n>=1<<l)throw new ze(n+" is bigger than "+((1<<l)-1));a.appendBits(n,l)}static appendBytes(n,i,s,a){switch(i){case de.NUMERIC:Ye.appendNumericBytes(n,s);break;case de.ALPHANUMERIC:Ye.appendAlphanumericBytes(n,s);break;case de.BYTE:Ye.append8BitBytes(n,s,a);break;case de.KANJI:Ye.appendKanjiBytes(n,s);break;default:throw new ze("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=Ye.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const s=n.length;let a=0;for(;a<s;){const l=Ye.getDigit(n.charAt(a));if(a+2<s){const c=Ye.getDigit(n.charAt(a+1)),h=Ye.getDigit(n.charAt(a+2));i.appendBits(l*100+c*10+h,10),a+=3}else if(a+1<s){const c=Ye.getDigit(n.charAt(a+1));i.appendBits(l*10+c,7),a+=2}else i.appendBits(l,4),a++}}static appendAlphanumericBytes(n,i){const s=n.length;let a=0;for(;a<s;){const l=Ye.getAlphanumericCode(n.charCodeAt(a));if(l===-1)throw new ze;if(a+1<s){const c=Ye.getAlphanumericCode(n.charCodeAt(a+1));if(c===-1)throw new ze;i.appendBits(l*45+c,11),a+=2}else i.appendBits(l,6),a++}}static append8BitBytes(n,i,s){let a;try{a=Ne.encode(n,s)}catch(l){throw new ze(l)}for(let l=0,c=a.length;l!==c;l++){const h=a[l];i.appendBits(h,8)}}static appendKanjiBytes(n,i){let s;try{s=Ne.encode(n,H.SJIS)}catch(l){throw new ze(l)}const a=s.length;for(let l=0;l<a;l+=2){const c=s[l]&255,h=s[l+1]&255,d=c<<8&4294967295|h;let p=-1;if(d>=33088&&d<=40956?p=d-33088:d>=57408&&d<=60351&&(p=d-49472),p===-1)throw new ze("Invalid byte sequence");const y=(p>>8)*192+(p&255);i.appendBits(y,13)}}static appendECI(n,i){i.appendBits(de.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}Ye.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ye.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class qr{write(n,i,s,a=null){if(n.length===0)throw new I("Found empty contents");if(i<0||s<0)throw new I("Requested dimensions are too small: "+i+"x"+s);let l=We.L,c=qr.QUIET_ZONE_SIZE;a!==null&&(a.get(wt.ERROR_CORRECTION)!==void 0&&(l=We.fromString(a.get(wt.ERROR_CORRECTION).toString())),a.get(wt.MARGIN)!==void 0&&(c=Number.parseInt(a.get(wt.MARGIN).toString(),10)));const h=Ye.encode(n,l,a);return this.renderResult(h,i,s,c)}writeToDom(n,i,s,a,l=null){typeof n=="string"&&(n=document.querySelector(n));const c=this.write(i,s,a,l);n&&n.appendChild(c)}renderResult(n,i,s,a){const l=n.getMatrix();if(l===null)throw new Fn;const c=l.getWidth(),h=l.getHeight(),d=c+a*2,p=h+a*2,y=Math.max(i,d),C=Math.max(s,p),S=Math.min(Math.floor(y/d),Math.floor(C/p)),N=Math.floor((y-c*S)/2),M=Math.floor((C-h*S)/2),D=this.createSVGElement(y,C);for(let P=0,V=M;P<h;P++,V+=S)for(let $=0,ee=N;$<c;$++,ee+=S)if(l.get($,P)===1){const q=this.createSvgRectElement(ee,V,S,S);D.appendChild(q)}return D}createSVGElement(n,i){const s=document.createElementNS(qr.SVG_NS,"svg");return s.setAttributeNS(null,"height",n.toString()),s.setAttributeNS(null,"width",i.toString()),s}createSvgRectElement(n,i,s,a){const l=document.createElementNS(qr.SVG_NS,"rect");return l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",i.toString()),l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",a.toString()),l.setAttributeNS(null,"fill","#000000"),l}}qr.QUIET_ZONE_SIZE=4,qr.SVG_NS="http://www.w3.org/2000/svg";class Ci{encode(n,i,s,a,l){if(n.length===0)throw new I("Found empty contents");if(i!==ae.QR_CODE)throw new I("Can only encode QR_CODE, but got "+i);if(s<0||a<0)throw new I(`Requested dimensions are too small: ${s}x${a}`);let c=We.L,h=Ci.QUIET_ZONE_SIZE;l!==null&&(l.get(wt.ERROR_CORRECTION)!==void 0&&(c=We.fromString(l.get(wt.ERROR_CORRECTION).toString())),l.get(wt.MARGIN)!==void 0&&(h=Number.parseInt(l.get(wt.MARGIN).toString(),10)));const d=Ye.encode(n,c,l);return Ci.renderResult(d,s,a,h)}static renderResult(n,i,s,a){const l=n.getMatrix();if(l===null)throw new Fn;const c=l.getWidth(),h=l.getHeight(),d=c+a*2,p=h+a*2,y=Math.max(i,d),C=Math.max(s,p),S=Math.min(Math.floor(y/d),Math.floor(C/p)),N=Math.floor((y-c*S)/2),M=Math.floor((C-h*S)/2),D=new $e(y,C);for(let P=0,V=M;P<h;P++,V+=S)for(let $=0,ee=N;$<c;$++,ee+=S)l.get($,P)===1&&D.setRegion(ee,V,S,S);return D}}Ci.QUIET_ZONE_SIZE=4;class xp{encode(n,i,s,a,l){let c;switch(i){case ae.QR_CODE:c=new Ci;break;default:throw new I("No encoder available for format "+i)}return c.encode(n,i,s,a,l)}}class Vn extends re{constructor(n,i,s,a,l,c,h,d){if(super(c,h),this.yuvData=n,this.dataWidth=i,this.dataHeight=s,this.left=a,this.top=l,a+c>i||l+h>s)throw new I("Crop rectangle does not fit within image data.");d&&this.reverseHorizontal(c,h)}getRow(n,i){if(n<0||n>=this.getHeight())throw new I("Requested row is outside the image: "+n);const s=this.getWidth();(i==null||i.length<s)&&(i=new Uint8ClampedArray(s));const a=(n+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,a,i,0,s),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const s=n*i,a=new Uint8ClampedArray(s);let l=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return B.arraycopy(this.yuvData,l,a,0,s),a;for(let c=0;c<i;c++){const h=c*n;B.arraycopy(this.yuvData,l,a,h,n),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(n,i,s,a){return new Vn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,s,a,!1)}renderThumbnail(){const n=this.getWidth()/Vn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Vn.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(n*i),a=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let c=0;c<i;c++){const h=c*n;for(let d=0;d<n;d++){const p=a[l+d*Vn.THUMBNAIL_SCALE_FACTOR]&255;s[h+d]=4278190080|p*65793}l+=this.dataWidth*Vn.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/Vn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Vn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const s=this.yuvData;for(let a=0,l=this.top*this.dataWidth+this.left;a<i;a++,l+=this.dataWidth){const c=l+n/2;for(let h=l,d=l+n-1;h<c;h++,d--){const p=s[h];s[h]=s[d],s[d]=p}}}invert(){return new ge(this)}}Vn.THUMBNAIL_SCALE_FACTOR=2;class _l extends re{constructor(n,i,s,a,l,c,h){if(super(i,s),this.dataWidth=a,this.dataHeight=l,this.left=c,this.top=h,n.BYTES_PER_ELEMENT===4){const d=i*s,p=new Uint8ClampedArray(d);for(let y=0;y<d;y++){const C=n[y],S=C>>16&255,N=C>>7&510,M=C&255;p[y]=(S+N+M)/4&255}this.luminances=p}else this.luminances=n;if(a===void 0&&(this.dataWidth=i),l===void 0&&(this.dataHeight=s),c===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+s>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new I("Requested row is outside the image: "+n);const s=this.getWidth();(i==null||i.length<s)&&(i=new Uint8ClampedArray(s));const a=(n+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,a,i,0,s),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const s=n*i,a=new Uint8ClampedArray(s);let l=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return B.arraycopy(this.luminances,l,a,0,s),a;for(let c=0;c<i;c++){const h=c*n;B.arraycopy(this.luminances,l,a,h,n),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(n,i,s,a){return new _l(this.luminances,s,a,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new ge(this)}}class Xf extends H{static forName(n){return this.getCharacterSetECIByName(n)}}class Rl{}Rl.ISO_8859_1=H.ISO8859_1;class Qf{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Zf{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class wp{constructor(n){this.previous=n}getPrevious(){return this.previous}}class Ai extends wp{constructor(n,i,s){super(n),this.value=i,this.bitCount=s}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new Ai(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ai(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+_.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Ol extends Ai{constructor(n,i,s){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=s}appendTo(n,i){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):s===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+s],8)}addBinaryShift(n,i){return new Ol(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function yp(E,n,i){return new Ol(E,n,i)}function ms(E,n,i){return new Ai(E,n,i)}const Ep=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],wr=0,Ro=1,mn=2,Kf=3,Hn=4,Cp=new Ai(null,0,0),Ml=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ap(E){for(let n of E)T.fill(n,-1);return E[wr][Hn]=0,E[Ro][Hn]=0,E[Ro][wr]=28,E[Kf][Hn]=0,E[mn][Hn]=0,E[mn][wr]=15,E}const qf=Ap(T.createInt32Array(6,6));class Wn{constructor(n,i,s,a){this.token=n,this.mode=i,this.binaryShiftByteCount=s,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let s=this.bitCount,a=this.token;if(n!==this.mode){let c=Ml[this.mode][n];a=ms(a,c&65535,c>>16),s+=c>>16}let l=n===mn?4:5;return a=ms(a,i,l),new Wn(a,n,0,s+l)}shiftAndAppend(n,i){let s=this.token,a=this.mode===mn?4:5;return s=ms(s,qf[this.mode][n],a),s=ms(s,i,5),new Wn(s,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(n){let i=this.token,s=this.mode,a=this.bitCount;if(this.mode===Hn||this.mode===mn){let h=Ml[s][wr];i=ms(i,h&65535,h>>16),a+=h>>16,s=wr}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new Wn(i,s,this.binaryShiftByteCount+1,a+l);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(n+1)),c}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=yp(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Wn(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(Ml[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=Wn.calculateBinaryShiftCost(n)-Wn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let a=this.endBinaryShift(n.length).token;a!==null;a=a.getPrevious())i.unshift(a);let s=new k;for(const a of i)a.appendTo(s,n);return s}toString(){return ce.format("%s bits=%d bytes=%d",Ep[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Wn.INITIAL_STATE=new Wn(Cp,wr,0,0);function Sp(E){const n=ce.getCharCode(" "),i=ce.getCharCode("."),s=ce.getCharCode(",");E[wr][n]=1;const a=ce.getCharCode("Z"),l=ce.getCharCode("A");for(let S=l;S<=a;S++)E[wr][S]=S-l+2;E[Ro][n]=1;const c=ce.getCharCode("z"),h=ce.getCharCode("a");for(let S=h;S<=c;S++)E[Ro][S]=S-h+2;E[mn][n]=1;const d=ce.getCharCode("9"),p=ce.getCharCode("0");for(let S=p;S<=d;S++)E[mn][S]=S-p+2;E[mn][s]=12,E[mn][i]=13;const y=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<y.length;S++)E[Kf][ce.getCharCode(y[S])]=S;const C=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<C.length;S++)ce.getCharCode(C[S])>0&&(E[Hn][ce.getCharCode(C[S])]=S);return E}const bl=Sp(T.createInt32Array(5,256));class xs{constructor(n){this.text=n}encode(){const n=ce.getCharCode(" "),i=ce.getCharCode(`
`);let s=Zf.singletonList(Wn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let c,h=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case ce.getCharCode("\r"):c=h===i?2:0;break;case ce.getCharCode("."):c=h===n?3:0;break;case ce.getCharCode(","):c=h===n?4:0;break;case ce.getCharCode(":"):c=h===n?5:0;break;default:c=0}c>0?(s=xs.updateStateListForPair(s,l,c),l++):s=this.updateStateListForChar(s,l)}return Zf.min(s,(l,c)=>l.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const s=[];for(let a of n)this.updateStateForChar(a,i,s);return xs.simplifyStates(s)}updateStateForChar(n,i,s){let a=this.text[i]&255,l=bl[n.getMode()][a]>0,c=null;for(let h=0;h<=Hn;h++){let d=bl[h][a];if(d>0){if(c==null&&(c=n.endBinaryShift(i)),!l||h===n.getMode()||h===mn){const p=c.latchAndAppend(h,d);s.push(p)}if(!l&&qf[n.getMode()][h]>=0){const p=c.shiftAndAppend(h,d);s.push(p)}}}if(n.getBinaryShiftByteCount()>0||bl[n.getMode()][a]===0){let h=n.addBinaryShiftChar(i);s.push(h)}}static updateStateListForPair(n,i,s){const a=[];for(let l of n)this.updateStateForPair(l,i,s,a);return this.simplifyStates(a)}static updateStateForPair(n,i,s,a){let l=n.endBinaryShift(i);if(a.push(l.latchAndAppend(Hn,s)),n.getMode()!==Hn&&a.push(l.shiftAndAppend(Hn,s)),s===3||s===4){let c=l.latchAndAppend(mn,16-s).latchAndAppend(mn,1);a.push(c)}if(n.getBinaryShiftByteCount()>0){let c=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);a.push(c)}}static simplifyStates(n){let i=[];for(const s of n){let a=!0;for(const l of i){if(l.isBetterThanOrEqualTo(s)){a=!1;break}s.isBetterThanOrEqualTo(l)&&(i=i.filter(c=>c!==l))}a&&i.push(s)}return i}}class Re{constructor(){}static encodeBytes(n){return Re.encode(n,Re.DEFAULT_EC_PERCENT,Re.DEFAULT_AZTEC_LAYERS)}static encode(n,i,s){let a=new xs(n).encode(),l=_.truncDivision(a.getSize()*i,100)+11,c=a.getSize()+l,h,d,p,y,C;if(s!==Re.DEFAULT_AZTEC_LAYERS){if(h=s<0,d=Math.abs(s),d>(h?Re.MAX_NB_BITS_COMPACT:Re.MAX_NB_BITS))throw new I(ce.format("Illegal value %s for layers",s));p=Re.totalBitsInLayer(d,h),y=Re.WORD_SIZE[d];let q=p-p%y;if(C=Re.stuffBits(a,y),C.getSize()+l>q)throw new I("Data to large for user specified layer");if(h&&C.getSize()>y*64)throw new I("Data to large for user specified layer")}else{y=0,C=null;for(let q=0;;q++){if(q>Re.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(h=q<=3,d=h?q+1:q,p=Re.totalBitsInLayer(d,h),c>p)continue;(C==null||y!==Re.WORD_SIZE[d])&&(y=Re.WORD_SIZE[d],C=Re.stuffBits(a,y));let Ie=p-p%y;if(!(h&&C.getSize()>y*64)&&C.getSize()+l<=Ie)break}}let S=Re.generateCheckWords(C,p,y),N=C.getSize()/y,M=Re.generateModeMessage(h,d,N),D=(h?11:14)+d*4,P=new Int32Array(D),V;if(h){V=D;for(let q=0;q<P.length;q++)P[q]=q}else{V=D+1+2*_.truncDivision(_.truncDivision(D,2)-1,15);let q=_.truncDivision(D,2),Ie=_.truncDivision(V,2);for(let Ee=0;Ee<q;Ee++){let Qt=Ee+_.truncDivision(Ee,15);P[q-Ee-1]=Ie-Qt-1,P[q+Ee]=Ie+Qt+1}}let $=new $e(V);for(let q=0,Ie=0;q<d;q++){let Ee=(d-q)*4+(h?9:12);for(let Qt=0;Qt<Ee;Qt++){let Nn=Qt*2;for(let Zt=0;Zt<2;Zt++)S.get(Ie+Nn+Zt)&&$.set(P[q*2+Zt],P[q*2+Qt]),S.get(Ie+Ee*2+Nn+Zt)&&$.set(P[q*2+Qt],P[D-1-q*2-Zt]),S.get(Ie+Ee*4+Nn+Zt)&&$.set(P[D-1-q*2-Zt],P[D-1-q*2-Qt]),S.get(Ie+Ee*6+Nn+Zt)&&$.set(P[D-1-q*2-Qt],P[q*2+Zt])}Ie+=Ee*8}if(Re.drawModeMessage($,h,V,M),h)Re.drawBullsEye($,_.truncDivision(V,2),5);else{Re.drawBullsEye($,_.truncDivision(V,2),7);for(let q=0,Ie=0;q<_.truncDivision(D,2)-1;q+=15,Ie+=16)for(let Ee=_.truncDivision(V,2)&1;Ee<V;Ee+=2)$.set(_.truncDivision(V,2)-Ie,Ee),$.set(_.truncDivision(V,2)+Ie,Ee),$.set(Ee,_.truncDivision(V,2)-Ie),$.set(Ee,_.truncDivision(V,2)+Ie)}let ee=new Qf;return ee.setCompact(h),ee.setSize(V),ee.setLayers(d),ee.setCodeWords(N),ee.setMatrix($),ee}static drawBullsEye(n,i,s){for(let a=0;a<s;a+=2)for(let l=i-a;l<=i+a;l++)n.set(l,i-a),n.set(l,i+a),n.set(i-a,l),n.set(i+a,l);n.set(i-s,i-s),n.set(i-s+1,i-s),n.set(i-s,i-s+1),n.set(i+s,i-s),n.set(i+s,i-s+1),n.set(i+s,i+s-1)}static generateModeMessage(n,i,s){let a=new k;return n?(a.appendBits(i-1,2),a.appendBits(s-1,6),a=Re.generateCheckWords(a,28,4)):(a.appendBits(i-1,5),a.appendBits(s-1,11),a=Re.generateCheckWords(a,40,4)),a}static drawModeMessage(n,i,s,a){let l=_.truncDivision(s,2);if(i)for(let c=0;c<7;c++){let h=l-3+c;a.get(c)&&n.set(h,l-5),a.get(c+7)&&n.set(l+5,h),a.get(20-c)&&n.set(h,l+5),a.get(27-c)&&n.set(l-5,h)}else for(let c=0;c<10;c++){let h=l-5+c+_.truncDivision(c,5);a.get(c)&&n.set(h,l-7),a.get(c+10)&&n.set(l+7,h),a.get(29-c)&&n.set(h,l+7),a.get(39-c)&&n.set(l-7,h)}}static generateCheckWords(n,i,s){let a=n.getSize()/s,l=new Nl(Re.getGF(s)),c=_.truncDivision(i,s),h=Re.bitsToWords(n,s,c);l.encode(h,c-a);let d=i%s,p=new k;p.appendBits(0,d);for(const y of Array.from(h))p.appendBits(y,s);return p}static bitsToWords(n,i,s){let a=new Int32Array(s),l,c;for(l=0,c=n.getSize()/i;l<c;l++){let h=0;for(let d=0;d<i;d++)h|=n.get(l*i+d)?1<<i-d-1:0;a[l]=h}return a}static getGF(n){switch(n){case 4:return be.AZTEC_PARAM;case 6:return be.AZTEC_DATA_6;case 8:return be.AZTEC_DATA_8;case 10:return be.AZTEC_DATA_10;case 12:return be.AZTEC_DATA_12;default:throw new I("Unsupported word size "+n)}}static stuffBits(n,i){let s=new k,a=n.getSize(),l=(1<<i)-2;for(let c=0;c<a;c+=i){let h=0;for(let d=0;d<i;d++)(c+d>=a||n.get(c+d))&&(h|=1<<i-1-d);(h&l)===l?(s.appendBits(h&l,i),c--):h&l?s.appendBits(h,i):(s.appendBits(h|1,i),c--)}return s}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Re.DEFAULT_EC_PERCENT=33,Re.DEFAULT_AZTEC_LAYERS=0,Re.MAX_NB_BITS=32,Re.MAX_NB_BITS_COMPACT=4,Re.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Oo{encode(n,i,s,a){return this.encodeWithHints(n,i,s,a,null)}encodeWithHints(n,i,s,a,l){let c=Rl.ISO_8859_1,h=Re.DEFAULT_EC_PERCENT,d=Re.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(wt.CHARACTER_SET)&&(c=Xf.forName(l.get(wt.CHARACTER_SET).toString())),l.has(wt.ERROR_CORRECTION)&&(h=_.parseInt(l.get(wt.ERROR_CORRECTION).toString())),l.has(wt.AZTEC_LAYERS)&&(d=_.parseInt(l.get(wt.AZTEC_LAYERS).toString()))),Oo.encodeLayers(n,i,s,a,c,h,d)}static encodeLayers(n,i,s,a,l,c,h){if(i!==ae.AZTEC)throw new I("Can only encode AZTEC, but got "+i);let d=Re.encode(ce.getBytes(n,l),c,h);return Oo.renderResult(d,s,a)}static renderResult(n,i,s){let a=n.getMatrix();if(a==null)throw new Fn;let l=a.getWidth(),c=a.getHeight(),h=Math.max(i,l),d=Math.max(s,c),p=Math.min(h/l,d/c),y=(h-l*p)/2,C=(d-c*p)/2,S=new $e(h,d);for(let N=0,M=C;N<c;N++,M+=p)for(let D=0,P=y;D<l;D++,P+=p)a.get(D,N)&&S.setRegion(P,M,p,p);return S}}r.AbstractExpandedDecoder=xl,r.ArgumentException=A,r.ArithmeticException=wo,r.AztecCode=Qf,r.AztecCodeReader=Co,r.AztecCodeWriter=Oo,r.AztecDecoder=He,r.AztecDetector=Lf,r.AztecDetectorResult=bf,r.AztecEncoder=Re,r.AztecHighLevelEncoder=xs,r.AztecPoint=Ft,r.BarcodeFormat=ae,r.Binarizer=F,r.BinaryBitmap=O,r.BitArray=k,r.BitMatrix=$e,r.BitSource=Cl,r.BrowserAztecCodeReader=Zg,r.BrowserBarcodeReader=ep,r.BrowserCodeReader=Be,r.BrowserDatamatrixCodeReader=np,r.BrowserMultiFormatReader=dp,r.BrowserPDF417Reader=gp,r.BrowserQRCodeReader=pp,r.BrowserQRCodeSvgWriter=qr,r.CharacterSetECI=H,r.ChecksumException=L,r.Code128Reader=ne,r.Code39Reader=mt,r.DataMatrixDecodedBitStreamParser=gr,r.DataMatrixReader=pr,r.DecodeHintType=X,r.DecoderResult=Gr,r.DefaultGridSampler=Df,r.DetectorResult=Eo,r.EAN13Reader=Yr,r.EncodeHintType=wt,r.Exception=m,r.FormatException=b,r.GenericGF=be,r.GenericGFPoly=Wt,r.GlobalHistogramBinarizer=Ke,r.GridSampler=dl,r.GridSamplerInstance=hr,r.HTMLCanvasElementLuminanceSource=pe,r.HybridBinarizer=ye,r.ITFReader=je,r.IllegalArgumentException=I,r.IllegalStateException=Fn,r.InvertedLuminanceSource=ge,r.LuminanceSource=re,r.MathUtils=_e,r.MultiFormatOneDReader=yi,r.MultiFormatReader=Yf,r.MultiFormatWriter=xp,r.NotFoundException=G,r.OneDReader=ht,r.PDF417DecodedBitStreamParser=z,r.PDF417DecoderErrorCorrection=jf,r.PDF417Reader=Nt,r.PDF417ResultMetadata=Vf,r.PerspectiveTransform=vn,r.PlanarYUVLuminanceSource=Vn,r.QRCodeByteMatrix=_o,r.QRCodeDataMask=gn,r.QRCodeDecodedBitStreamParser=et,r.QRCodeDecoderErrorCorrectionLevel=We,r.QRCodeDecoderFormatInformation=Dt,r.QRCodeEncoder=Ye,r.QRCodeEncoderQRCode=Kr,r.QRCodeMaskUtil=ot,r.QRCodeMatrixUtil=me,r.QRCodeMode=de,r.QRCodeReader=mr,r.QRCodeVersion=he,r.QRCodeWriter=Ci,r.RGBLuminanceSource=_l,r.RSS14Reader=st,r.RSSExpandedReader=Z,r.ReaderException=No,r.ReedSolomonDecoder=ls,r.ReedSolomonEncoder=Nl,r.ReedSolomonException=pi,r.Result=Me,r.ResultMetadataType=ft,r.ResultPoint=le,r.StringUtils=ce,r.UnsupportedOperationException=ue,r.VideoInputDevice=te,r.WhiteRectangleDetector=er,r.WriterException=ze,r.ZXingArrays=T,r.ZXingCharset=Xf,r.ZXingInteger=_,r.ZXingStandardCharsets=Rl,r.ZXingStringBuilder=we,r.ZXingStringEncoding=Ne,r.ZXingSystem=B,r.createAbstractExpandedDecoder=Ff,Object.defineProperty(r,"__esModule",{value:!0})})})(fc,fc.exports);var Qe=fc.exports;const Jx=z0(Qe),$x=j0({__proto__:null,default:Jx},[Qe]);var C0=function(){function e(t,r,o){if(this.formatMap=new Map([[se.QR_CODE,Qe.BarcodeFormat.QR_CODE],[se.AZTEC,Qe.BarcodeFormat.AZTEC],[se.CODABAR,Qe.BarcodeFormat.CODABAR],[se.CODE_39,Qe.BarcodeFormat.CODE_39],[se.CODE_93,Qe.BarcodeFormat.CODE_93],[se.CODE_128,Qe.BarcodeFormat.CODE_128],[se.DATA_MATRIX,Qe.BarcodeFormat.DATA_MATRIX],[se.MAXICODE,Qe.BarcodeFormat.MAXICODE],[se.ITF,Qe.BarcodeFormat.ITF],[se.EAN_13,Qe.BarcodeFormat.EAN_13],[se.EAN_8,Qe.BarcodeFormat.EAN_8],[se.PDF_417,Qe.BarcodeFormat.PDF_417],[se.RSS_14,Qe.BarcodeFormat.RSS_14],[se.RSS_EXPANDED,Qe.BarcodeFormat.RSS_EXPANDED],[se.UPC_A,Qe.BarcodeFormat.UPC_A],[se.UPC_E,Qe.BarcodeFormat.UPC_E],[se.UPC_EAN_EXTENSION,Qe.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!$x)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=o;var u=this.createZXingFormats(t),f=new Map;f.set(Qe.DecodeHintType.POSSIBLE_FORMATS,u),f.set(Qe.DecodeHintType.TRY_HARDER,!1),this.hints=f}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(o,u){try{o(r.decode(t))}catch(f){u(f)}})},e.prototype.decode=function(t){var r=new Qe.MultiFormatReader(this.verbose,this.hints),o=new Qe.HTMLCanvasElementLuminanceSource(t),u=new Qe.BinaryBitmap(new Qe.HybridBinarizer(o)),f=r.decode(u);return{text:f.text,format:hg.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,o,u){t.set(r,o)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],o=0,u=t;o<u.length;o++){var f=u[o];this.formatMap.has(f)?r.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),ew=function(e,t,r,o){function u(f){return f instanceof r?f:new r(function(g){g(f)})}return new(r||(r=Promise))(function(f,g){function x(A){try{m(o.next(A))}catch(I){g(I)}}function w(A){try{m(o.throw(A))}catch(I){g(I)}}function m(A){A.done?f(A.value):u(A.value).then(x,w)}m((o=o.apply(e,t||[])).next())})},tw=function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(m){return function(A){return w([m,A])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(f=m[0]&2?u.return:m[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,m[1])).done)return f;switch(u=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){r.label=m[1];break}if(m[0]===6&&r.label<f[1]){r.label=f[1],f=m;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(m);break}f[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],u=0}finally{o=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},A0=function(){function e(t,r,o){if(this.formatMap=new Map([[se.QR_CODE,"qr_code"],[se.AZTEC,"aztec"],[se.CODABAR,"codabar"],[se.CODE_39,"code_39"],[se.CODE_93,"code_93"],[se.CODE_128,"code_128"],[se.DATA_MATRIX,"data_matrix"],[se.ITF,"itf"],[se.EAN_13,"ean_13"],[se.EAN_8,"ean_8"],[se.PDF_417,"pdf417"],[se.UPC_A,"upc_a"],[se.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=o;var u=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return ew(this,void 0,void 0,function(){var r,o;return tw(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=u.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(r),[2,{text:o.rawValue,format:hg.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,o=0,u=0,f=t;u<f.length;u++){var g=f[u],x=g.boundingBox.width*g.boundingBox.height;x>o&&(o=x,r=g)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],o=0,u=t;o<u.length;o++){var f=u[o];this.formatMap.has(f)?r.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,o,u){t.set(r,o)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),S0=function(e,t,r,o){function u(f){return f instanceof r?f:new r(function(g){g(f)})}return new(r||(r=Promise))(function(f,g){function x(A){try{m(o.next(A))}catch(I){g(I)}}function w(A){try{m(o.throw(A))}catch(I){g(I)}}function m(A){A.done?f(A.value):u(A.value).then(x,w)}m((o=o.apply(e,t||[])).next())})},I0=function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(m){return function(A){return w([m,A])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(f=m[0]&2?u.return:m[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,m[1])).done)return f;switch(u=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){r.label=m[1];break}if(m[0]===6&&r.label<f[1]){r.label=f[1],f=m;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(m);break}f[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],u=0}finally{o=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},nw=function(){function e(t,r,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,r&&A0.isSupported()?(this.primaryDecoder=new A0(t,o,u),this.secondaryDecoder=new C0(t,o,u)):this.primaryDecoder=new C0(t,o,u)}return e.prototype.decodeAsync=function(t){return S0(this,void 0,void 0,function(){var r;return I0(this,function(o){switch(o.label){case 0:r=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return S0(this,void 0,void 0,function(){var r,o;return I0(this,function(u){switch(u.label){case 0:r=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw o;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,o=this.executionResults;r<o.length;r++){var u=o[r];t+=u}var f=t/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Ef=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Fa=function(e,t,r,o){function u(f){return f instanceof r?f:new r(function(g){g(f)})}return new(r||(r=Promise))(function(f,g){function x(A){try{m(o.next(A))}catch(I){g(I)}}function w(A){try{m(o.throw(A))}catch(I){g(I)}}function m(A){A.done?f(A.value):u(A.value).then(x,w)}m((o=o.apply(e,t||[])).next())})},Ua=function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(m){return function(A){return w([m,A])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(f=m[0]&2?u.return:m[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,m[1])).done)return f;switch(u=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){r.label=m[1];break}if(m[0]===6&&r.label<f[1]){r.label=f[1],f=m;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(m);break}f[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],u=0}finally{o=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},mg=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var o={advanced:[r]};return this.track.applyConstraints(o)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),rw=function(e){Ef(t,e);function t(r,o){return e.call(this,r,o)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var o={};o[this.name]=r;var u={advanced:[o]};return this.track.applyConstraints(u)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),o=r[this.name];return{min:o.min,max:o.max,step:o.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(mg),iw=function(e){Ef(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(rw),sw=function(e){Ef(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(mg),ow=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new iw(this.track)},e.prototype.torchFeature=function(){return new sw(this.track)},e}(),aw=function(){function e(t,r,o){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var o=t.surface.clientWidth,u=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(o,u),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,o,u){return Fa(this,void 0,void 0,function(){var f,g;return Ua(this,function(x){switch(x.label){case 0:return f=new e(t,r,u),o.aspectRatio?(g={aspectRatio:o.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:x.sent(),x.label=2;case 2:return f.setupSurface(),[2,f]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,o=function(){setTimeout(t,200),r.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Fa(this,void 0,void 0,function(){return Ua(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,o){var u=t.mediaStream.getVideoTracks(),f=u.length,g=0;t.mediaStream.getVideoTracks().forEach(function(x){t.mediaStream.removeTrack(x),x.stop(),++g,g>=f&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new ow(this.getFirstTrackOrFail())},e}(),lw=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,o){return Fa(this,void 0,void 0,function(){return Ua(this,function(u){return[2,aw.create(t,this.mediaStream,r,o)]})})},e.create=function(t){return Fa(this,void 0,void 0,function(){var r,o;return Ua(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return o=u.sent(),[2,new e(o)]}})})},e}(),v0=function(e,t,r,o){function u(f){return f instanceof r?f:new r(function(g){g(f)})}return new(r||(r=Promise))(function(f,g){function x(A){try{m(o.next(A))}catch(I){g(I)}}function w(A){try{m(o.throw(A))}catch(I){g(I)}}function m(A){A.done?f(A.value):u(A.value).then(x,w)}m((o=o.apply(e,t||[])).next())})},T0=function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(m){return function(A){return w([m,A])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(f=m[0]&2?u.return:m[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,m[1])).done)return f;switch(u=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){r.label=m[1];break}if(m[0]===6&&r.label<f[1]){r.label=f[1],f=m;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(m);break}f[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],u=0}finally{o=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},uw=function(){function e(){}return e.failIfNotSupported=function(){return v0(this,void 0,void 0,function(){return T0(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return v0(this,void 0,void 0,function(){return T0(this,function(r){return[2,lw.create(t)]})})},e}(),cw=function(e,t,r,o){function u(f){return f instanceof r?f:new r(function(g){g(f)})}return new(r||(r=Promise))(function(f,g){function x(A){try{m(o.next(A))}catch(I){g(I)}}function w(A){try{m(o.throw(A))}catch(I){g(I)}}function m(A){A.done?f(A.value):u(A.value).then(x,w)}m((o=o.apply(e,t||[])).next())})},fw=function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(m){return function(A){return w([m,A])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(f=m[0]&2?u.return:m[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,m[1])).done)return f;switch(u=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){r.label=m[1];break}if(m[0]===6&&r.label<f[1]){r.label=f[1],f=m;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(m);break}f[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],u=0}finally{o=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},hw=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Fi.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Fi.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return cw(this,void 0,void 0,function(){var t,r,o,u,f,g,x;return fw(this,function(w){switch(w.label){case 0:return t=function(m){for(var A=m.getVideoTracks(),I=0,O=A;I<O.length;I++){var L=O[I];L.enabled=!1,L.stop(),m.removeTrack(L)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=w.sent(),u=[],f=0,g=o;f<g.length;f++)x=g[f],x.kind==="videoinput"&&u.push({id:x.deviceId,label:x.label});return t(r),[2,u]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var o=function(f){for(var g=[],x=0,w=f;x<w.length;x++){var m=w[x];m.kind==="video"&&g.push({id:m.id,label:m.label})}t(g)},u=MediaStreamTrack;u.getSources(o)})},e}(),at;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(at||(at={}));var dw=function(){function e(){this.state=at.NOT_STARTED,this.onGoingTransactionNewState=at.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===at.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=at.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===at.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=at.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==at.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case at.UNKNOWN:throw"Transition from unknown is not allowed";case at.NOT_STARTED:this.failIfNewStateIs(t,[at.PAUSED]);break;case at.SCANNING:break;case at.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var o=0,u=r;o<u.length;o++){var f=u[o];if(t===f)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),gw=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===at.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==at.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===at.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===at.PAUSED},e}(),pw=function(){function e(){}return e.create=function(){return new gw(new dw)},e}(),mw=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),nn=function(e){mw(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Mn),xw=function(){function e(t,r){this.logger=r,this.fps=nn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=nn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?pg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Xn(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),N0=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var o;typeof r=="boolean"?this.verbose=r===!0:r&&(o=r,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new gg(this.verbose),this.qrcode=new nw(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=pw.create()}return e.prototype.start=function(t,r,o,u){var f=this;if(!t)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;u?g=u:g=this.verbose?this.logger.log:function(){};var x=xw.create(r,this.logger);this.clearElement();var w=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=w,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:nn.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var I=this,O=this.stateManagerProxy.startTransition(at.SCANNING);return new Promise(function(L,F){var B=m?x.videoConstraints:I.createVideoConstraints(t);if(!B){O.cancel(),F("videoConstraints should be defined");return}var Y={};(!m||x.aspectRatio)&&(Y.aspectRatio=x.aspectRatio);var R={onRenderSurfaceReady:function(T,_){I.setupUi(T,_,x),I.isScanning=!0,I.foreverScan(x,o,g)}};uw.failIfNotSupported().then(function(T){T.create(B).then(function(_){return _.render(f.element,Y,R).then(function(k){I.renderedCamera=k,O.execute(),L(null)}).catch(function(k){O.cancel(),F(k)})}).catch(function(_){O.cancel(),F(Fi.errorGettingUserMedia(_))})}).catch(function(T){O.cancel(),F(Fi.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(at.PAUSED),this.showPausedState(),(Xn(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(at.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(at.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(t.element){var f=document.getElementById(nn.SHADED_REGION_ELEMENT_ID);f&&t.element.removeChild(f)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),r.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(o){return o.decodedText})},e.prototype.scanFileV2=function(t,r){var o=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Xn(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,f){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(t);var g=new Image;g.onload=function(){var x=g.width,w=g.height,m=document.getElementById(o.elementId),A=m.clientWidth?m.clientWidth:nn.DEFAULT_WIDTH,I=Math.max(m.clientHeight?m.clientHeight:w,nn.FILE_SCAN_MIN_HEIGHT),O=o.computeCanvasDrawConfig(x,w,A,I);if(r){var L=o.createCanvasElement(A,I,"qr-canvas-visible");L.style.display="inline-block",m.appendChild(L);var F=L.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=A,F.canvas.height=I,F.drawImage(g,0,0,x,w,O.x,O.y,O.width,O.height)}var B=nn.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(g.width,O.width),R=Math.max(g.height,O.height),T=Y+2*B,_=R+2*B,k=o.createCanvasElement(T,_);m.appendChild(k);var Q=k.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=T,Q.canvas.height=_,Q.drawImage(g,0,0,x,w,B,B,Y,R);try{o.qrcode.decodeRobustlyAsync(k).then(function(X){u(y0.createFromQrcodeResult(X))}).catch(f)}catch(X){f("QR code parse error, error = ".concat(X))}},g.onerror=f,g.onabort=f,g.onstalled=f,g.onsuspend=f,g.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return hw.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!pg.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[se.QR_CODE,se.AZTEC,se.CODABAR,se.CODE_39,se.CODE_93,se.CODE_128,se.DATA_MATRIX,se.MAXICODE,se.ITF,se.EAN_13,se.EAN_8,se.PDF_417,se.RSS_14,se.RSS_EXPANDED,se.UPC_A,se.UPC_E,se.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,f=t.formatsToSupport;u<f.length;u++){var g=f[u];Kx(g)?o.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Xn(t))return!0;if(!Xn(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Xn(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return Xn(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,o){var u=this,f=o.qrbox;this.validateQrboxConfig(f);var g=this.toQrdimensions(t,r,f),x=function(m){if(m<nn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(nn.MIN_QR_BOX_SIZE,"px.")},w=function(m){return m>t&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m};x(g.width),x(g.height),g.width=w(g.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(t,r)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},e.prototype.setupUi=function(t,r,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,o);var u=Xn(o.qrbox)?{width:t,height:r}:o.qrbox;this.validateQrboxConfig(u);var f=this.toQrdimensions(t,r,u);f.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=o.isShadedBoxEnabled()&&f.height<=r,x={x:0,y:0,width:t,height:r},w=g?this.getShadedRegionBounds(t,r,f):x,m=this.createCanvasElement(w.width,w.height),A={willReadFrequently:!0},I=m.getContext("2d",A);I.canvas.width=w.width,I.canvas.height=w.height,this.element.append(m),g&&this.possiblyInsertShadingElement(this.element,t,r,f),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=I,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Fi.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return t(u.text,y0.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var f=Fi.codeParseError(u);return r(f,dg.createFrom(f)),!1})},e.prototype.foreverScan=function(t,r,o){var u=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),g=f.videoWidth/f.clientWidth,x=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*g,m=this.qrRegion.height*x,A=this.qrRegion.x*g,I=this.qrRegion.y*x;this.context.drawImage(f,A,I,w,m,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(t,r,o)},u.getTimeoutFps(t.fps))};this.scanContext(r,o).then(function(L){!L&&t.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(r,o).finally(function(){O()})):O()}).catch(function(L){u.logger.logError("Error happend while scanning context",L),O()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",o="deviceId",u={user:!0,environment:!0},f="exact",g=function(F){if(F in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(F,"'")},x=Object.keys(t);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var w=Object.keys(t)[0];if(w!==r&&w!==o)throw"Only '".concat(r,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(w===r){var m=t.facingMode;if(typeof m=="string"){if(g(m))return{facingMode:m}}else if(typeof m=="object")if(f in m){if(g(m["".concat(f)]))return{facingMode:{exact:m["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var A=typeof m;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var I=t.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(f in I)return{deviceId:{exact:I["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var O=typeof I;throw"Invalid type of 'deviceId' = ".concat(O)}}}var L=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(L)},e.prototype.computeCanvasDrawConfig=function(t,r,o,u){if(t<=o&&r<=u){var f=(o-t)/2,g=(u-r)/2;return{x:f,y:g,width:t,height:r}}else{var x=t,w=r;return t>o&&(r=o/t*r,t=o),r>u&&(t=u/r*t,r=u),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(w)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,o,u)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?nn.BORDER_SHADER_MATCH_COLOR:nn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,o){var u=t,f=r,g=document.createElement("canvas");return g.style.width="".concat(u,"px"),g.style.height="".concat(f,"px"),g.style.display="none",g.id=Xn(o)?"qr-canvas":o,g},e.prototype.getShadedRegionBounds=function(t,r,o){if(o.width>t||o.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-o.width)/2,y:(r-o.height)/2,width:o.width,height:o.height}},e.prototype.possiblyInsertShadingElement=function(t,r,o,u){if(!(r-u.width<1||o-u.height<1)){var f=document.createElement("div");f.style.position="absolute";var g=(r-u.width)/2,x=(o-u.height)/2;if(f.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(nn.SHADED_REGION_ELEMENT_ID),r-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var w=5,m=40;this.insertShaderBorders(f,m,w,-w,null,0,!0),this.insertShaderBorders(f,m,w,-w,null,0,!1),this.insertShaderBorders(f,m,w,null,-w,0,!0),this.insertShaderBorders(f,m,w,null,-w,0,!1),this.insertShaderBorders(f,w,m+w,-w,null,-w,!0),this.insertShaderBorders(f,w,m+w,null,-w,-w,!0),this.insertShaderBorders(f,w,m+w,-w,null,-w,!1),this.insertShaderBorders(f,w,m+w,null,-w,-w,!1),this.hasBorderShaders=!0}t.append(f)}},e.prototype.insertShaderBorders=function(t,r,o,u,f,g,x){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=nn.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(r,"px"),w.style.height="".concat(o,"px"),u!==null&&(w.style.top="".concat(u,"px")),f!==null&&(w.style.bottom="".concat(f,"px")),x?w.style.left="".concat(g,"px"):w.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),t.appendChild(w)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Cf="data:image/svg+xml;base64,",ww=Cf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",yw=Cf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",_0=Cf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Ew="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",R0=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Cw=function(){function e(){this.data=R0.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=R0.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),Aw=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=E0.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var o=document.createElement("br"),u=document.createElement("br");this.infoDiv.appendChild(o),this.infoDiv.appendChild(u);var f=document.createElement("a");f.innerText=E0.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Sw=function(){function e(t,r){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=r,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=_0,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(o){return r.onHoverIn()},this.infoIcon.onmouseout=function(o){return r.onHoverOut()},this.infoIcon.onclick=function(o){return r.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Ew,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=_0,this.infoIcon.style.opacity="0.6")},e}(),Iw=function(){function e(){var t=this;this.infoDiv=new Aw,this.infoIcon=new Sw(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),vw=function(e,t,r,o){function u(f){return f instanceof r?f:new r(function(g){g(f)})}return new(r||(r=Promise))(function(f,g){function x(A){try{m(o.next(A))}catch(I){g(I)}}function w(A){try{m(o.throw(A))}catch(I){g(I)}}function m(A){A.done?f(A.value):u(A.value).then(x,w)}m((o=o.apply(e,t||[])).next())})},Tw=function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(m){return function(A){return w([m,A])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(f=m[0]&2?u.return:m[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,m[1])).done)return f;switch(u=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){r.label=m[1];break}if(m[0]===6&&r.label<f[1]){r.label=f[1],f=m;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(m);break}f[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],u=0}finally{o=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},O0=function(){function e(){}return e.hasPermissions=function(){return vw(this,void 0,void 0,function(){var t,r,o,u;return Tw(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=f.sent(),r=0,o=t;r<o.length;r++)if(u=o[r],u.kind==="videoinput"&&u.label)return[2,!0];return[2,!1]}})})},e}(),Er=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,r=this.supportedScanTypes;t<r.length;t++){var o=r[t];if(e.isCameraScanType(o))return!0}return!1},e.isCameraScanType=function(t){return t===jr.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===jr.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Mn.DEFAULT_SUPPORTED_SCAN_TYPE;var r=Mn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var o=0,u=t;o<u.length;o++){var f=u[o];if(!Mn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return t},e}(),on=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),sr=function(){function e(){}return e.createElement=function(t,r){var o=document.createElement(t);return o.id=r,o.classList.add(on.ALL_ELEMENT_CLASS),t==="button"&&o.setAttribute("type","button"),o},e}(),xg=function(e,t,r,o){function u(f){return f instanceof r?f:new r(function(g){g(f)})}return new(r||(r=Promise))(function(f,g){function x(A){try{m(o.next(A))}catch(I){g(I)}}function w(A){try{m(o.throw(A))}catch(I){g(I)}}function m(A){A.done?f(A.value):u(A.value).then(x,w)}m((o=o.apply(e,t||[])).next())})},wg=function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},o,u,f,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(m){return function(A){return w([m,A])}}function w(m){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(f=m[0]&2?u.return:m[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,m[1])).done)return f;switch(u=0,f&&(m=[m[0]&2,f.value]),m[0]){case 0:case 1:f=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!f||m[1]>f[0]&&m[1]<f[3])){r.label=m[1];break}if(m[0]===6&&r.label<f[1]){r.label=f[1],f=m;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(m);break}f[2]&&r.ops.pop(),r.trys.pop();continue}m=t.call(e,r)}catch(A){m=[6,A],u=0}finally{o=f=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},M0=function(){function e(t,r,o){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=r,this.onTorchActionFailureCallback=o}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return xg(this,void 0,void 0,function(){var t,r;return wg(this,function(o){switch(o.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return o.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return r=o.sent(),this.propagateFailure(t,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,r){t===r?(this.buttonController.setText(r?Pe.torchOffButton():Pe.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},e.prototype.propagateFailure=function(t,r){var o=t?Pe.torchOnFailedMessage():Pe.torchOffFailedMessage();r&&(o+="; Error = "+r),this.onTorchActionFailureCallback(o)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),Nw=function(){function e(t,r){this.onTorchActionFailureCallback=r,this.torchButton=sr.createElement("button",on.TORCH_BUTTON_ID),this.torchController=new M0(t,this,r)}return e.prototype.render=function(t,r){var o=this;this.torchButton.innerText=Pe.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var u=this;this.torchButton.addEventListener("click",function(f){return xg(o,void 0,void 0,function(){return wg(this,function(g){switch(g.label){case 0:return[4,u.torchController.flipState()];case 1:return g.sent(),u.torchController.isTorchEnabled()?(u.torchButton.classList.remove(on.TORCH_BUTTON_CLASS_TORCH_OFF),u.torchButton.classList.add(on.TORCH_BUTTON_CLASS_TORCH_ON)):(u.torchButton.classList.remove(on.TORCH_BUTTON_CLASS_TORCH_ON),u.torchButton.classList.add(on.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new M0(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Pe.torchOnButton(),this.torchController.reset()},e.create=function(t,r,o,u){var f=new e(r,u);return f.render(t,o),f},e}(),_w=function(){function e(t,r,o){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",t.appendChild(this.fileBasedScanRegion);var u=document.createElement("label");u.setAttribute("for",this.getFileScanInputId()),u.style.display="inline-block",this.fileBasedScanRegion.appendChild(u),this.fileSelectionButton=sr.createElement("button",on.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(x){u.click()}),u.append(this.fileSelectionButton),this.fileScanInput=sr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",u.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(x){if(!(x==null||x.target==null)){var w=x.target;if(!(w.files&&w.files.length===0)){var m=w.files,A=m[0],I=A.name;f.setImageNameToButton(I),o(A)}}});var g=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(g),this.fileBasedScanRegion.addEventListener("dragenter",function(x){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(x){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(x){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(x){x.stopPropagation(),x.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var w=x.dataTransfer;if(w){var m=w.files;if(!m||m.length===0)return;for(var A=!1,I=0;I<m.length;++I){var O=m.item(I);if(O){var L=/image.*/;if(O.type.match(L)){A=!0;var F=O.name;f.setImageNameToButton(F),o(O),g.innerText=Pe.dragAndDropMessage();break}}}A||(g.innerText=Pe.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Pe.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var r=20;if(t.length>r){var o=t.substring(0,8),u=t.length,f=t.substring(u-8,u);t="".concat(o,"....").concat(f)}var g=Pe.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=g},e.prototype.setInitialValueToButton=function(){var t=Pe.fileSelectionChooseImage()+" - "+Pe.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,r,o){var u=new e(t,r,o);return u},e}(),Rw=function(){function e(t){this.selectElement=sr.createElement("select",on.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var r=document.createElement("span");r.style.marginRight="10px";var o=this.cameras.length;if(o===0)throw new Error("No cameras found");if(o===1)r.style.display="none";else{var u=Pe.selectCamera();r.innerText="".concat(u," (").concat(this.cameras.length,")  ")}for(var f=1,g=0,x=this.cameras;g<x.length;g++){var w=x[g],m=w.id,A=w.label==null?m:w.label;(!A||A==="")&&(A=[Pe.anonymousCameraPrefix(),f++].join(" "));var I=document.createElement("option");I.value=m,I.innerText=A,this.options.push(I),this.selectElement.appendChild(I)}r.appendChild(this.selectElement),t.appendChild(r)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var r=0,o=this.options;r<o.length;r++){var u=o[r];if(u.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,r){var o=new e(r);return o.render(t),o},e}(),Ow=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=sr.createElement("input",on.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var o=Pe.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(o),this.rangeText.style.marginRight="10px";var u=this;this.rangeInput.addEventListener("input",function(){return u.onValueChange()}),this.rangeInput.addEventListener("change",function(){return u.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Pe.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,r,o,u){this.rangeInput.min=t.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=u.toString(),this.rangeInput.value=o.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,r){var o=new e;return o.render(t,r),o},e}(),rn;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(rn||(rn={}));function Mw(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function bw(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var Dw=function(){function e(t,r,o){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(r),this.verbose=o===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new Er(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new gg(this.verbose),this.persistedDataManager=new Cw,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,r){var o=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,g){if(t)t(f,g);else{if(o.lastMatchFound===f)return;o.lastMatchFound=f,o.setHeaderMessage(Pe.lastMatch(f),rn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,g){r&&r(f,g)};var u=document.getElementById(this.elementId);if(!u)throw"HTML Element with id=".concat(this.elementId," not found");u.innerHTML="",this.createBasicLayout(u),this.html5Qrcode=new N0(this.getScanRegionId(),bw(this.config,this.verbose))},e.prototype.pause=function(t){(Xn(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,r=function(){var o=document.getElementById(t.elementId);o&&(o.innerHTML="",t.resetBasicLayout(o))};return this.html5Qrcode?new Promise(function(o,u){if(!t.html5Qrcode){o();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(f){if(!t.html5Qrcode){o();return}t.html5Qrcode.clear(),r(),o()}).catch(function(f){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",f),u(f)}):(t.html5Qrcode.clear(),r(),o())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Mn.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Mn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Mn.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Mn.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Mn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Mn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Mn.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var r=document.createElement("div"),o=this.getScanRegionId();r.id=o,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",t.appendChild(r),Er.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var u=document.createElement("div"),f=this.getDashboardId();u.id=f,u.style.width="100%",t.appendChild(u),this.setupInitialDashboard(u)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",t.appendChild(r);var o=new Iw;o.renderInto(r);var u=document.createElement("div");u.id=this.getHeaderMessageContainerId(),u.style.display="none",u.style.textAlign="center",u.style.fontSize="14px",u.style.padding="2px 10px",u.style.margin="4px",u.style.borderTop="1px solid #f6f6f6",r.appendChild(u)},e.prototype.createSection=function(t){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",t.appendChild(r)},e.prototype.createCameraListUi=function(t,r,o){var u=this;u.showHideScanTypeSwapLink(!1),u.setHeaderMessage(Pe.cameraPermissionRequesting());var f=function(){o||u.createPermissionButton(t,r)};N0.getCameras().then(function(g){u.persistedDataManager.setHasPermission(!0),u.showHideScanTypeSwapLink(!0),u.resetHeaderMessage(),g&&g.length>0?(t.removeChild(r),u.renderCameraSelection(g)):(u.setHeaderMessage(Pe.noCameraFound(),rn.STATUS_WARNING),f())}).catch(function(g){u.persistedDataManager.setHasPermission(!1),o?o.disabled=!1:f(),u.setHeaderMessage(g,rn.STATUS_WARNING),u.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,r){var o=this,u=sr.createElement("button",this.getCameraPermissionButtonId());u.innerText=Pe.cameraPermissionTitle(),u.addEventListener("click",function(){u.disabled=!0,o.createCameraListUi(t,r,u)}),r.appendChild(u)},e.prototype.createPermissionsUi=function(t,r){var o=this;if(Er.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){O0.hasPermissions().then(function(u){u?o.createCameraListUi(t,r):(o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(t,r))}).catch(function(u){o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(t,r)});return}this.createPermissionButton(t,r)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");t.appendChild(r);var o=document.createElement("div");o.id=this.getDashboardSectionCameraScanRegionId(),o.style.display=Er.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(o);var u=document.createElement("div");u.style.textAlign="center",o.appendChild(u),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(o,u),this.renderFileScanUi(r)},e.prototype.renderFileScanUi=function(t){var r=Er.isFileScanType(this.currentScanType),o=this,u=function(f){if(!o.html5Qrcode)throw"html5Qrcode not defined";Er.isFileScanType(o.currentScanType)&&(o.setHeaderMessage(Pe.loadingImage()),o.html5Qrcode.scanFileV2(f,!0).then(function(g){o.resetHeaderMessage(),o.qrCodeSuccessCallback(g.decodedText,g)}).catch(function(g){o.setHeaderMessage(g,rn.STATUS_WARNING),o.qrCodeErrorCallback(g,dg.createFrom(g))}))};this.fileSelectionUi=_w.create(t,r,u)},e.prototype.renderCameraSelection=function(t){var r=this,o=this,u=document.getElementById(this.getDashboardSectionCameraScanRegionId());u.style.textAlign="center";var f=Ow.create(u,!1),g=function(B){var Y=B.zoomFeature();if(Y.isSupported()){f.setOnCameraZoomValueChangeCallback(function(T){Y.apply(T)});var R=1;r.config.defaultZoomValueIfSupported&&(R=r.config.defaultZoomValueIfSupported),R=qx(R,Y.min(),Y.max()),f.setValues(Y.min(),Y.max(),R,Y.step()),f.show()}},x=Rw.create(u,t),w=document.createElement("span"),m=sr.createElement("button",on.CAMERA_START_BUTTON_ID);m.innerText=Pe.scanButtonStartScanningText(),w.appendChild(m);var A=sr.createElement("button",on.CAMERA_STOP_BUTTON_ID);A.innerText=Pe.scanButtonStopScanningText(),A.style.display="none",A.disabled=!0,w.appendChild(A);var I,O=function(B){if(!B.torchFeature().isSupported()){I&&I.hide();return}I?I.updateTorchCapability(B.torchFeature()):I=Nw.create(w,B.torchFeature(),{display:"none",marginLeft:"5px"},function(Y){o.setHeaderMessage(Y,rn.STATUS_WARNING)}),I.show()};u.appendChild(w);var L=function(B){B||(m.style.display="none"),m.innerText=Pe.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,B&&(m.style.display="inline-block")};if(m.addEventListener("click",function(B){m.innerText=Pe.scanButtonScanningStarting(),x.disable(),m.disabled=!0,m.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!1),o.resetHeaderMessage();var Y=x.getValue();o.persistedDataManager.setLastUsedCameraId(Y),o.html5Qrcode.start(Y,Mw(o.config),o.qrCodeSuccessCallback,o.qrCodeErrorCallback).then(function(R){A.disabled=!1,A.style.display="inline-block",L(!1);var T=o.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&O(T),r.config.showZoomSliderIfSupported===!0&&g(T)}).catch(function(R){o.showHideScanTypeSwapLink(!0),x.enable(),L(!0),o.setHeaderMessage(R,rn.STATUS_WARNING)})}),x.hasSingleItem()&&m.click(),A.addEventListener("click",function(B){if(!o.html5Qrcode)throw"html5Qrcode not defined";A.disabled=!0,o.html5Qrcode.stop().then(function(Y){r.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!0),x.enable(),m.disabled=!1,A.style.display="none",m.style.display="inline-block",I&&(I.reset(),I.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),o.insertCameraScanImageToScanRegion()}).catch(function(Y){A.disabled=!1,o.setHeaderMessage(Y,rn.STATUS_WARNING)})}),o.persistedDataManager.getLastUsedCameraId()){var F=o.persistedDataManager.getLastUsedCameraId();x.hasValue(F)?(x.setValue(F),m.click()):o.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,r=Pe.textIfCameraScanSelected(),o=Pe.textIfFileScanSelected(),u=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var g=sr.createElement("span",this.getDashboardSectionSwapLinkId());g.style.textDecoration="underline",g.style.cursor="pointer",g.innerText=Er.isCameraScanType(this.currentScanType)?r:o,g.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Er.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),g.innerText=o,t.currentScanType=jr.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),g.innerText=r,t.currentScanType=jr.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),f.appendChild(g),u.appendChild(f)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){O0.hasPermissions().then(function(o){if(o){var u=document.getElementById(r.getCameraPermissionButtonId());if(!u)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";u.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(o){r.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,r){r||(r=rn.STATUS_DEFAULT);var o=this.getHeaderMessageDiv();switch(o.innerText=t,o.style.display="block",r){case rn.STATUS_SUCCESS:o.style.background="rgba(106, 175, 80, 0.26)",o.style.color="#477735";break;case rn.STATUS_WARNING:o.style.background="rgba(203, 36, 49, 0.14)",o.style.color="#cb2431";break;case rn.STATUS_DEFAULT:default:o.style.background="rgba(0, 0, 0, 0)",o.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(o){r.innerHTML="<br>",r.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=ww,this.cameraScanImage.alt=Pe.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(o){r.innerHTML="<br>",r.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=yw,this.fileScanImage.alt=Pe.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return on.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return on.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const Lw=({onScan:e,onClose:t})=>{const r=K.useRef(null);return K.useEffect(()=>{const o=new Dw("reader",{fps:10,qrbox:{width:250,height:250}},!1);return o.render(u=>{o.clear(),e(u)},u=>{}),r.current=o,()=>{r.current&&r.current.clear().catch(u=>{console.error("Failed to clear html5-qrcode scanner. ",u)})}},[e]),j.jsxs("div",{className:"hologram-box",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:100,background:"black"},children:[j.jsx("div",{id:"reader",style:{width:"100%"}}),j.jsx("button",{className:"sw-btn danger",style:{width:"100%",marginTop:"20px"},onClick:t,children:"Close Scanner"})]})},kw=({onBack:e})=>{const{token:t}=K.useContext(hl),[r,o]=K.useState("users"),[u,f]=K.useState([]),[g,x]=K.useState([]),[w,m]=K.useState({username:"",password:"",role:"PJ"}),[A,I]=K.useState(null),[O,L]=K.useState(null),[F,B]=K.useState([]);K.useEffect(()=>{Y(),R()},[]),K.useEffect(()=>{O&&T(O)},[O]);const Y=async()=>{const b=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${t}`}});b.ok&&f(await b.json())},R=async()=>{const b=await fetch("/api/admin/documents",{headers:{Authorization:`Bearer ${t}`}});b.ok&&x(await b.json())},T=async b=>{const W=await fetch(`/api/admin/permissions/${b}`,{headers:{Authorization:`Bearer ${t}`}});W.ok&&B(await W.json())},_=async b=>{b.preventDefault(),(await fetch("/api/admin/users",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(w)})).ok?(alert("User Created"),m({username:"",password:"",role:"PJ"}),Y()):alert("Error creating user")},k=async b=>{b.preventDefault(),(await fetch(`/api/admin/users/${A.id}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(A)})).ok?(alert("User Updated"),I(null),Y()):alert("Error updating user")},Q=async b=>{if(!window.confirm("Are you sure you want to delete this user?"))return;(await fetch(`/api/admin/users/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(alert("User Deleted"),Y()):alert("Error deleting user")},X=async(b,W)=>{if(!O)return;(await fetch("/api/admin/permissions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({userId:O,documentId:b,grant:!W})})).ok&&T(O)};return j.jsxs("div",{className:"hologram-box",style:{height:"100%",overflowY:"auto"},children:[j.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[j.jsx("h2",{className:"hologram-text",children:"ADMINISTRATION"}),j.jsx("button",{className:"sw-btn danger",onClick:e,children:"BACK"})]}),j.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[j.jsx("button",{className:`sw-btn ${r==="users"?"active":""}`,onClick:()=>o("users"),children:"USERS"}),j.jsx("button",{className:`sw-btn ${r==="permissions"?"active":""}`,onClick:()=>o("permissions"),children:"PERMISSIONS"})]}),r==="users"&&j.jsxs("div",{children:[j.jsxs("div",{className:"hologram-box",style:{marginBottom:"20px"},children:[j.jsx("h4",{children:A?"EDIT USER":"CREATE USER"}),j.jsxs("form",{onSubmit:A?k:_,children:[j.jsx("input",{className:"sw-input",placeholder:"Username",value:A?A.username:w.username,onChange:b=>A?I({...A,username:b.target.value}):m({...w,username:b.target.value}),disabled:!!A}),j.jsx("input",{className:"sw-input",placeholder:"Password (leave blank to keep current if editing)",type:"password",value:A?A.password||"":w.password,onChange:b=>A?I({...A,password:b.target.value}):m({...w,password:b.target.value})}),j.jsxs("select",{className:"sw-input",value:A?A.role:w.role,onChange:b=>A?I({...A,role:b.target.value}):m({...w,role:b.target.value}),style:{background:"black"},children:[j.jsx("option",{value:"PJ",children:"PJ"}),j.jsx("option",{value:"PNJ",children:"PNJ"}),j.jsx("option",{value:"ADMIN",children:"ADMIN"}),j.jsx("option",{value:"OPERATOR",children:"OPERATOR"})]}),j.jsx("button",{className:"sw-btn",type:"submit",children:A?"UPDATE":"CREATE"}),A&&j.jsx("button",{className:"sw-btn danger",type:"button",onClick:()=>I(null),style:{marginLeft:"10px"},children:"CANCEL"})]})]}),j.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",color:"var(--sw-blue)"},children:[j.jsx("thead",{children:j.jsxs("tr",{style:{borderBottom:"1px solid var(--sw-blue)"},children:[j.jsx("th",{style:{textAlign:"left"},children:"ID"}),j.jsx("th",{style:{textAlign:"left"},children:"USER"}),j.jsx("th",{style:{textAlign:"left"},children:"ROLE"}),j.jsx("th",{style:{textAlign:"right"},children:"ACTION"})]})}),j.jsx("tbody",{children:u.map(b=>j.jsxs("tr",{style:{borderBottom:"1px solid #333"},children:[j.jsx("td",{children:b.id}),j.jsx("td",{children:b.username}),j.jsx("td",{children:b.role}),j.jsxs("td",{style:{textAlign:"right"},children:[j.jsx("button",{className:"sw-btn",style:{padding:"2px 5px",fontSize:"0.8rem",marginRight:"5px"},onClick:()=>I(b),children:"EDIT"}),j.jsx("button",{className:"sw-btn danger",style:{padding:"2px 5px",fontSize:"0.8rem"},onClick:()=>Q(b.id),children:"DELETE"})]})]},b.id))})]})]}),r==="permissions"&&j.jsxs("div",{children:[j.jsxs("div",{style:{marginBottom:"20px"},children:[j.jsx("label",{children:"SELECT USER: "}),j.jsxs("select",{className:"sw-input",style:{background:"black"},onChange:b=>L(b.target.value),value:O||"",children:[j.jsx("option",{value:"",children:"-- Select User --"}),u.map(b=>j.jsxs("option",{value:b.id,children:[b.username," (",b.role,")"]},b.id))]})]}),O&&j.jsxs("div",{children:[j.jsx("h4",{children:"ACCESS RIGHTS"}),g.map(b=>{const W=F.includes(b.id);return j.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px",borderBottom:"1px solid #333",padding:"5px"},children:[j.jsx("input",{type:"checkbox",checked:W,onChange:()=>X(b.id,W),style:{marginRight:"10px",transform:"scale(1.5)"}}),j.jsxs("div",{style:{flex:1},children:[j.jsx("div",{style:{color:"var(--sw-yellow)"},children:b.filename}),j.jsxs("div",{style:{fontSize:"0.8rem",color:"#666"},children:[b.type," | Owner: ",b.owner_id]})]})]},b.id)})]})]})]})};var oi={},Bw=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},yg={},hn={};let Af;const Pw=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];hn.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};hn.getSymbolTotalCodewords=function(t){return Pw[t]};hn.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};hn.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Af=t};hn.isKanjiModeEnabled=function(){return typeof Af<"u"};hn.toSJIS=function(t){return Af(t)};var ol={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},e.from=function(o,u){if(e.isValid(o))return o;try{return t(o)}catch{return u}}})(ol);function Eg(){this.buffer=[],this.length=0}Eg.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Fw=Eg;function xo(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}xo.prototype.set=function(e,t,r,o){const u=e*this.size+t;this.data[u]=r,o&&(this.reservedBit[u]=!0)};xo.prototype.get=function(e,t){return this.data[e*this.size+t]};xo.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r};xo.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Uw=xo,Cg={};(function(e){const t=hn.getSymbolSize;e.getRowColCoords=function(o){if(o===1)return[];const u=Math.floor(o/7)+2,f=t(o),g=f===145?26:Math.ceil((f-13)/(2*u-2))*2,x=[f-7];for(let w=1;w<u-1;w++)x[w]=x[w-1]-g;return x.push(6),x.reverse()},e.getPositions=function(o){const u=[],f=e.getRowColCoords(o),g=f.length;for(let x=0;x<g;x++)for(let w=0;w<g;w++)x===0&&w===0||x===0&&w===g-1||x===g-1&&w===0||u.push([f[x],f[w]]);return u}})(Cg);var Ag={};const jw=hn.getSymbolSize,b0=7;Ag.getPositions=function(t){const r=jw(t);return[[0,0],[r-b0,0],[0,r-b0]]};var Sg={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(u){return u!=null&&u!==""&&!isNaN(u)&&u>=0&&u<=7},e.from=function(u){return e.isValid(u)?parseInt(u,10):void 0},e.getPenaltyN1=function(u){const f=u.size;let g=0,x=0,w=0,m=null,A=null;for(let I=0;I<f;I++){x=w=0,m=A=null;for(let O=0;O<f;O++){let L=u.get(I,O);L===m?x++:(x>=5&&(g+=t.N1+(x-5)),m=L,x=1),L=u.get(O,I),L===A?w++:(w>=5&&(g+=t.N1+(w-5)),A=L,w=1)}x>=5&&(g+=t.N1+(x-5)),w>=5&&(g+=t.N1+(w-5))}return g},e.getPenaltyN2=function(u){const f=u.size;let g=0;for(let x=0;x<f-1;x++)for(let w=0;w<f-1;w++){const m=u.get(x,w)+u.get(x,w+1)+u.get(x+1,w)+u.get(x+1,w+1);(m===4||m===0)&&g++}return g*t.N2},e.getPenaltyN3=function(u){const f=u.size;let g=0,x=0,w=0;for(let m=0;m<f;m++){x=w=0;for(let A=0;A<f;A++)x=x<<1&2047|u.get(m,A),A>=10&&(x===1488||x===93)&&g++,w=w<<1&2047|u.get(A,m),A>=10&&(w===1488||w===93)&&g++}return g*t.N3},e.getPenaltyN4=function(u){let f=0;const g=u.data.length;for(let w=0;w<g;w++)f+=u.data[w];return Math.abs(Math.ceil(f*100/g/5)-10)*t.N4};function r(o,u,f){switch(o){case e.Patterns.PATTERN000:return(u+f)%2===0;case e.Patterns.PATTERN001:return u%2===0;case e.Patterns.PATTERN010:return f%3===0;case e.Patterns.PATTERN011:return(u+f)%3===0;case e.Patterns.PATTERN100:return(Math.floor(u/2)+Math.floor(f/3))%2===0;case e.Patterns.PATTERN101:return u*f%2+u*f%3===0;case e.Patterns.PATTERN110:return(u*f%2+u*f%3)%2===0;case e.Patterns.PATTERN111:return(u*f%3+(u+f)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}e.applyMask=function(u,f){const g=f.size;for(let x=0;x<g;x++)for(let w=0;w<g;w++)f.isReserved(w,x)||f.xor(w,x,r(u,w,x))},e.getBestMask=function(u,f){const g=Object.keys(e.Patterns).length;let x=0,w=1/0;for(let m=0;m<g;m++){f(m),e.applyMask(m,u);const A=e.getPenaltyN1(u)+e.getPenaltyN2(u)+e.getPenaltyN3(u)+e.getPenaltyN4(u);e.applyMask(m,u),A<w&&(w=A,x=m)}return x}})(Sg);var al={};const _r=ol,Qo=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Zo=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];al.getBlocksCount=function(t,r){switch(r){case _r.L:return Qo[(t-1)*4+0];case _r.M:return Qo[(t-1)*4+1];case _r.Q:return Qo[(t-1)*4+2];case _r.H:return Qo[(t-1)*4+3];default:return}};al.getTotalCodewordsCount=function(t,r){switch(r){case _r.L:return Zo[(t-1)*4+0];case _r.M:return Zo[(t-1)*4+1];case _r.Q:return Zo[(t-1)*4+2];case _r.H:return Zo[(t-1)*4+3];default:return}};var Ig={},ll={};const Vs=new Uint8Array(512),ja=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)Vs[r]=t,ja[t]=r,t<<=1,t&256&&(t^=285);for(let r=255;r<512;r++)Vs[r]=Vs[r-255]})();ll.log=function(t){if(t<1)throw new Error("log("+t+")");return ja[t]};ll.exp=function(t){return Vs[t]};ll.mul=function(t,r){return t===0||r===0?0:Vs[ja[t]+ja[r]]};(function(e){const t=ll;e.mul=function(o,u){const f=new Uint8Array(o.length+u.length-1);for(let g=0;g<o.length;g++)for(let x=0;x<u.length;x++)f[g+x]^=t.mul(o[g],u[x]);return f},e.mod=function(o,u){let f=new Uint8Array(o);for(;f.length-u.length>=0;){const g=f[0];for(let w=0;w<u.length;w++)f[w]^=t.mul(u[w],g);let x=0;for(;x<f.length&&f[x]===0;)x++;f=f.slice(x)}return f},e.generateECPolynomial=function(o){let u=new Uint8Array([1]);for(let f=0;f<o;f++)u=e.mul(u,new Uint8Array([1,t.exp(f)]));return u}})(Ig);const vg=Ig;function Sf(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Sf.prototype.initialize=function(t){this.degree=t,this.genPoly=vg.generateECPolynomial(this.degree)};Sf.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const o=vg.mod(r,this.genPoly),u=this.degree-o.length;if(u>0){const f=new Uint8Array(this.degree);return f.set(o,u),f}return o};var zw=Sf,Tg={},Wr={},If={};If.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var $n={};const Ng="[0-9]+",Vw="[A-Z $%*+\\-./:]+";let lo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";lo=lo.replace(/u/g,"\\u");const Hw="(?:(?![A-Z0-9 $%*+\\-./:]|"+lo+`)(?:.|[\r
]))+`;$n.KANJI=new RegExp(lo,"g");$n.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");$n.BYTE=new RegExp(Hw,"g");$n.NUMERIC=new RegExp(Ng,"g");$n.ALPHANUMERIC=new RegExp(Vw,"g");const Ww=new RegExp("^"+lo+"$"),Gw=new RegExp("^"+Ng+"$"),Yw=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");$n.testKanji=function(t){return Ww.test(t)};$n.testNumeric=function(t){return Gw.test(t)};$n.testAlphanumeric=function(t){return Yw.test(t)};(function(e){const t=If,r=$n;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(f,g){if(!f.ccBits)throw new Error("Invalid mode: "+f);if(!t.isValid(g))throw new Error("Invalid version: "+g);return g>=1&&g<10?f.ccBits[0]:g<27?f.ccBits[1]:f.ccBits[2]},e.getBestModeForData=function(f){return r.testNumeric(f)?e.NUMERIC:r.testAlphanumeric(f)?e.ALPHANUMERIC:r.testKanji(f)?e.KANJI:e.BYTE},e.toString=function(f){if(f&&f.id)return f.id;throw new Error("Invalid mode")},e.isValid=function(f){return f&&f.bit&&f.ccBits};function o(u){if(typeof u!="string")throw new Error("Param is not a string");switch(u.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+u)}}e.from=function(f,g){if(e.isValid(f))return f;try{return o(f)}catch{return g}}})(Wr);(function(e){const t=hn,r=al,o=ol,u=Wr,f=If,g=7973,x=t.getBCHDigit(g);function w(O,L,F){for(let B=1;B<=40;B++)if(L<=e.getCapacity(B,F,O))return B}function m(O,L){return u.getCharCountIndicator(O,L)+4}function A(O,L){let F=0;return O.forEach(function(B){const Y=m(B.mode,L);F+=Y+B.getBitsLength()}),F}function I(O,L){for(let F=1;F<=40;F++)if(A(O,F)<=e.getCapacity(F,L,u.MIXED))return F}e.from=function(L,F){return f.isValid(L)?parseInt(L,10):F},e.getCapacity=function(L,F,B){if(!f.isValid(L))throw new Error("Invalid QR Code version");typeof B>"u"&&(B=u.BYTE);const Y=t.getSymbolTotalCodewords(L),R=r.getTotalCodewordsCount(L,F),T=(Y-R)*8;if(B===u.MIXED)return T;const _=T-m(B,L);switch(B){case u.NUMERIC:return Math.floor(_/10*3);case u.ALPHANUMERIC:return Math.floor(_/11*2);case u.KANJI:return Math.floor(_/13);case u.BYTE:default:return Math.floor(_/8)}},e.getBestVersionForData=function(L,F){let B;const Y=o.from(F,o.M);if(Array.isArray(L)){if(L.length>1)return I(L,Y);if(L.length===0)return 1;B=L[0]}else B=L;return w(B.mode,B.getLength(),Y)},e.getEncodedBits=function(L){if(!f.isValid(L)||L<7)throw new Error("Invalid QR Code version");let F=L<<12;for(;t.getBCHDigit(F)-x>=0;)F^=g<<t.getBCHDigit(F)-x;return L<<12|F}})(Tg);var _g={};const hc=hn,Rg=1335,Xw=21522,D0=hc.getBCHDigit(Rg);_g.getEncodedBits=function(t,r){const o=t.bit<<3|r;let u=o<<10;for(;hc.getBCHDigit(u)-D0>=0;)u^=Rg<<hc.getBCHDigit(u)-D0;return(o<<10|u)^Xw};var Og={};const Qw=Wr;function Ji(e){this.mode=Qw.NUMERIC,this.data=e.toString()}Ji.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Ji.prototype.getLength=function(){return this.data.length};Ji.prototype.getBitsLength=function(){return Ji.getBitsLength(this.data.length)};Ji.prototype.write=function(t){let r,o,u;for(r=0;r+3<=this.data.length;r+=3)o=this.data.substr(r,3),u=parseInt(o,10),t.put(u,10);const f=this.data.length-r;f>0&&(o=this.data.substr(r),u=parseInt(o,10),t.put(u,f*3+1))};var Zw=Ji;const Kw=Wr,ou=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function $i(e){this.mode=Kw.ALPHANUMERIC,this.data=e}$i.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};$i.prototype.getLength=function(){return this.data.length};$i.prototype.getBitsLength=function(){return $i.getBitsLength(this.data.length)};$i.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let o=ou.indexOf(this.data[r])*45;o+=ou.indexOf(this.data[r+1]),t.put(o,11)}this.data.length%2&&t.put(ou.indexOf(this.data[r]),6)};var qw=$i;const Jw=Wr;function es(e){this.mode=Jw.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}es.getBitsLength=function(t){return t*8};es.prototype.getLength=function(){return this.data.length};es.prototype.getBitsLength=function(){return es.getBitsLength(this.data.length)};es.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var $w=es;const ey=Wr,ty=hn;function ts(e){this.mode=ey.KANJI,this.data=e}ts.getBitsLength=function(t){return t*13};ts.prototype.getLength=function(){return this.data.length};ts.prototype.getBitsLength=function(){return ts.getBitsLength(this.data.length)};ts.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=ty.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var ny=ts,Mg={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,o,u){var f={},g={};g[o]=0;var x=t.PriorityQueue.make();x.push(o,0);for(var w,m,A,I,O,L,F,B,Y;!x.empty();){w=x.pop(),m=w.value,I=w.cost,O=r[m]||{};for(A in O)O.hasOwnProperty(A)&&(L=O[A],F=I+L,B=g[A],Y=typeof g[A]>"u",(Y||B>F)&&(g[A]=F,x.push(A,F),f[A]=m))}if(typeof u<"u"&&typeof g[u]>"u"){var R=["Could not find a path from ",o," to ",u,"."].join("");throw new Error(R)}return f},extract_shortest_path_from_predecessor_list:function(r,o){for(var u=[],f=o;f;)u.push(f),r[f],f=r[f];return u.reverse(),u},find_path:function(r,o,u){var f=t.single_source_shortest_paths(r,o,u);return t.extract_shortest_path_from_predecessor_list(f,u)},PriorityQueue:{make:function(r){var o=t.PriorityQueue,u={},f;r=r||{};for(f in o)o.hasOwnProperty(f)&&(u[f]=o[f]);return u.queue=[],u.sorter=r.sorter||o.default_sorter,u},default_sorter:function(r,o){return r.cost-o.cost},push:function(r,o){var u={value:r,cost:o};this.queue.push(u),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Mg);var ry=Mg.exports;(function(e){const t=Wr,r=Zw,o=qw,u=$w,f=ny,g=$n,x=hn,w=ry;function m(R){return unescape(encodeURIComponent(R)).length}function A(R,T,_){const k=[];let Q;for(;(Q=R.exec(_))!==null;)k.push({data:Q[0],index:Q.index,mode:T,length:Q[0].length});return k}function I(R){const T=A(g.NUMERIC,t.NUMERIC,R),_=A(g.ALPHANUMERIC,t.ALPHANUMERIC,R);let k,Q;return x.isKanjiModeEnabled()?(k=A(g.BYTE,t.BYTE,R),Q=A(g.KANJI,t.KANJI,R)):(k=A(g.BYTE_KANJI,t.BYTE,R),Q=[]),T.concat(_,k,Q).sort(function(b,W){return b.index-W.index}).map(function(b){return{data:b.data,mode:b.mode,length:b.length}})}function O(R,T){switch(T){case t.NUMERIC:return r.getBitsLength(R);case t.ALPHANUMERIC:return o.getBitsLength(R);case t.KANJI:return f.getBitsLength(R);case t.BYTE:return u.getBitsLength(R)}}function L(R){return R.reduce(function(T,_){const k=T.length-1>=0?T[T.length-1]:null;return k&&k.mode===_.mode?(T[T.length-1].data+=_.data,T):(T.push(_),T)},[])}function F(R){const T=[];for(let _=0;_<R.length;_++){const k=R[_];switch(k.mode){case t.NUMERIC:T.push([k,{data:k.data,mode:t.ALPHANUMERIC,length:k.length},{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.ALPHANUMERIC:T.push([k,{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.KANJI:T.push([k,{data:k.data,mode:t.BYTE,length:m(k.data)}]);break;case t.BYTE:T.push([{data:k.data,mode:t.BYTE,length:m(k.data)}])}}return T}function B(R,T){const _={},k={start:{}};let Q=["start"];for(let X=0;X<R.length;X++){const b=R[X],W=[];for(let H=0;H<b.length;H++){const ue=b[H],Ne=""+X+H;W.push(Ne),_[Ne]={node:ue,lastCount:0},k[Ne]={};for(let ce=0;ce<Q.length;ce++){const we=Q[ce];_[we]&&_[we].node.mode===ue.mode?(k[we][Ne]=O(_[we].lastCount+ue.length,ue.mode)-O(_[we].lastCount,ue.mode),_[we].lastCount+=ue.length):(_[we]&&(_[we].lastCount=ue.length),k[we][Ne]=O(ue.length,ue.mode)+4+t.getCharCountIndicator(ue.mode,T))}}Q=W}for(let X=0;X<Q.length;X++)k[Q[X]].end=0;return{map:k,table:_}}function Y(R,T){let _;const k=t.getBestModeForData(R);if(_=t.from(T,k),_!==t.BYTE&&_.bit<k.bit)throw new Error('"'+R+'" cannot be encoded with mode '+t.toString(_)+`.
 Suggested mode is: `+t.toString(k));switch(_===t.KANJI&&!x.isKanjiModeEnabled()&&(_=t.BYTE),_){case t.NUMERIC:return new r(R);case t.ALPHANUMERIC:return new o(R);case t.KANJI:return new f(R);case t.BYTE:return new u(R)}}e.fromArray=function(T){return T.reduce(function(_,k){return typeof k=="string"?_.push(Y(k,null)):k.data&&_.push(Y(k.data,k.mode)),_},[])},e.fromString=function(T,_){const k=I(T,x.isKanjiModeEnabled()),Q=F(k),X=B(Q,_),b=w.find_path(X.map,"start","end"),W=[];for(let H=1;H<b.length-1;H++)W.push(X.table[b[H]].node);return e.fromArray(L(W))},e.rawSplit=function(T){return e.fromArray(I(T,x.isKanjiModeEnabled()))}})(Og);const ul=hn,au=ol,iy=Fw,sy=Uw,oy=Cg,ay=Ag,dc=Sg,gc=al,ly=zw,za=Tg,uy=_g,cy=Wr,lu=Og;function fy(e,t){const r=e.size,o=ay.getPositions(t);for(let u=0;u<o.length;u++){const f=o[u][0],g=o[u][1];for(let x=-1;x<=7;x++)if(!(f+x<=-1||r<=f+x))for(let w=-1;w<=7;w++)g+w<=-1||r<=g+w||(x>=0&&x<=6&&(w===0||w===6)||w>=0&&w<=6&&(x===0||x===6)||x>=2&&x<=4&&w>=2&&w<=4?e.set(f+x,g+w,!0,!0):e.set(f+x,g+w,!1,!0))}}function hy(e){const t=e.size;for(let r=8;r<t-8;r++){const o=r%2===0;e.set(r,6,o,!0),e.set(6,r,o,!0)}}function dy(e,t){const r=oy.getPositions(t);for(let o=0;o<r.length;o++){const u=r[o][0],f=r[o][1];for(let g=-2;g<=2;g++)for(let x=-2;x<=2;x++)g===-2||g===2||x===-2||x===2||g===0&&x===0?e.set(u+g,f+x,!0,!0):e.set(u+g,f+x,!1,!0)}}function gy(e,t){const r=e.size,o=za.getEncodedBits(t);let u,f,g;for(let x=0;x<18;x++)u=Math.floor(x/3),f=x%3+r-8-3,g=(o>>x&1)===1,e.set(u,f,g,!0),e.set(f,u,g,!0)}function uu(e,t,r){const o=e.size,u=uy.getEncodedBits(t,r);let f,g;for(f=0;f<15;f++)g=(u>>f&1)===1,f<6?e.set(f,8,g,!0):f<8?e.set(f+1,8,g,!0):e.set(o-15+f,8,g,!0),f<8?e.set(8,o-f-1,g,!0):f<9?e.set(8,15-f-1+1,g,!0):e.set(8,15-f-1,g,!0);e.set(o-8,8,1,!0)}function py(e,t){const r=e.size;let o=-1,u=r-1,f=7,g=0;for(let x=r-1;x>0;x-=2)for(x===6&&x--;;){for(let w=0;w<2;w++)if(!e.isReserved(u,x-w)){let m=!1;g<t.length&&(m=(t[g]>>>f&1)===1),e.set(u,x-w,m),f--,f===-1&&(g++,f=7)}if(u+=o,u<0||r<=u){u-=o,o=-o;break}}}function my(e,t,r){const o=new iy;r.forEach(function(w){o.put(w.mode.bit,4),o.put(w.getLength(),cy.getCharCountIndicator(w.mode,e)),w.write(o)});const u=ul.getSymbolTotalCodewords(e),f=gc.getTotalCodewordsCount(e,t),g=(u-f)*8;for(o.getLengthInBits()+4<=g&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const x=(g-o.getLengthInBits())/8;for(let w=0;w<x;w++)o.put(w%2?17:236,8);return xy(o,e,t)}function xy(e,t,r){const o=ul.getSymbolTotalCodewords(t),u=gc.getTotalCodewordsCount(t,r),f=o-u,g=gc.getBlocksCount(t,r),x=o%g,w=g-x,m=Math.floor(o/g),A=Math.floor(f/g),I=A+1,O=m-A,L=new ly(O);let F=0;const B=new Array(g),Y=new Array(g);let R=0;const T=new Uint8Array(e.buffer);for(let b=0;b<g;b++){const W=b<w?A:I;B[b]=T.slice(F,F+W),Y[b]=L.encode(B[b]),F+=W,R=Math.max(R,W)}const _=new Uint8Array(o);let k=0,Q,X;for(Q=0;Q<R;Q++)for(X=0;X<g;X++)Q<B[X].length&&(_[k++]=B[X][Q]);for(Q=0;Q<O;Q++)for(X=0;X<g;X++)_[k++]=Y[X][Q];return _}function wy(e,t,r,o){let u;if(Array.isArray(e))u=lu.fromArray(e);else if(typeof e=="string"){let m=t;if(!m){const A=lu.rawSplit(e);m=za.getBestVersionForData(A,r)}u=lu.fromString(e,m||40)}else throw new Error("Invalid data");const f=za.getBestVersionForData(u,r);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=f;else if(t<f)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+f+`.
`);const g=my(t,r,u),x=ul.getSymbolSize(t),w=new sy(x);return fy(w,t),hy(w),dy(w,t),uu(w,r,0),t>=7&&gy(w,t),py(w,g),isNaN(o)&&(o=dc.getBestMask(w,uu.bind(null,w,r))),dc.applyMask(o,w),uu(w,r,o),{modules:w,version:t,errorCorrectionLevel:r,maskPattern:o,segments:u}}yg.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");let o=au.M,u,f;return typeof r<"u"&&(o=au.from(r.errorCorrectionLevel,au.M),u=za.from(r.version),f=dc.from(r.maskPattern),r.toSJISFunc&&ul.setToSJISFunction(r.toSJISFunc)),wy(t,u,o,f)};var bg={},vf={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let o=r.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+r);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(f){return[f,f]}))),o.length===6&&o.push("F","F");const u=parseInt(o.join(""),16);return{r:u>>24&255,g:u>>16&255,b:u>>8&255,a:u&255,hex:"#"+o.slice(0,6).join("")}}e.getOptions=function(o){o||(o={}),o.color||(o.color={});const u=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,f=o.width&&o.width>=21?o.width:void 0,g=o.scale||4;return{width:f,scale:f?4:g,margin:u,color:{dark:t(o.color.dark||"#000000ff"),light:t(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},e.getScale=function(o,u){return u.width&&u.width>=o+u.margin*2?u.width/(o+u.margin*2):u.scale},e.getImageWidth=function(o,u){const f=e.getScale(o,u);return Math.floor((o+u.margin*2)*f)},e.qrToImageData=function(o,u,f){const g=u.modules.size,x=u.modules.data,w=e.getScale(g,f),m=Math.floor((g+f.margin*2)*w),A=f.margin*w,I=[f.color.light,f.color.dark];for(let O=0;O<m;O++)for(let L=0;L<m;L++){let F=(O*m+L)*4,B=f.color.light;if(O>=A&&L>=A&&O<m-A&&L<m-A){const Y=Math.floor((O-A)/w),R=Math.floor((L-A)/w);B=I[x[Y*g+R]?1:0]}o[F++]=B.r,o[F++]=B.g,o[F++]=B.b,o[F]=B.a}}})(vf);(function(e){const t=vf;function r(u,f,g){u.clearRect(0,0,f.width,f.height),f.style||(f.style={}),f.height=g,f.width=g,f.style.height=g+"px",f.style.width=g+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(f,g,x){let w=x,m=g;typeof w>"u"&&(!g||!g.getContext)&&(w=g,g=void 0),g||(m=o()),w=t.getOptions(w);const A=t.getImageWidth(f.modules.size,w),I=m.getContext("2d"),O=I.createImageData(A,A);return t.qrToImageData(O.data,f,w),r(I,m,A),I.putImageData(O,0,0),m},e.renderToDataURL=function(f,g,x){let w=x;typeof w>"u"&&(!g||!g.getContext)&&(w=g,g=void 0),w||(w={});const m=e.render(f,g,w),A=w.type||"image/png",I=w.rendererOpts||{};return m.toDataURL(A,I.quality)}})(bg);var Dg={};const yy=vf;function L0(e,t){const r=e.a/255,o=t+'="'+e.hex+'"';return r<1?o+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':o}function cu(e,t,r){let o=e+t;return typeof r<"u"&&(o+=" "+r),o}function Ey(e,t,r){let o="",u=0,f=!1,g=0;for(let x=0;x<e.length;x++){const w=Math.floor(x%t),m=Math.floor(x/t);!w&&!f&&(f=!0),e[x]?(g++,x>0&&w>0&&e[x-1]||(o+=f?cu("M",w+r,.5+m+r):cu("m",u,0),u=0,f=!1),w+1<t&&e[x+1]||(o+=cu("h",g),g=0)):u++}return o}Dg.render=function(t,r,o){const u=yy.getOptions(r),f=t.modules.size,g=t.modules.data,x=f+u.margin*2,w=u.color.light.a?"<path "+L0(u.color.light,"fill")+' d="M0 0h'+x+"v"+x+'H0z"/>':"",m="<path "+L0(u.color.dark,"stroke")+' d="'+Ey(g,f,u.margin)+'"/>',A='viewBox="0 0 '+x+" "+x+'"',O='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+A+' shape-rendering="crispEdges">'+w+m+`</svg>
`;return typeof o=="function"&&o(null,O),O};const Cy=Bw,pc=yg,Lg=bg,Ay=Dg;function Tf(e,t,r,o,u){const f=[].slice.call(arguments,1),g=f.length,x=typeof f[g-1]=="function";if(!x&&!Cy())throw new Error("Callback required as last argument");if(x){if(g<2)throw new Error("Too few arguments provided");g===2?(u=r,r=t,t=o=void 0):g===3&&(t.getContext&&typeof u>"u"?(u=o,o=void 0):(u=o,o=r,r=t,t=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(r=t,t=o=void 0):g===2&&!t.getContext&&(o=r,r=t,t=void 0),new Promise(function(w,m){try{const A=pc.create(r,o);w(e(A,t,o))}catch(A){m(A)}})}try{const w=pc.create(r,o);u(null,e(w,t,o))}catch(w){u(w)}}oi.create=pc.create;oi.toCanvas=Tf.bind(null,Lg.render);oi.toDataURL=Tf.bind(null,Lg.renderToDataURL);oi.toString=Tf.bind(null,function(e,t,r){return Ay.render(e,r)});const Sy=()=>{const{user:e,logout:t,token:r}=K.useContext(hl),o=K.useContext(Qg),[u,f]=K.useState([]),[g,x]=K.useState([]),[w,m]=K.useState("main"),[A,I]=K.useState("video"),[O,L]=K.useState(""),[F,B]=K.useState(null),[Y,R]=K.useState(null),[T,_]=K.useState(""),[k,Q]=K.useState(""),[X,b]=K.useState(null),[W,H]=K.useState(null),ue=te=>{try{const fe=te.match(/(\d{8})_(\d{4})\./);if(fe){const Be=fe[1],Me=fe[2],In=Be.substring(0,4),ae=Be.substring(4,6),Pn=Be.substring(6,8),ft=Me.substring(0,2),Gr=Me.substring(2,4);return`${Pn}/${ae}/${In} ${ft}:${Gr}`}}catch{return""}return""},Ne=async te=>{try{const Be=await(await fetch(`/uploads/${te}`)).text();H(Be),m("view_text")}catch(fe){console.error(fe),alert("Failed to load text file")}};K.useEffect(()=>(ce(),we(),$e(),o&&(o.on("receive_message",te=>{te.documentId&&(R(te),new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(Be=>console.log("Audio play failed",Be)))}),o.on("contact_added",te=>{f(Be=>[...Be,te.contact]),new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(Be=>console.log("Audio play failed",Be))})),()=>{o&&(o.off("receive_message"),o.off("contact_added"))}),[o]);const ce=async()=>{const te=await fetch("/api/contacts",{headers:{Authorization:`Bearer ${r}`}});te.ok&&f(await te.json())},we=async()=>{const te=await fetch("/api/documents",{headers:{Authorization:`Bearer ${r}`}});te.ok&&x(await te.json())},$e=async()=>{try{const te=await oi.toDataURL(e.qr_code);L(te)}catch(te){console.error(te)}},G=async(te,fe)=>{const Be=new FormData;Be.append("file",te),Be.append("type",fe),F&&Be.append("recipientId",F.id);try{const Me=await fetch("/api/upload",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:Be});if(Me.ok){const In=await Me.json();F?(o.emit("send_message",{to:F.id,from:e.id,type:fe,content:"New Document",documentId:In.id}),alert("Sent!")):alert("Saved to library"),we()}}catch(Me){console.error(Me),alert("Upload failed")}m("main"),B(null),_("")},Ke=()=>{if(!T)return;const te=new File([T],"message.txt",{type:"text/plain"});G(te,"text")},ye=async te=>{m("main");try{(await fetch("/api/contacts",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({qr_code:te})})).ok?(alert("Contact Added!"),ce()):alert(`Scanned: ${te}`)}catch(fe){console.error(fe)}},re=async()=>{if(k)try{const te=await oi.toDataURL(k);L(te),b(te),m("show_qr")}catch(te){console.error(te)}},ge=async te=>{try{const fe=await oi.toDataURL(te);b(fe),m("show_qr")}catch(fe){console.error(fe)}},pe=(te,fe=null)=>{B(fe),te==="text"?m("text"):(I(te),m("camera"))};return j.jsxs("div",{style:{padding:"10px",height:"100vh",overflowY:"auto"},children:[j.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[j.jsxs("h3",{className:"hologram-text",children:[e.username," [",e.role,"]"]}),j.jsx("button",{className:"sw-btn danger",onClick:t,children:"LOGOUT"})]}),Y&&j.jsx("div",{className:"alert-overlay",children:j.jsxs("div",{className:"alert-box",children:[j.jsx("h3",{children:"INCOMING TRANSMISSION"}),j.jsxs("p",{children:["From: ",Y.from]}),j.jsxs("p",{children:["Type: ",Y.type]}),j.jsx("button",{className:"sw-btn",onClick:()=>{we(),R(null)},children:"ACCEPT"}),j.jsx("button",{className:"sw-btn danger",onClick:()=>R(null),children:"IGNORE"})]})}),j.jsxs("div",{className:"hologram-box",style:{marginBottom:"20px",textAlign:"center"},children:[j.jsx("img",{src:O,alt:"ID QR",style:{width:"150px",border:"2px solid var(--sw-blue)"}}),j.jsx("p",{style:{fontSize:"0.8rem",color:"var(--sw-blue)"},children:e.qr_code})]}),j.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"20px"},children:[j.jsx("button",{className:"sw-btn",onClick:()=>m("scanner"),children:"SCAN QR"}),j.jsx("button",{className:"sw-btn",onClick:()=>m("object_qr"),children:"GEN OBJECT QR"}),(e.role==="ADMIN"||e.role==="OPERATOR")&&j.jsx("button",{className:"sw-btn",style:{gridColumn:"span 2"},onClick:()=>m("admin"),children:"ADMIN PANEL"})]}),j.jsxs("div",{className:"hologram-box",style:{marginBottom:"20px"},children:[j.jsx("h4",{className:"hologram-text",children:"CONTACTS"}),u.map(te=>j.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #333",padding:"5px"},children:[j.jsx("span",{children:te.username}),j.jsxs("div",{children:[j.jsx("button",{className:"sw-btn",style:{padding:"5px"},onClick:()=>pe("text",te),children:"TXT"}),j.jsx("button",{className:"sw-btn",style:{padding:"5px"},onClick:()=>pe("video",te),children:"VID"}),j.jsx("button",{className:"sw-btn",style:{padding:"5px"},onClick:()=>pe("audio",te),children:"AUD"}),j.jsx("button",{className:"sw-btn",style:{padding:"5px"},onClick:()=>pe("image",te),children:"IMG"})]})]},te.id))]}),j.jsxs("div",{className:"hologram-box",children:[j.jsx("h4",{className:"hologram-text",children:"DATABANKS"}),g.map(te=>j.jsxs("div",{style:{marginBottom:"10px",borderBottom:"1px solid #333",paddingBottom:"10px"},children:[j.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[j.jsxs("div",{style:{color:"var(--sw-yellow)"},children:[te.filename," ",j.jsx("br",{}),j.jsx("span",{style:{fontSize:"0.8em",color:"#aaa"},children:ue(te.filename)})]}),j.jsx("button",{className:"sw-btn",style:{padding:"2px 5px",fontSize:"0.8em"},onClick:()=>ge(te.id),children:"QR"})]}),te.type==="image"&&j.jsx("img",{src:`/uploads/${te.filename}`,style:{maxWidth:"100%",marginTop:"5px"}}),te.type==="video"&&j.jsx("video",{src:`/uploads/${te.filename}`,controls:!0,style:{maxWidth:"100%",marginTop:"5px"}}),te.type==="audio"&&j.jsx("audio",{src:`/uploads/${te.filename}`,controls:!0,style:{marginTop:"5px",width:"100%"}}),te.type==="text"&&j.jsx("div",{style:{background:"#111",padding:"5px",marginTop:"5px",border:"1px solid #333"},children:j.jsx("button",{className:"sw-btn",style:{padding:"5px",fontSize:"0.9em"},onClick:()=>Ne(te.filename),children:"VIEW TEXT"})})]},te.id))]}),w==="camera"&&j.jsx(Zx,{mode:A,onCancel:()=>m("main"),onCapture:G}),w==="scanner"&&j.jsx(Lw,{onClose:()=>m("main"),onScan:ye}),w==="admin"&&j.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:100,background:"black"},children:j.jsx(kw,{onBack:()=>m("main")})}),w==="text"&&j.jsxs("div",{className:"hologram-box",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:100,background:"black",display:"flex",flexDirection:"column"},children:[j.jsx("h3",{className:"hologram-text",children:"SEND TEXT MESSAGE"}),j.jsx("textarea",{className:"sw-input",style:{flex:1,resize:"none"},value:T,onChange:te=>_(te.target.value),placeholder:"Enter your message..."}),j.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[j.jsx("button",{className:"sw-btn danger",style:{flex:1},onClick:()=>{m("main"),_("")},children:"CANCEL"}),j.jsx("button",{className:"sw-btn",style:{flex:1},onClick:Ke,children:"SEND"})]})]}),w==="object_qr"&&j.jsxs("div",{className:"hologram-box",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:100,background:"black",display:"flex",flexDirection:"column",justifyContent:"center"},children:[j.jsx("h3",{className:"hologram-text",children:"GENERATE OBJECT QR"}),j.jsx("input",{className:"sw-input",value:k,onChange:te=>Q(te.target.value),placeholder:"Enter Object Name/ID"}),j.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[j.jsx("button",{className:"sw-btn danger",style:{flex:1},onClick:()=>m("main"),children:"CANCEL"}),j.jsx("button",{className:"sw-btn",style:{flex:1},onClick:re,children:"GENERATE"})]})]}),w==="show_qr"&&j.jsxs("div",{className:"hologram-box",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:100,background:"black",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[j.jsx("h3",{className:"hologram-text",children:"QR CODE"}),j.jsx("img",{src:X,alt:"QR",style:{width:"250px",border:"2px solid var(--sw-blue)"}}),j.jsx("button",{className:"sw-btn",style:{marginTop:"20px",width:"200px"},onClick:()=>m("main"),children:"CLOSE"})]}),w==="view_text"&&j.jsxs("div",{className:"hologram-box",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:100,background:"black",display:"flex",flexDirection:"column",padding:"20px"},children:[j.jsx("h3",{className:"hologram-text",children:"TEXT TRANSMISSION"}),j.jsx("div",{style:{flex:1,overflow:"auto",background:"#111",border:"1px solid var(--sw-blue)",padding:"15px",marginTop:"10px",marginBottom:"10px",color:"var(--sw-blue)",fontFamily:"monospace",whiteSpace:"pre-wrap"},children:W}),j.jsx("button",{className:"sw-btn",onClick:()=>{m("main"),H(null)},children:"RETOUR"})]})]})},Jn=Object.create(null);Jn.open="0";Jn.close="1";Jn.ping="2";Jn.pong="3";Jn.message="4";Jn.upgrade="5";Jn.noop="6";const ca=Object.create(null);Object.keys(Jn).forEach(e=>{ca[Jn[e]]=e});const mc={type:"error",data:"parser error"},kg=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bg=typeof ArrayBuffer=="function",Pg=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Nf=({type:e,data:t},r,o)=>kg&&t instanceof Blob?r?o(t):k0(t,o):Bg&&(t instanceof ArrayBuffer||Pg(t))?r?o(t):k0(new Blob([t]),o):o(Jn[e]+(t||"")),k0=(e,t)=>{const r=new FileReader;return r.onload=function(){const o=r.result.split(",")[1];t("b"+(o||""))},r.readAsDataURL(e)};function B0(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let fu;function Iy(e,t){if(kg&&e.data instanceof Blob)return e.data.arrayBuffer().then(B0).then(t);if(Bg&&(e.data instanceof ArrayBuffer||Pg(e.data)))return t(B0(e.data));Nf(e,!1,r=>{fu||(fu=new TextEncoder),t(fu.encode(r))})}const P0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<P0.length;e++)bs[P0.charCodeAt(e)]=e;const vy=e=>{let t=e.length*.75,r=e.length,o,u=0,f,g,x,w;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const m=new ArrayBuffer(t),A=new Uint8Array(m);for(o=0;o<r;o+=4)f=bs[e.charCodeAt(o)],g=bs[e.charCodeAt(o+1)],x=bs[e.charCodeAt(o+2)],w=bs[e.charCodeAt(o+3)],A[u++]=f<<2|g>>4,A[u++]=(g&15)<<4|x>>2,A[u++]=(x&3)<<6|w&63;return m},Ty=typeof ArrayBuffer=="function",_f=(e,t)=>{if(typeof e!="string")return{type:"message",data:Fg(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:Ny(e.substring(1),t)}:ca[r]?e.length>1?{type:ca[r],data:e.substring(1)}:{type:ca[r]}:mc},Ny=(e,t)=>{if(Ty){const r=vy(e);return Fg(r,t)}else return{base64:!0,data:e}},Fg=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Ug="",_y=(e,t)=>{const r=e.length,o=new Array(r);let u=0;e.forEach((f,g)=>{Nf(f,!1,x=>{o[g]=x,++u===r&&t(o.join(Ug))})})},Ry=(e,t)=>{const r=e.split(Ug),o=[];for(let u=0;u<r.length;u++){const f=_f(r[u],t);if(o.push(f),f.type==="error")break}return o};function Oy(){return new TransformStream({transform(e,t){Iy(e,r=>{const o=r.length;let u;if(o<126)u=new Uint8Array(1),new DataView(u.buffer).setUint8(0,o);else if(o<65536){u=new Uint8Array(3);const f=new DataView(u.buffer);f.setUint8(0,126),f.setUint16(1,o)}else{u=new Uint8Array(9);const f=new DataView(u.buffer);f.setUint8(0,127),f.setBigUint64(1,BigInt(o))}e.data&&typeof e.data!="string"&&(u[0]|=128),t.enqueue(u),t.enqueue(r)})}})}let hu;function Ko(e){return e.reduce((t,r)=>t+r.length,0)}function qo(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let o=0;for(let u=0;u<t;u++)r[u]=e[0][o++],o===e[0].length&&(e.shift(),o=0);return e.length&&o<e[0].length&&(e[0]=e[0].slice(o)),r}function My(e,t){hu||(hu=new TextDecoder);const r=[];let o=0,u=-1,f=!1;return new TransformStream({transform(g,x){for(r.push(g);;){if(o===0){if(Ko(r)<1)break;const w=qo(r,1);f=(w[0]&128)===128,u=w[0]&127,u<126?o=3:u===126?o=1:o=2}else if(o===1){if(Ko(r)<2)break;const w=qo(r,2);u=new DataView(w.buffer,w.byteOffset,w.length).getUint16(0),o=3}else if(o===2){if(Ko(r)<8)break;const w=qo(r,8),m=new DataView(w.buffer,w.byteOffset,w.length),A=m.getUint32(0);if(A>Math.pow(2,21)-1){x.enqueue(mc);break}u=A*Math.pow(2,32)+m.getUint32(4),o=3}else{if(Ko(r)<u)break;const w=qo(r,u);x.enqueue(_f(f?w:hu.decode(w),t)),o=0}if(u===0||u>e){x.enqueue(mc);break}}}})}const jg=4;function gt(e){if(e)return by(e)}function by(e){for(var t in gt.prototype)e[t]=gt.prototype[t];return e}gt.prototype.on=gt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};gt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};gt.prototype.off=gt.prototype.removeListener=gt.prototype.removeAllListeners=gt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var o,u=0;u<r.length;u++)if(o=r[u],o===t||o.fn===t){r.splice(u,1);break}return r.length===0&&delete this._callbacks["$"+e],this};gt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(r){r=r.slice(0);for(var o=0,u=r.length;o<u;++o)r[o].apply(this,t)}return this};gt.prototype.emitReserved=gt.prototype.emit;gt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};gt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const cl=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),yn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Dy="arraybuffer";function zg(e,...t){return t.reduce((r,o)=>(e.hasOwnProperty(o)&&(r[o]=e[o]),r),{})}const Ly=yn.setTimeout,ky=yn.clearTimeout;function fl(e,t){t.useNativeTimers?(e.setTimeoutFn=Ly.bind(yn),e.clearTimeoutFn=ky.bind(yn)):(e.setTimeoutFn=yn.setTimeout.bind(yn),e.clearTimeoutFn=yn.clearTimeout.bind(yn))}const By=1.33;function Py(e){return typeof e=="string"?Fy(e):Math.ceil((e.byteLength||e.size)*By)}function Fy(e){let t=0,r=0;for(let o=0,u=e.length;o<u;o++)t=e.charCodeAt(o),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(o++,r+=4);return r}function Vg(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Uy(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function jy(e){let t={},r=e.split("&");for(let o=0,u=r.length;o<u;o++){let f=r[o].split("=");t[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return t}class zy extends Error{constructor(t,r,o){super(t),this.description=r,this.context=o,this.type="TransportError"}}class Rf extends gt{constructor(t){super(),this.writable=!1,fl(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,o){return super.emitReserved("error",new zy(t,r,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=_f(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=Uy(t);return r.length?"?"+r:""}}class Vy extends Rf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||r()})),this.writable||(o++,this.once("drain",function(){--o||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};Ry(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,_y(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Vg()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Hg=!1;try{Hg=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Hy=Hg;function Wy(){}class Gy extends Vy{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let o=location.port;o||(o=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||o!==t.port}}doWrite(t,r){const o=this.request({method:"POST",data:t});o.on("success",r),o.on("error",(u,f)=>{this.onError("xhr post error",u,f)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,o)=>{this.onError("xhr poll error",r,o)}),this.pollXhr=t}}class qn extends gt{constructor(t,r,o){super(),this.createRequest=t,fl(this,o),this._opts=o,this._method=o.method||"GET",this._uri=r,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var t;const r=zg(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(r);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let u in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(u)&&o.setRequestHeader(u,this._opts.extraHeaders[u])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var u;o.readyState===3&&((u=this._opts.cookieJar)===null||u===void 0||u.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(u){this.setTimeoutFn(()=>{this._onError(u)},0);return}typeof document<"u"&&(this._index=qn.requestsCount++,qn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Wy,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete qn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}qn.requestsCount=0;qn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",F0);else if(typeof addEventListener=="function"){const e="onpagehide"in yn?"pagehide":"unload";addEventListener(e,F0,!1)}}function F0(){for(let e in qn.requests)qn.requests.hasOwnProperty(e)&&qn.requests[e].abort()}const Yy=function(){const e=Wg({xdomain:!1});return e&&e.responseType!==null}();class Xy extends Gy{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=Yy&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new qn(Wg,this.uri(),t)}}function Wg(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Hy))return new XMLHttpRequest}catch{}if(!t)try{return new yn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Gg=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Qy extends Rf{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,o=Gg?{}:zg(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,o)}catch(u){return this.emitReserved("error",u)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const o=t[r],u=r===t.length-1;Nf(o,this.supportsBinary,f=>{try{this.doWrite(o,f)}catch{}u&&cl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Vg()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const du=yn.WebSocket||yn.MozWebSocket;class Zy extends Qy{createSocket(t,r,o){return Gg?new du(t,r,o):r?new du(t,r):new du(t)}doWrite(t,r){this.ws.send(r)}}class Ky extends Rf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=My(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=t.readable.pipeThrough(r).getReader(),u=Oy();u.readable.pipeTo(t.writable),this._writer=u.writable.getWriter();const f=()=>{o.read().then(({done:x,value:w})=>{x||(this.onPacket(w),f())}).catch(x=>{})};f();const g={type:"open"};this.query.sid&&(g.data=`{"sid":"${this.query.sid}"}`),this._writer.write(g).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const o=t[r],u=r===t.length-1;this._writer.write(o).then(()=>{u&&cl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const qy={websocket:Zy,webtransport:Ky,polling:Xy},Jy=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$y=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xc(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),o=e.indexOf("]");r!=-1&&o!=-1&&(e=e.substring(0,r)+e.substring(r,o).replace(/:/g,";")+e.substring(o,e.length));let u=Jy.exec(e||""),f={},g=14;for(;g--;)f[$y[g]]=u[g]||"";return r!=-1&&o!=-1&&(f.source=t,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=e3(f,f.path),f.queryKey=t3(f,f.query),f}function e3(e,t){const r=/\/{2,9}/g,o=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&o.splice(0,1),t.slice(-1)=="/"&&o.splice(o.length-1,1),o}function t3(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,u,f){u&&(r[u]=f)}),r}const wc=typeof addEventListener=="function"&&typeof removeEventListener=="function",fa=[];wc&&addEventListener("offline",()=>{fa.forEach(e=>e())},!1);class Pr extends gt{constructor(t,r){if(super(),this.binaryType=Dy,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const o=xc(t);r.hostname=o.host,r.secure=o.protocol==="https"||o.protocol==="wss",r.port=o.port,o.query&&(r.query=o.query)}else r.host&&(r.hostname=xc(r.host).host);fl(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(o=>{const u=o.prototype.name;this.transports.push(u),this._transportsByName[u]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=jy(this.opts.query)),wc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},fa.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=jg,r.transport=t,this.id&&(r.sid=this.id);const o=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Pr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Pr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let o=0;o<this.writeBuffer.length;o++){const u=this.writeBuffer[o].data;if(u&&(r+=Py(u)),o>0&&r>this._maxPayload)return this.writeBuffer.slice(0,o);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,cl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,o){return this._sendPacket("message",t,r,o),this}send(t,r,o){return this._sendPacket("message",t,r,o),this}_sendPacket(t,r,o,u){if(typeof r=="function"&&(u=r,r=void 0),typeof o=="function"&&(u=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const f={type:t,data:r,options:o};this.emitReserved("packetCreate",f),this.writeBuffer.push(f),u&&this.once("flush",u),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},o=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():t()}):this.upgrading?o():t()),this}_onError(t){if(Pr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),wc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=fa.indexOf(this._offlineEventListener);o!==-1&&fa.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Pr.protocol=jg;class n3 extends Pr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),o=!1;Pr.priorWebsocketSuccess=!1;const u=()=>{o||(r.send([{type:"ping",data:"probe"}]),r.once("packet",I=>{if(!o)if(I.type==="pong"&&I.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Pr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(A(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const O=new Error("probe error");O.transport=r.name,this.emitReserved("upgradeError",O)}}))};function f(){o||(o=!0,A(),r.close(),r=null)}const g=I=>{const O=new Error("probe error: "+I);O.transport=r.name,f(),this.emitReserved("upgradeError",O)};function x(){g("transport closed")}function w(){g("socket closed")}function m(I){r&&I.name!==r.name&&f()}const A=()=>{r.removeListener("open",u),r.removeListener("error",g),r.removeListener("close",x),this.off("close",w),this.off("upgrading",m)};r.once("open",u),r.once("error",g),r.once("close",x),this.once("close",w),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{o||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let o=0;o<t.length;o++)~this.transports.indexOf(t[o])&&r.push(t[o]);return r}}let r3=class extends n3{constructor(t,r={}){const o=typeof t=="object"?t:r;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(u=>qy[u]).filter(u=>!!u)),super(t,o)}};function i3(e,t="",r){let o=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),o=xc(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const f=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+f+":"+o.port+t,o.href=o.protocol+"://"+f+(r&&r.port===o.port?"":":"+o.port),o}const s3=typeof ArrayBuffer=="function",o3=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Yg=Object.prototype.toString,a3=typeof Blob=="function"||typeof Blob<"u"&&Yg.call(Blob)==="[object BlobConstructor]",l3=typeof File=="function"||typeof File<"u"&&Yg.call(File)==="[object FileConstructor]";function Of(e){return s3&&(e instanceof ArrayBuffer||o3(e))||a3&&e instanceof Blob||l3&&e instanceof File}function ha(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,o=e.length;r<o;r++)if(ha(e[r]))return!0;return!1}if(Of(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ha(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&ha(e[r]))return!0;return!1}function u3(e){const t=[],r=e.data,o=e;return o.data=yc(r,t),o.attachments=t.length,{packet:o,buffers:t}}function yc(e,t){if(!e)return e;if(Of(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let o=0;o<e.length;o++)r[o]=yc(e[o],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=yc(e[o],t));return r}return e}function c3(e,t){return e.data=Ec(e.data,t),delete e.attachments,e}function Ec(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Ec(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Ec(e[r],t));return e}const f3=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],h3=5;var Te;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Te||(Te={}));class d3{constructor(t){this.replacer=t}encode(t){return(t.type===Te.EVENT||t.type===Te.ACK)&&ha(t)?this.encodeAsBinary({type:t.type===Te.EVENT?Te.BINARY_EVENT:Te.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Te.BINARY_EVENT||t.type===Te.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=u3(t),o=this.encodeAsString(r.packet),u=r.buffers;return u.unshift(o),u}}function U0(e){return Object.prototype.toString.call(e)==="[object Object]"}class Mf extends gt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const o=r.type===Te.BINARY_EVENT;o||r.type===Te.BINARY_ACK?(r.type=o?Te.EVENT:Te.ACK,this.reconstructor=new g3(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Of(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const o={type:Number(t.charAt(0))};if(Te[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===Te.BINARY_EVENT||o.type===Te.BINARY_ACK){const f=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const g=t.substring(f,r);if(g!=Number(g)||t.charAt(r)!=="-")throw new Error("Illegal attachments");o.attachments=Number(g)}if(t.charAt(r+1)==="/"){const f=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););o.nsp=t.substring(f,r)}else o.nsp="/";const u=t.charAt(r+1);if(u!==""&&Number(u)==u){const f=r+1;for(;++r;){const g=t.charAt(r);if(g==null||Number(g)!=g){--r;break}if(r===t.length)break}o.id=Number(t.substring(f,r+1))}if(t.charAt(++r)){const f=this.tryParse(t.substr(r));if(Mf.isPayloadValid(o.type,f))o.data=f;else throw new Error("invalid payload")}return o}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Te.CONNECT:return U0(r);case Te.DISCONNECT:return r===void 0;case Te.CONNECT_ERROR:return typeof r=="string"||U0(r);case Te.EVENT:case Te.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&f3.indexOf(r[0])===-1);case Te.ACK:case Te.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class g3{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=c3(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const p3=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Mf,Encoder:d3,get PacketType(){return Te},protocol:h3},Symbol.toStringTag,{value:"Module"}));function bn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const m3=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Xg extends gt{constructor(t,r,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[bn(t,"open",this.onopen.bind(this)),bn(t,"packet",this.onpacket.bind(this)),bn(t,"error",this.onerror.bind(this)),bn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var o,u,f;if(m3.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const g={type:Te.EVENT,data:r};if(g.options={},g.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const A=this.ids++,I=r.pop();this._registerAckCallback(A,I),g.id=A}const x=(u=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||u===void 0?void 0:u.writable,w=this.connected&&!(!((f=this.io.engine)===null||f===void 0)&&f._hasPingExpired());return this.flags.volatile&&!x||(w?(this.notifyOutgoingListeners(g),this.packet(g)):this.sendBuffer.push(g)),this.flags={},this}_registerAckCallback(t,r){var o;const u=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(u===void 0){this.acks[t]=r;return}const f=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let x=0;x<this.sendBuffer.length;x++)this.sendBuffer[x].id===t&&this.sendBuffer.splice(x,1);r.call(this,new Error("operation has timed out"))},u),g=(...x)=>{this.io.clearTimeoutFn(f),r.apply(this,x)};g.withError=!0,this.acks[t]=g}emitWithAck(t,...r){return new Promise((o,u)=>{const f=(g,x)=>g?u(g):o(x);f.withError=!0,r.push(f),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((u,...f)=>o!==this._queue[0]?void 0:(u!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(u)):(this._queue.shift(),r&&r(null,...f)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(o=>String(o.id)===t)){const o=this.acks[t];delete this.acks[t],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Te.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Te.EVENT:case Te.BINARY_EVENT:this.onevent(t);break;case Te.ACK:case Te.BINARY_ACK:this.onack(t);break;case Te.DISCONNECT:this.ondisconnect();break;case Te.CONNECT_ERROR:this.destroy();const o=new Error(t.data.message);o.data=t.data.data,this.emitReserved("connect_error",o);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const o of r)o.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let o=!1;return function(...u){o||(o=!0,r.packet({type:Te.ACK,id:t,data:u}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let o=0;o<r.length;o++)if(t===r[o])return r.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let o=0;o<r.length;o++)if(t===r[o])return r.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const o of r)o.apply(this,t.data)}}}function os(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}os.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};os.prototype.reset=function(){this.attempts=0};os.prototype.setMin=function(e){this.ms=e};os.prototype.setMax=function(e){this.max=e};os.prototype.setJitter=function(e){this.jitter=e};class Cc extends gt{constructor(t,r){var o;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,fl(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((o=r.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new os({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const u=r.parser||p3;this.encoder=new u.Encoder,this.decoder=new u.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new r3(this.uri,this.opts);const r=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const u=bn(r,"open",function(){o.onopen(),t&&t()}),f=x=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",x),t?t(x):this.maybeReconnectOnOpen()},g=bn(r,"error",f);if(this._timeout!==!1){const x=this._timeout,w=this.setTimeoutFn(()=>{u(),f(new Error("timeout")),r.close()},x);this.opts.autoUnref&&w.unref(),this.subs.push(()=>{this.clearTimeoutFn(w)})}return this.subs.push(u),this.subs.push(g),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(bn(t,"ping",this.onping.bind(this)),bn(t,"data",this.ondata.bind(this)),bn(t,"error",this.onerror.bind(this)),bn(t,"close",this.onclose.bind(this)),bn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){cl(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let o=this.nsps[t];return o?this._autoConnect&&!o.active&&o.connect():(o=new Xg(this,t,r),this.nsps[t]=o),o}_destroy(t){const r=Object.keys(this.nsps);for(const o of r)if(this.nsps[o].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let o=0;o<r.length;o++)this.engine.write(r[o],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(u=>{u?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",u)):t.onreconnect()}))},r);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ns={};function da(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=i3(e,t.path||"/socket.io"),o=r.source,u=r.id,f=r.path,g=Ns[u]&&f in Ns[u].nsps,x=t.forceNew||t["force new connection"]||t.multiplex===!1||g;let w;return x?w=new Cc(o,t):(Ns[u]||(Ns[u]=new Cc(o,t)),w=Ns[u]),r.query&&!t.query&&(t.query=r.queryKey),w.socket(r.path,t)}Object.assign(da,{Manager:Cc,Socket:Xg,io:da,connect:da});const hl=Ha.createContext(null),Qg=Ha.createContext(null);function x3(){const[e,t]=K.useState(null),[r,o]=K.useState(localStorage.getItem("token")),[u,f]=K.useState(null);K.useEffect(()=>{r&&fetch("/api/me",{headers:{Authorization:`Bearer ${r}`}}).then(w=>{if(w.ok)return w.json();throw new Error("Invalid token")}).then(w=>{t(w);const m=da("/",{auth:{token:r}});f(m),m.emit("join",w.id)}).catch(()=>{localStorage.removeItem("token"),o(null)})},[r]);const g=(w,m)=>{localStorage.setItem("token",w),o(w),t(m)},x=()=>{localStorage.removeItem("token"),o(null),t(null),u&&u.disconnect()};return j.jsx(hl.Provider,{value:{user:e,login:g,logout:x,token:r},children:j.jsx(Qg.Provider,{value:u,children:j.jsx(Xx,{children:j.jsx("div",{className:"app-container",children:j.jsxs(Wx,{children:[j.jsx(lc,{path:"/login",element:e?j.jsx(d0,{to:"/"}):j.jsx(Qx,{})}),j.jsx(lc,{path:"/",element:e?j.jsx(Sy,{}):j.jsx(d0,{to:"/login"})})]})})})})})}gu.createRoot(document.getElementById("root")).render(j.jsx(Ha.StrictMode,{children:j.jsx(x3,{})}));
